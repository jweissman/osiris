{"version":3,"sources":["webpack:///./node_modules/excalibur/dist/Promises.js","webpack:///./node_modules/excalibur/dist/Collision/Side.js","webpack:///./node_modules/excalibur/dist/Math/Random.js","webpack:///./node_modules/excalibur/dist/Util/Util.js","webpack:///./node_modules/excalibur/dist/Physics.js","webpack:///./node_modules/excalibur/dist/Algebra.js","webpack:///./node_modules/excalibur/dist/Events.js","webpack:///./node_modules/excalibur/dist/Util/Log.js","webpack:///./node_modules/excalibur/dist/EventDispatcher.js","webpack:///./node_modules/excalibur/dist/Class.js","webpack:///./node_modules/excalibur/dist/Drawing/Color.js","webpack:///./node_modules/excalibur/dist/Collision/CollisionContact.js","webpack:///./node_modules/excalibur/dist/Collision/CollisionJumpTable.js","webpack:///./node_modules/excalibur/dist/Collision/CircleArea.js","webpack:///./node_modules/excalibur/dist/Collision/EdgeArea.js","webpack:///./node_modules/excalibur/dist/Collision/PolygonArea.js","webpack:///./node_modules/excalibur/dist/Collision/BoundingBox.js","webpack:///./node_modules/excalibur/dist/Resources/Resource.js","webpack:///./node_modules/excalibur/dist/Drawing/SpriteEffects.js","webpack:///./node_modules/excalibur/dist/Configurable.js","webpack:///./node_modules/excalibur/dist/Drawing/Sprite.js","webpack:///./node_modules/excalibur/dist/Actions/RotationType.js","webpack:///./node_modules/excalibur/dist/Resources/Texture.js","webpack:///./node_modules/excalibur/dist/Actions/Action.js","webpack:///./node_modules/excalibur/dist/Util/EasingFunctions.js","webpack:///./node_modules/excalibur/dist/Actions/ActionContext.js","webpack:///./node_modules/excalibur/dist/Util/DrawUtil.js","webpack:///./node_modules/excalibur/dist/Collision/Pair.js","webpack:///./node_modules/excalibur/dist/Actor.js","webpack:///./node_modules/excalibur/dist/Collision/Body.js","webpack:///./node_modules/excalibur/dist/Traits/CapturePointer.js","webpack:///./node_modules/excalibur/dist/Traits/EulerMovement.js","webpack:///./node_modules/excalibur/dist/Util/CullingBox.js","webpack:///./node_modules/excalibur/dist/Traits/OffscreenCulling.js","webpack:///./node_modules/excalibur/dist/Traits/TileMapCollisionDetection.js","webpack:///./node_modules/excalibur/dist/UIActor.js","webpack:///./node_modules/excalibur/dist/Camera.js","webpack:///./node_modules/excalibur/dist/Timer.js","webpack:///./node_modules/excalibur/dist/TileMap.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/AudioContext.js","webpack:///./node_modules/excalibur/dist/Util/WebAudio.js","webpack:///./node_modules/excalibur/dist/Loader.js","webpack:///./node_modules/excalibur/dist/Util/Detector.js","webpack:///./node_modules/excalibur/dist/Collision/DynamicTree.js","webpack:///./node_modules/excalibur/dist/Collision/DynamicTreeCollisionBroadphase.js","webpack:///./node_modules/excalibur/dist/Util/SortedList.js","webpack:///./node_modules/excalibur/dist/Group.js","webpack:///./node_modules/excalibur/dist/Label.js","webpack:///./node_modules/excalibur/dist/Trigger.js","webpack:///./node_modules/excalibur/dist/Util/Actors.js","webpack:///./node_modules/excalibur/dist/Scene.js","webpack:///./node_modules/excalibur/dist/Input/Gamepad.js","webpack:///./node_modules/excalibur/dist/Debug.js","webpack:///./node_modules/excalibur/dist/Input/Pointer.js","webpack:///./node_modules/excalibur/dist/Input/Keyboard.js","webpack:///./node_modules/excalibur/dist/Engine.js","webpack:///./node_modules/excalibur/dist/Particles.js","webpack:///./node_modules/excalibur/dist/Events/MediaEvents.js","webpack:///./node_modules/excalibur/dist/Collision/NaiveCollisionBroadphase.js","webpack:///./node_modules/excalibur/dist/Drawing/Animation.js","webpack:///./node_modules/excalibur/dist/Drawing/Polygon.js","webpack:///./node_modules/excalibur/dist/Drawing/SpriteSheet.js","webpack:///./node_modules/excalibur/dist/Interfaces/IAudioImplementation.js","webpack:///./node_modules/excalibur/dist/Math/PerlinNoise.js","webpack:///./node_modules/excalibur/dist/PostProcessing/ColorBlindCorrector.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/AudioInstance.js","webpack:///./node_modules/excalibur/dist/Util/Sound.js","webpack:///./node_modules/excalibur/dist/Resources/Sound/Sound.js","webpack:///./node_modules/excalibur/dist/Util/Decorators.js","webpack:///./node_modules/excalibur/dist/index.js"],"names":["PromiseState","Resolved","Rejected","Pending","Side","Promise","this","_state","_successCallbacks","_rejectCallback","resolve","value","reject","join","promises","arguments","length","Array","isArray","_i","joinedPromise","total","successes","rejects","errors","forEach","p","then","error","e","push","prototype","successCallback","rejectCallback","state","call","_value","_handleError","errorCallback","_errorCallback","_this","Error","cb","Random","seed","_lowerMask","_upperMask","_w","_n","_m","_a","_u","_s","_b","_t","_c","_l","_f","_mt","Date","now","i","s","_index","_twist","mag01","y","nextInt","next","floating","min","max","integer","Math","floor","bool","likelihood","pickOne","array","pickSet","numPicks","allowDuplicates","_pickSetWithDuplicates","_pickSetWithoutDuplicates","result","currentPick","tempArray","slice","index","splice","shuffle","swap","randomIndex","range","d4","d6","d8","d10","d12","d20","None","Top","Bottom","Left","Right","TwoPI","PI","extend","extended","deep","Object","toString","assignExists","assign","merge","obj","prop","hasOwnProperty","base64Encode","inputStr","b64","outputStr","enc3","enc4","byte1","charCodeAt","byte2","byte3","enc1","enc2","isNaN","charAt","clamp","val","randomInRange","random","randomIntInRange","round","canonicalizeAngle","angle","tmpAngle","toDegrees","radians","toRadians","degrees","getPosition","el","oLeft","oTop","calcOffsetLeft","parent","offsetLeft","offsetParent","calcOffsetTop","offsetTop","Vector","addItemToArray","item","indexOf","removeItemFromArray","contains","getOppositeSide","side","getSideFromVector","direction","directions","Up","Down","directionEnum","Number","MAX_VALUE","maxIndex","dot","CollisionResolutionStrategy","BroadphaseStrategy","Integrator","Collection","initialSize","DefaultSize","_internalArray","_endPointer","_resize","newSize","newArray","count","element","pop","clear","internalSize","elementAt","insert","remove","removed","removeElement","toArray","func","map","x","fromAngle","cos","sin","isValid","vec","Infinity","distance","vec1","vec2","sqrt","pow","setTo","equals","vector","tolerance","abs","v","Zero","magnitude","normalize","d","average","add","scale","size","sub","addEqual","subEqual","scaleEqual","cross","perpendicular","normal","negate","toAngle","atan2","rotate","anchor","sinAngle","cosAngle","clone","One","Half","Ray","pos","dir","intersect","line","numerator","begin","getSlope","divisor","t","u","getLength","getPoint","time","Line","end","defineProperty","get","enumerable","configurable","slope","distanceToPoint","point","x0","y0","l","dy","dx","findPoint","m","b","intercept","hasPoint","currPoint","threshold","dxc","dyc","dx1","dy1","Projection","overlaps","projection","getOverlap","Algebra_GlobalCoordinates","GlobalCoordinates","worldPos","pagePos","screenPos","fromPagePosition","xOrPos","yOrEngine","engineOrUndefined","pageX","pageY","engine","screenX","canvas","screenY","screenToWorldCoordinates","Box","RigidBody","Naive","DynamicAABBTree","Euler","extendStatics","LogLevel","Physics_Physics","Physics","useBoxPhysics","collisionResolutionStrategy","useRigidBodyPhysics","acc","enabled","collisionPasses","broadphaseStrategy","broadphaseDebug","showCollisionNormals","showMotionVectors","showBounds","showArea","showContacts","showNormals","defaultMass","integrator","integrationSteps","allowRigidBodyRotation","collisionShift","dynamicTreeVelocityMultiplyer","boundsPadding","surfaceEpsilon","checkForFastBodies","disableMinimumSpeedForFastBody","__extends","setPrototypeOf","__proto__","__","constructor","create","GameEvent","bubbles","_path","_name","stopPropagation","action","actor","eventPath","_onActionStart","eventDispatcher","emit","_onActionEnd","propagate","layPath","actorPath","getAncestors","_actor","KillEvent","_super","target","PreKillEvent","PostKillEvent","GameStartEvent","GameStopEvent","PreDrawEvent","ctx","delta","PostDrawEvent","PreDebugDrawEvent","PostDebugDrawEvent","PreUpdateEvent","PostUpdateEvent","PreFrameEvent","prevStats","PostFrameEvent","stats","GamepadConnectEvent","gamepad","GamepadDisconnectEvent","GamepadButtonEvent","button","GamepadAxisEvent","axis","SubscribeEvent","topic","handler","UnsubscribeEvent","VisibleEvent","HiddenEvent","PreCollisionEvent","other","intersection","PostCollisionEvent","CollisionStartEvent","pair","CollisionEndEvent","InitializeEvent","ActivateEvent","oldScene","DeactivateEvent","newScene","ExitViewPortEvent","EnterViewPortEvent","EnterTriggerEvent","ExitTriggerEvent","EventDispatcher_EventDispatcher","EventDispatcher","_handlers","_wiredEventDispatchers","_target","eventName","event","toLowerCase","len","on","off","eventHandlers","once","ev","wire","unwire","Class_Class","Class","eventObject","methods","child","apply","Super","Color","r","g","a","fromRGB","fromHex","hex","match","parseInt","fromHSL","h","HSLColor","toRGBA","lighten","factor","temp","fromRGBA","darken","saturate","desaturate","mulitiply","color","screen","color1","invert","color2","format","toHSLA","toHex","_componentToHex","c","String","toFixed","fillStyle","Black","White","Gray","LightGray","DarkGray","Yellow","Orange","Red","Vermillion","Rose","Magenta","Violet","Blue","Azure","Cyan","Viridian","Green","Chartreuse","Transparent","hue2rgb","q","CollisionContact_CollisionContact","CollisionContact","bodyA","bodyB","mtv","strategy","_resolveRigidBodyCollision","_resolveBoxCollision","_applyBoxImpulse","collisionType","CollisionType","Active","Passive","velX","vel","Fixed","velY","body","invMassA","mass","invMassB","invMoiA","moi","invMoiB","coefRestitution","restitution","coefFriction","friction","tangent","ra","getCenter","rb","rv","rx","rvNormal","rvTangent","raTangent","raNormal","rbTangent","rbNormal","impulse","addMtv","jt","frictionImpulse","CollisionJumpTable","CollideCircleCircle","circleA","circleB","radius","circleAPos","circleBPos","axisOfCollision","mvt","pointOfCollision","getFurthestPoint","CollideCirclePolygon","circle","polygon","minAxis","testSeparatingAxisTheorem","verts","point1","point2","CollideCircleEdge","edge","cc","da","dda","db","ddb","den","pointOnEdge","dd","n","CollideEdgeEdge","CollidePolygonEdge","edgeNormal","getClosestFace","face","pc","linePoly","PolygonArea_PolygonArea","points","CollidePolygonPolygon","polyA","polyB","pointA","pointB","contact","CircleArea_CircleArea","CircleArea","options","rayCast","ray","orig","discriminant","toi","toi1","toi2","mintoi","collide","area","EdgeArea_EdgeArea","getBounds","BoundingBox_BoundingBox","getAxes","getMomentOfInertia","axes","closestPointOnPoly","minOverlap","minIndex","proj1","project","proj2","overlap","recalc","scalars","dotProduct","debugDraw","rotation","beginPath","strokeStyle","arc","closePath","stroke","moveTo","lineTo","EdgeArea","_getBodyPos","bodyPos","_getTransformedBegin","_getTransformedEnd","transformedBegin","transformedEnd","PolygonArea","_transformedPoints","_axes","_sides","winding","clockwiseWinding","reverse","_calculateTransformation","getTransformedPoints","getSides","lines","testRay","reduce","accum","pts","furthestPoint","maxDistance","sides","POSITIVE_INFINITY","faceIndex","dist","minX","prev","curr","maxX","minY","maxY","denominator","iplusone","crossTerm","minContactTime","contactIndex","contactTime","poly2","concat","scalar","firstPoint","BoundingBox","left","top","right","bottom","fromPoints","getWidth","getHeight","getPoints","getPerimeter","results","toPolygon","farClipDistance","tmin","tmax","xinv","yinv","tx1","tx2","ty1","ty2","rayCastTime","combine","collides","collidable","totalBoundingBox","overlapX","overlapY","strokeRect","Debug","Info","Warn","Fatal","Logger","_appenders","defaultLevel","_instance","addAppender","ConsoleAppender","getInstance","appender","clearAppenders","_log","level","args","log","debug","info","warn","fatal","console","consoleArgs","unshift","ScreenAppender","width","height","_messages","_canvas","document","createElement","window","innerWidth","innerHeight","style","position","_ctx","getContext","appendChild","message","clearRect","opacity","fillText","Resource_extends","Resource_Resource","Resource","path","responseType","bustCache","data","logger","onprogress","oncomplete","onerror","isLoaded","wireEngine","_engine","_cacheBust","uri","test","_start","load","complete","request","XMLHttpRequest","open","onloadstart","onload","status","response","processData","send","getData","setData","URL","createObjectURL","Grayscale","updatePixel","imageData","firstPixel","pixel","avg","Invert","Opacity","Colorize","SpriteEffects_Lighten","Lighten","SpriteEffects_Darken","Darken","SpriteEffects_Saturate","Saturate","SpriteEffects_Desaturate","Desaturate","Fill","Configurable_extends","Configurable","base","class_1","filter","props","k","RotationType","Sprite_extends","Sprite","imageOrConfig","SpriteImpl","flipVertical","flipHorizontal","effects","_spriteCanvas","_spriteCtx","_pixelData","_pixelsLoaded","_dirtyEffect","image","Texture_Texture","drawWidth","drawHeight","_texture","loaded","naturalWidth","naturalHeight","_loadPixels","drawImage","addEffect","grayscale","fill","colorize","effect","_applyEffects","removeEffect","param","indexToRemove","getImageData","putImageData","clearEffects","reset","save","translate","xpoint","ypoint","restore","draw","Texture_extends","Texture","_isLoaded","_sprite","Image","addEventListener","src","asSprite","ShortestPath","LongestPath","Clockwise","CounterClockwise","Action_EaseTo","EaseTo","duration","easingFcn","_currentLerpTime","_lerpDuration","_lerpStart","_lerpEnd","_initialized","_stopped","_distance","_initialize","update","newX","newY","isComplete","stop","Action_MoveTo","MoveTo","destx","desty","speed","_started","_end","_speed","_delta","_dir","Action_MoveBy","MoveBy","_time","Action_Follow","Follow","actorToFollow","followDistance","_actorToFollow","_current","_maximumDistance","_distanceBetween","actorToFollowSpeed","Action_Meet","Meet","actorToMeet","_speedWasSpecified","_actorToMeet","actorToMeetSpeed","Action_RotateTo","RotateTo","angleRadians","rotationType","_rotationType","distance1","distance2","_shortDistance","_longDistance","_shortestPathIsPositive","_direction","distanceTravelled","Action_RotateBy","RotateBy","ScaleTo","scaleX","scaleY","speedX","speedY","_endX","_endY","_speedX","_speedY","_startX","_startY","_distanceX","_distanceY","sx","directionX","sy","directionY","ScaleBy","Delay","delay","_elapsedTime","_delay","Blink","timeVisible","timeNotVisible","numBlinks","_timeVisible","_timeNotVisible","_totalTime","_duration","visible","Action_Fade","Fade","endOpacity","_multiplier","_endOpacity","Die","actionQueue","clearActions","kill","CallMethod","method","_method","_hasBeenCalled","Repeat","repeat","actions","_actionQueue","ActionQueue","_repeat","_originalRepeat","hasNext","RepeatForever","_actions","_completedActions","_currentAction","getActions","shift","EasingFunctions_EasingFunctions","EasingFunctions","CreateReversableEasingFunction","easing","start","CreateVectorEasingFunction","Linear","currentTime","startValue","endValue","EaseInQuad","EaseOutQuad","EaseInOutQuad","EaseInCubic","EaseOutCubic","EaseInOutCubic","ActionContext_ActionContext","ActionContext","_actors","_queues","addActorToContext","removeActorFromContext","easeTo","moveBy","rotateTo","rotateBy","scaleTo","sizeX","sizeY","scaleBy","blink","fade","die","callMethod","times","repeatForever","follow","meet","asPromise","x1","y1","x2","y2","thickness","cap","lineWidth","lineCap","DrawUtil_point","origin","roundRect","br","tl","tr","bl","defaultRadius","quadraticCurveTo","DrawUtil_circle","Pair_Pair","Pair","id","collision","calculatePairHash","actorA","actorB","PreventCollision","isKilled","collisionArea","Body_Body","Body","oldPos","oldVel","torque","motion","_totalMtv","applyMtv","getRelativeBounds","isGeometryDirty","getRelativeGeometry","useBoxCollision","center","usePolygonCollision","useCircleCollision","useEdgeCollision","touching","CapturePointer","enableCapturePointer","input","pointers","revisePointerEventsPaths","EulerMovement_EulerMovement","EulerMovement","seconds","totalAcc","CullingBox_CullingBox","CullingBox","_topLeft","_topRight","_bottomLeft","_bottomRight","isSpriteOffScreen","drawingWidth","currentDrawing","drawingHeight","getWorldPos","topLeftScreen","worldToScreenCoordinates","topRightScreen","bottomLeftScreen","bottomRightScreen","_xCoords","_yCoords","_xMin","_yMin","_xMax","_yMax","minWorld","maxWorld","_xMinWorld","_yMinWorld","_xMaxWorld","_yMaxWorld","boundingPoints","clientWidth","clientHeight","rect","OffscreenCulling_OffscreenCulling","OffscreenCulling","cullingBox","globalScale","getGlobalScale","cameraPos","currentScene","camera","actorScreenCoords","cameraScreenCoords","zoom","scene","getZoom","isOffScreen","halfDrawWidth","halfDrawHeight","TileMapCollisionDetection_TileMapCollisionDetection","TileMapCollisionDetection","tileMaps","j","intersectMap","getSideFromIntersect","Actor_extends","Actor","xOrConfig","ActorImpl","maxId","oldAcc","_height","_width","oldScale","previousOpacity","children","collisionGroups","_geometryDirty","_collisionHandlers","_isInitialized","frames","_effectsDirty","traits","capturePointer","captureMoveEvents","captureDragEvents","_zIndex","_isKilled","_opacityFx","_capturePointerEvents","_captureMoveEvents","_captureDragEvents","config","_initDefaults","set","theX","theY","thePos","theVel","theAcc","theAngle","angularVelocity","theTorque","theMass","theMoi","theFriction","theRestitution","_color","onInitialize","isInitialized","defaults","_checkForPointerOptIn","normalized","_prekill","_scene","onPreKill","_postkill","onPostKill","unkill","setDrawing","key","addDrawing","getZIndex","newZ","setZIndex","newIndex","cleanupDrawTree","updateDrawTree","addCollisionGroup","name","removeCollisionGroup","setWidth","setHeight","getLeft","getRight","getTop","getBottom","getWorldRotation","parents","root","reduceRight","px","py","parentScale","rotated","_getCalculatedAnchor","bb","getGeometry","recurse","containment","some","collidesWithSide","separationVector","bounds","otherBounds","onCollidesWith","group","getCollisionHandlers","removeCollidesWith","within","_reapplyEffects","drawing","integrate","_preupdate","_postupdate","onPreUpdate","onPostUpdate","_predraw","offsetX","offsetY","fillRect","_postdraw","onPreDraw","onPostDraw","ticks","0 Pi","Pi/2","Pi","3/2 Pi","oldFont","font","tick","textAlign","currentActor","Axis","UIActor_extends","UIActor_UIActor","UIActor","useWorld","coords","Timer","fcn","interval","repeats","numberOfRepeats","maxNumberOfRepeats","_totalTimeAlive","_paused","_numberOfTicks","newInterval","newNumberOfRepeats","getTimeRunning","pause","unpause","cancel","cancelTimer","TileMap_extends","TileMap","cellWidth","cellHeight","rows","cols","TileMapImpl","cd","_collidingX","_collidingY","_onScreenXStart","_onScreenXEnd","_onScreenYStart","_onScreenYEnd","_spriteSheets","Cell","registerSpriteSheet","spriteSheet","actorBounds","cell","getCellByPoint","solid","getCellByIndex","getCell","worldCoordsUpperLeft","worldCoordsLowerRight","cs","csi","cslen","xEnd","yEnd","sprites","spriteId","ss","spriteSheetKey","sprite","getSprite","TileSprite","CellImpl","_bounds","pushSprite","tileSprite","removeSprite","clearSprites","AudioContextFactory","_INSTANCE","AudioContext","webkitAudioContext","WebAudio_WebAudio","WebAudio","unlock","_unlocked","audioContext","buffer","createBuffer","source","createBufferSource","ended","connect","destination","onended","noteOn","setTimeout","playbackState","legacySource","PLAYING_STATE","FINISHED_STATE","isUnlocked","Loader_extends","Loader_Loader","Loader","loadables","_resourceList","_resourceCount","_numLoaded","_progressCounts","_totalCounts","logo","logoWidth","logoHeight","backgroundColor","addResources","_imageElement","addResource","loadable","me","progressArray","progressChunks","progressResult","loadNext","list","canvasHeight","devicePixelRatio","canvasWidth","imageHeight","oldAntialias","getAntialiasing","setAntialiasing","_image","progressWidth","margin","Loader_PauseAfterLoader","PauseAfterLoader","triggerElementId","_handleOnTrigger","_waitPromise","_loadedValue","_playTrigger","display","getElementById","REPORTED_FEATURES","webgl","webaudio","gamepadapi","Detector_Detector","Detector","_features","failedTests","_criticalTests","canvasSupport","elem","arrayBufferSupport","xhr","dataUrlSupport","toDataURL","objectUrlSupport","rgbaSupport","cssText","_warningTest","webAudioSupport","mozAudioContext","msAudioContext","oAudioContext","webglSupport","_loadBrowserFeatures","getBrowserFeatures","logBrowserFeatures","msg","supported","keys","feature","arraybuffer","dataurl","objecturl","rgba","navigator","getGamepads","failedCritical","warning","DynamicTree_TreeNode","TreeNode","isLeaf","DynamicTree_DynamicTree","DynamicTree","worldBounds","nodes","_insert","leaf","leafAABB","currentRoot","oldArea","combinedArea","cost","inheritanceCost","leftCost","leftCombined","rightCost","rightCombined","oldParent","newParent","currentNode","_balance","_remove","sibling","grandParent","trackBody","node","updateBody","untrackBody","multdx","multdy","f","balance","query","callback","helper","rayCastQuery","getNodes","DynamicTreeCollisionBroadphase_DynamicTreeCollisionBroadphase","DynamicTreeCollisionBroadphase","_dynamicCollisionTree","_collisionHash","_collisionPairCache","_lastFramePairs","_lastFramePairsHash","track","untrack","_canCollide","hash","broadphase","targets","potentialColliders","physics","pairs","potentialColliders_1","updateDistance","minDimension","fastBodies","minBody","updateVec","centerPoint","minTranslate","hitPoint","fastBodyCollisions","narrowphase","collisions","collidersHash","pairs_1","canCollide","runCollisionStartEnd","currentFrameHash","pairs_2","actor1","actor2","updated","SortedList","getComparable","_getComparable","find","_find","_root","getKey","_get","BinaryTreeNode","setLeft","setRight","removeByComparable","elementIndex","_findMinNode","setKey","_cleanup","comparable","current","_list","treeNode","_key","_data","_left","_right","MockedElement","getTheKey","Group_extends","Group_Group","Group","_logger","_members","groups","actorOrActors","getMembers","move","members","getRandomMember","Camera_extends","StrategyContainer","lockToActor","addStrategy","LockCameraToActorStrategy","lockToActorAxis","Camera_LockCameraToActorAxisStrategy","elasticToActor","cameraElasticity","cameraFriction","Camera_ElasticToActorStrategy","radiusAroundActor","RadiusAroundActorStrategy","X","Y","FontUnit","TextAlign","BaseAlign","FontStyle","_cam","_eng","cam","currentFocus","getFocus","focus","cameraVel","stretch","offset","Camera_BaseCamera","BaseCamera","_cameraStrategies","z","dz","ax","ay","az","_x","_y","_cameraMoving","_isShaking","_shakeMagnitudeX","_shakeMagnitudeY","_shakeDuration","_elapsedShakeTime","_xShake","_yShake","_isZooming","_zoomStart","_zoomEnd","_currentZoomTime","_zoomDuration","_zoomEasing","_easing","_follow","easingFn","_lerpPromise","shake","magnitudeX","magnitudeY","_zoomPromise","cameraStrategy","removeStrategy","clearAllStrategies","newZoom","lerpPoint","_isDoneShaking","pixelRatio","newCanvasWidth","newCanvasHeight","Label_extends","Em","Rem","Px","Pt","Percent","Center","Start","End","Hanging","Middle","Alphabetic","Ideographic","Normal","Italic","Oblique","Label","textOrConfig","fontFamily","spriteFont","LabelImpl","bold","fontSize","fontStyle","fontUnit","baseAlign","letterSpacing","caseInsensitive","text","_textShadowOn","_shadowOffsetX","_shadowOffsetY","getTextWidth","_fontString","measureText","_lookupFontUnit","_lookupTextAlign","_lookupBaseAlign","_lookupFontStyle","boldstring","setTextShadow","shadowColor","useTextShadow","clearTextShadow","_fontDraw","oldAlign","oldTextBaseline","textBaseline","maxWidth","Trigger_extends","triggerDefaults","Trigger_Trigger","Trigger","opts","evt","_dispatchAction","wp","isUIActor","Buttons","Axes","Scene_extends","Scene_Scene","Scene","actors","triggers","uiActors","_sortedDrawingTree","_broadphase","_killQueue","_triggerKillQueue","_timers","_cancelQueue","onActivate","_oldScene","_newScene","onDeactivate","_initializeChildren","_activate","_deactivate","removeTimer","_collectActorStats","beforeBroadphase","currFrame","afterBroadphase","beforeNarrowphase","iter","collisionDelta","afterNarrowphase","killed","_processKillQueue","killQueue","collection","actorIndex","killQueue_1","sortedChildren","isDebug","entity","addUIActor","_addChild","addTimer","addTileMap","removeUIActor","_removeChild","removeTileMap","tileMap","timer","isTimerActive","createGroup","getGroup","removeGroup","isActorInDrawTree","isCurrentScene","ui","alive","_d","_e","FrameStats","prevFrame","_id","_fps","_actorStats","remaining","_durationStats","_physicsStats","PhysicsStats","otherStats","fps","fs","_pairs","_collisions","_collidersHash","_fastBodies","_fastBodyCollisions","_narrowphase","ps","colliders","Gamepad_extends","Gamepad_Gamepads","Gamepads","_gamePadTimeStamps","_oldPads","_pads","_initSuccess","_navigator","_minimumConfiguration","init","_clonePads","setMinimumGamepadConfiguration","_enableAndUpdate","_isGamepadValid","pad","axesLength","buttonLength","buttons","connected","gamepads","at","timestamp","bi","ai","navigatorGamepad","getButton","pressed","updateButton","updateAxes","_clonePad","Gamepad","getValidGamepads","pads","arr","clonedPad","MinAxisMoveThreshold","_buttons","isButtonPressed","buttonIndex","axesIndex","Face1","Face2","Face3","Face4","LeftBumper","RightBumper","LeftTrigger","RightTrigger","Select","LeftStick","RightStick","DpadUp","DpadDown","DpadLeft","DpadRight","LeftStickX","LeftStickY","RightStickX","RightStickY","PointerType","PointerButton","WheelDeltaMode","PointerScope","Pointer_extends","Touch","Mouse","Pen","Unknown","Pixel","Page","Canvas","Document","PointerEvent","coordinates","pointer","pointerType","isActorUnderPointer","PointerEventFactory","_pointerEventType","PointerDragEvent","PointerUpEvent","isDragEnd","PointerDownEvent","isDragStart","PointerMoveEvent","hasActorsUnderPointer","getActorsUnderPointer","_onActorLeave","isDragging","dragTarget","hasActorUnderPointerInList","_onActorEnter","pe","createPointerEventByName","addActorUnderPointer","removeActorUnderPointer","PointerEnterEvent","PointerLeaveEvent","PointerCancelEvent","WheelEvent","deltaX","deltaY","deltaZ","deltaMode","factory","Keys","Pointer_Pointers","Pointers","_pointerDown","_pointerUp","_pointerMove","_pointerCancel","_wheel","_pointers","_activePointers","Pointer_Pointer","primary","_handleTouchEvent","touchAction","_handlePointerEvent","MSPointerEvent","msTouchAction","_handleMouseEvent","_handleWheelEvent","onmousewheel","_propagatePointerEvent","_propagateWheelEvent","_revisePointerEventPath","_validateWheelEventPath","wheelEvent","isNotUIActor","_propagateWheelPointerEvent","eventArr","preventDefault","changedTouches","_getPointerIndex","identifier","pointerId","_stringToPointerType","pageScrollPreventionMode","ScrollPreventionMode","All","transformedPoint","wheelDeltaX","wheelDeltaY","wheelDelta","detail","we","idx","Pointer","_isDown","_wasDown","_actorsUnderPointer","lastPagePos","lastScreenPos","lastWorldPos","_onPointerMove","_onPointerDown","_onPointerUp","Keyboard_extends","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","Num0","Numlock","Semicolon","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","Z","Shift","Alt","Space","Esc","DisplayMode","KeyEvent","Keyboard","_keys","_keysUp","_keysDown","global","code","_normalizeKeyCode","keyCode","keyEvent","getKeys","wasPressed","isHeld","wasReleased","Engine_extends","FullScreen","Container","Position","EmitterType","Engine_Engine","Engine","_hasStarted","postProcessors","scenes","_animations","isFullscreen","displayMode","_suppressHiDPIScaling","pauseAudioWhenHidden","debugColor","onFatalException","_isSmoothingEnabled","_timescale","_isLoading","_DefaultEngineOptions","detector","suppressMinimumBrowserFeatureDetection","_compatible","innerText","testMessage","canvasElementId","parentElement","removeChild","suppressConsoleBootMessage","EX_VERSION","_loader","rootScene","addScene","goToScene","getWorldBounds","playAnimation","animation","AnimationNode","removeScene","_setHeightByDisplayMode","overflow","hidden","visibilityChange","_intializeDisplayModePosition","keyboard","pointerScope","scrollPreventionMode","suppressHiDPIScaling","_initializeHiDpi","specifiedPosition","split","marginTop","marginLeft","isHiDpi","oldWidth","oldHeight","isSmooth","imageSmoothingEnabled","smoothing","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","_overrideInitialize","_update","isDone","_draw","process","loader","loadingComplete","createMainLoop","requestAnimationFrame","game","raf","nowFn","lastTime","mainloop","_requestId","elapsed","timescale","frameId","beforeUpdate","afterUpdate","afterDraw","cancelAnimationFrame","isPaused","screenshot","raw","MediaEvents_extends","MediaEvent","_val","NativeSoundEvent","Particles_extends","Circle","Rectangle","Particle","emitterOrConfig","life","beginColor","endColor","velocity","acceleration","startSize","endSize","ParticleImpl","particleRotationalVelocity","currentRotation","focusAccel","fadeFlag","_rRate","_gRate","_bRate","_aRate","_currentColor","emitter","particleSize","particleSprite","sizeRate","elapsedMultiplier","ParticleEmitter","removeParticle","accel","Vt","ParticleEmitterImpl","numParticles","isEmitting","particles","deadParticles","minVel","maxVel","minAngle","maxAngle","emitRate","particleLife","minSize","maxSize","emitterType","randomRotation","_particlesToEmit","particle","emitParticles","particleCount","_createParticle","clearParticles","ranX","ranY","Internal","Actions","Action_namespaceObject","NaiveCollisionBroadphase_NaiveCollisionBroadphase","NaiveCollisionBroadphase","collisionPairs","minimumTranslationVector","cp","Animation_extends","Animation","engineOrConfig","images","loop","AnimationImpl","currentFrame","_oldTime","freezeFrame","_setAnchor","_setRotation","_setScale","_updateValues","skip","currSprite","play","Polygon_Polygon","Polygon","filled","_points","fillColor","lineColor","SpriteSheet_extends","SpriteSheet","imageOrConfigOrSprites","columns","spWidth","spHeight","SpriteSheetImpl","loadFromImage","getAnimationByIndices","indices","getAnimationBetween","beginIndex","endIndex","getAnimationForAll","getAnimationByCoords","spriteCoordinates","maxHeight","coord","anim","SpriteFont","alphabet","SpriteFontImpl","_currentOpacity","_sprites","_textShadowDirty","_textShadowColor","_textShadowSprites","_alphabet","_caseInsensitive","getTextSprites","lookup","char","character","_parseOptions","characterShadow","currX","currY","charSprite","ExResponse","type","any","blob","json","_lerp","_fade","ColorBlindness","PerlinNoise_PerlinGenerator","PerlinGenerator","_perm","_p","Uint8Array","_defaultPerlinOptions","octaves","frequency","amplitude","persistance","_random","noise","amp","freq","maxValue","_noise1d","_noise2d","_noise3d","sequence","step","grid","_gradient3d","_gradient2d","_gradient1d","intX","intY","fadeX","fadeY","intZ","fadeZ","aa","ba","ab","PerlinNoise_PerlinDrawer2D","PerlinDrawer2D","generator","colorFcn","Protanope","Deuteranope","Tritanope","ColorBlindCorrector_ColorBlindCorrector","ColorBlindCorrector","simulate","colorMode","_vertexShader","_fragmentShader","_internalCanvas","_gl","preserveDrawingBuffer","_program","createProgram","fragmentShader","_getShader","_getFragmentShaderByMode","vertextShader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","replace","_setRectangle","bufferData","ARRAY_BUFFER","Float32Array","STATIC_DRAW","program","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","out","positionLocation","getAttribLocation","texCoordLocation","texCoordBuffer","bindBuffer","enableVertexAttribArray","vertexAttribPointer","FLOAT","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","resolutionLocation","getUniformLocation","uniform2f","positionBuffer","drawArrays","TRIANGLES","pixelData","readPixels","AudioInstance_extends","AudioInstanceFactory","AudioInstance_AudioTagInstance","AudioBuffer","AudioInstance_WebAudioInstance","AudioInstance_AudioInstance","AudioInstance","_src","_volume","_loop","_isPlaying","_isPaused","_wireUpOnEnded","isPlaying","_resumePlayBack","_startPlayBack","_playingPromise","_handleOnEnded","AudioTagInstance","Audio","volume","WebAudioInstance","_audioContext","_volumeNode","createGain","_currentOffset","_createNewBufferSource","gain","setTargetAtTime","playbackRate","_setPauseOffset","_rememberStartTime","_playbackRate","restartTime","amend","_startTime","getTime","setValueAtTime","En","canPlayFile","file","canPlayType","Sound_extends","Sound_Sound","Sound","paths","_tracks","_wasPlayingOnHidden","_processedData","_detectResponseType","paths_1","instanceCount","_resumePlayback","_startPlayback","ArrayBuffer","_processArrayBufferData","_processBlobData","processedData","_setProcessedData","getTrackId","resumed","newTrack","_createNewTrack","playPromise","resolved","decodeAudioData","aiPromise","_getTrackInstance","Ft","obsolete","alternateMethod","property","descriptor","SyntaxError","__webpack_require__","__webpack_exports__","SpriteEffects_namespaceObject","Events_namespaceObject","Input_Index_namespaceObject","Index_namespaceObject","Util_Index_namespaceObject"],"mappings":"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AA8S,GAAAx4C,KAAAqd,EAAAqoB,UACA4X,0BAAAjgC,EAAAigC,UAAA7E,GAAA14C,OAAAsd,EAAAigC,UACAuB,SAAAxhC,EAAAwhC,WAAA,EACAl4B,QAAAtJ,EAAAsJ,SAAA,IAGAs3C,EAnKA,CAoKApB,MCrVAqC,GAAA,WACA,SAAAA,KAUA,OARAA,EAAAC,MACAC,IAAA,GACAC,KAAA,OACAC,KAAA,OACA7hB,KAAA,OACA13B,SAAA,WACCgqB,YAAA,eAEDmvB,EAXA,GCGA,SAAAK,GAAAj2D,EAAAgL,EAAA/J,GACA,OAAA+J,EAAAhL,GAAAiB,EAAA+J,GAEA,SAAAkrD,GAAAt2D,GACA,OAAAA,UAAA,EAAAA,EAAA,QAMA,ICZAu2D,GDYAC,GAAA,WACA,SAAAC,EAAAtiD,GACAtjB,KAAA6lE,OACA,IACA,IACA,IACA,GACA,GACA,GACA,IACA,GACA,IACA,GACA,GACA,GACA,IACA,IACA,EACA,IACA,IACA,GACA,IACA,GACA,GACA,IACA,EACA,GACA,GACA,IACA,GACA,GACA,GACA,IACA,EACA,IACA,IACA,IACA,IACA,GACA,EACA,GACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,GACA,IACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,EACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,EACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,KAEA7lE,KAAA8lE,GAAA,IAAAC,WAAA,KACA/lE,KAAAgmE,uBACAC,QAAA,EACAC,UAAA,EACAC,UAAkB,EAClBC,YAAA,IAEA9iD,EAAAjd,KAAArG,KAAAgmE,sBAAA1iD,GACAtjB,KAAAomE,YAAA9iD,EAAA8iD,YACApmE,KAAAmmE,UAAA7iD,EAAA6iD,UACAnmE,KAAAkmE,UAAA5iD,EAA+B4iD,UAC/BlmE,KAAAimE,QAAA3iD,EAAA2iD,QACA3iD,EAAAhhB,KACAtC,KAAAqmE,QAAA,IAA+BhkE,EAAMihB,EAAAhhB,MAGrCtC,KAAAqmE,QAAuB,IAAAhkE,EAEvBrC,KAAA6lE,MAAA7lE,KAAAqmE,QAAAjhE,QAAApF,KAAA6lE,OACA,QAAAtiE,EAAA,EAAAA,EAAA,IAAAA,IACAvD,KAAA8lE,GAAAviE,GAAA,IAAAvD,KAAA6lE,MAAAtiE,EAAA,KA+GA,OA5GAqiE,EAAAnkE,UAAA6kE,MAAA,WAKA,IAJA,IAAAC,EAAAvmE,KAAAmmE,UACAK,EAAAxmE,KAAuBkmE,UACvBnlE,EAAA,EACA0lE,EAAA,EACAljE,EAAA,EAAAA,EAAAvD,KAAAimE,QAAA1iE,I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","file":"vendors~main.js","sourcesContent":["// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\r\n/**\r\n * Valid states for a promise to be in\r\n */\r\nexport var PromiseState;\r\n(function (PromiseState) {\r\n    PromiseState[PromiseState[\"Resolved\"] = 0] = \"Resolved\";\r\n    PromiseState[PromiseState[\"Rejected\"] = 1] = \"Rejected\";\r\n    PromiseState[PromiseState[\"Pending\"] = 2] = \"Pending\";\r\n})(PromiseState || (PromiseState = {}));\r\n/**\r\n * Promises are used to do asynchronous work and they are useful for\r\n * creating a chain of actions. In Excalibur they are used for loading,\r\n * sounds, animation, actions, and more.\r\n *\r\n * [[include:Promises.md]]\r\n */\r\nvar Promise = /** @class */ (function () {\r\n    function Promise() {\r\n        this._state = PromiseState.Pending;\r\n        this._successCallbacks = [];\r\n        this._rejectCallback = function () {\r\n            return;\r\n        };\r\n    }\r\n    /**\r\n     * Create and resolve a Promise with an optional value\r\n     * @param value  An optional value to wrap in a resolved promise\r\n     */\r\n    Promise.resolve = function (value) {\r\n        var promise = new Promise().resolve(value);\r\n        return promise;\r\n    };\r\n    /**\r\n     * Create and reject a Promise with an optional value\r\n     * @param value  An optional value to wrap in a rejected promise\r\n     */\r\n    Promise.reject = function (value) {\r\n        var promise = new Promise().reject(value);\r\n        return promise;\r\n    };\r\n    Promise.join = function () {\r\n        var promises = [];\r\n        if (arguments.length > 0 && !Array.isArray(arguments[0])) {\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                promises[_i - 0] = arguments[_i];\r\n            }\r\n        }\r\n        else if (arguments.length === 1 && Array.isArray(arguments[0])) {\r\n            promises = arguments[0];\r\n        }\r\n        var joinedPromise = new Promise();\r\n        if (!promises || !promises.length) {\r\n            return joinedPromise.resolve();\r\n        }\r\n        var total = promises.length;\r\n        var successes = 0;\r\n        var rejects = 0;\r\n        var errors = [];\r\n        promises.forEach(function (p) {\r\n            p.then(function () {\r\n                successes += 1;\r\n                if (successes === total) {\r\n                    joinedPromise.resolve();\r\n                }\r\n                else if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }, function () {\r\n                rejects += 1;\r\n                if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }).error(function (e) {\r\n                errors.push(e);\r\n                if (errors.length + successes + rejects === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            });\r\n        });\r\n        return joinedPromise;\r\n    };\r\n    /**\r\n     * Chain success and reject callbacks after the promise is resolved\r\n     * @param successCallback  Call on resolution of promise\r\n     * @param rejectCallback   Call on rejection of promise\r\n     */\r\n    Promise.prototype.then = function (successCallback, rejectCallback) {\r\n        if (successCallback) {\r\n            this._successCallbacks.push(successCallback);\r\n            // If the promise is already resovled call immediately\r\n            if (this.state() === PromiseState.Resolved) {\r\n                try {\r\n                    successCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        if (rejectCallback) {\r\n            this._rejectCallback = rejectCallback;\r\n            // If the promise is already rejected call immediately\r\n            if (this.state() === PromiseState.Rejected) {\r\n                try {\r\n                    rejectCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Add an error callback to the promise\r\n     * @param errorCallback  Call if there was an error in a callback\r\n     */\r\n    Promise.prototype.error = function (errorCallback) {\r\n        if (errorCallback) {\r\n            this._errorCallback = errorCallback;\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Resolve the promise and pass an option value to the success callbacks\r\n     * @param value  Value to pass to the success callbacks\r\n     */\r\n    Promise.prototype.resolve = function (value) {\r\n        var _this = this;\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Resolved;\r\n                this._successCallbacks.forEach(function (cb) {\r\n                    cb.call(_this, _this._value);\r\n                });\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot resolve a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Reject the promise and pass an option value to the reject callbacks\r\n     * @param value  Value to pass to the reject callbacks\r\n     */\r\n    Promise.prototype.reject = function (value) {\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Rejected;\r\n                this._rejectCallback.call(this, this._value);\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot reject a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Inspect the current state of a promise\r\n     */\r\n    Promise.prototype.state = function () {\r\n        return this._state;\r\n    };\r\n    Promise.prototype._handleError = function (e) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback.call(this, e);\r\n        }\r\n        else {\r\n            // rethrow error\r\n            throw e;\r\n        }\r\n    };\r\n    return Promise;\r\n}());\r\nexport { Promise };\r\n//# sourceMappingURL=Promises.js.map","/**\r\n * An enum that describes the sides of an Actor for collision\r\n */\r\nexport var Side;\r\n(function (Side) {\r\n    Side[Side[\"None\"] = 0] = \"None\";\r\n    Side[Side[\"Top\"] = 1] = \"Top\";\r\n    Side[Side[\"Bottom\"] = 2] = \"Bottom\";\r\n    Side[Side[\"Left\"] = 3] = \"Left\";\r\n    Side[Side[\"Right\"] = 4] = \"Right\";\r\n})(Side || (Side = {}));\r\n//# sourceMappingURL=Side.js.map","/**\r\n * Pseudo-Random Utility\r\n *\r\n * A pseudo-random utility to add seeded random support for help in\r\n * generating things like terrain or reproducible randomness. Uses the\r\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\r\n *\r\n * [[include:Random.md]]\r\n */\r\n/**\r\n * 32-bit mask\r\n */\r\nvar BITMASK32 = 0xffffffff;\r\n/**\r\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\r\n * of numbers each time it is called.\r\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\r\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\r\n *\r\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\r\n */\r\nvar Random = /** @class */ (function () {\r\n    /**\r\n     * If no seed is specified, the Date.now() is used\r\n     */\r\n    function Random(seed) {\r\n        this.seed = seed;\r\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\r\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\r\n        this._upperMask = 0x80000000; // 34 high bits\r\n        // Word size, 64 bits\r\n        this._w = 32;\r\n        // Degree of recurrance\r\n        this._n = 624;\r\n        // Middle word, an offset used in the recurrance defining the series x, 1<=m<n\r\n        this._m = 397;\r\n        // coefficients of teh rational normal form twist matrix\r\n        this._a = 0x9908b0df;\r\n        // tempering bit shifts and masks\r\n        this._u = 11;\r\n        this._s = 7;\r\n        this._b = 0x9d2c5680;\r\n        this._t = 15;\r\n        this._c = 0xefc60000;\r\n        this._l = 18;\r\n        this._f = 1812433253;\r\n        this._mt = new Array(this._n);\r\n        // need to mask to support higher bit machines\r\n        this._mt[0] = (seed || Date.now()) >>> 0;\r\n        for (var i = 1; i < this._n; i++) {\r\n            var s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\r\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\r\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\r\n        }\r\n        this._index = this._n;\r\n    }\r\n    /**\r\n     * Apply the twist\r\n     */\r\n    Random.prototype._twist = function () {\r\n        var mag01 = [0x0, this._a];\r\n        var y = 0;\r\n        for (var i = 0; i < this._n - this._m; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        for (; i < this._n - 1; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\r\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        this._index = 0;\r\n    };\r\n    /**\r\n     * Return next 32 bit integer number in sequence\r\n     */\r\n    Random.prototype.nextInt = function () {\r\n        if (this._index >= this._n) {\r\n            this._twist();\r\n        }\r\n        var y = this._mt[this._index++];\r\n        y ^= y >>> this._u;\r\n        y ^= (y << this._s) & this._b;\r\n        y ^= (y << this._t) & this._c;\r\n        y ^= y >>> this._l;\r\n        return y >>> 0;\r\n    };\r\n    /**\r\n     * Return a random floating point number between [0, 1)\r\n     */\r\n    Random.prototype.next = function () {\r\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\r\n    };\r\n    /**\r\n     * Return a random floating point in range [min, max) min is included, max is not included\r\n     */\r\n    Random.prototype.floating = function (min, max) {\r\n        return (max - min) * this.next() + min;\r\n    };\r\n    /**\r\n     * Return a random integer in range [min, max] min is included, max is included.\r\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\r\n     */\r\n    Random.prototype.integer = function (min, max) {\r\n        return Math.floor((max - min + 1) * this.next() + min);\r\n    };\r\n    /**\r\n     * Returns true or false randomly with 50/50 odds by default.\r\n     * By default the likelihood of returning a true is .5 (50%).\r\n     * @param likelihood takes values between [0, 1]\r\n     */\r\n    Random.prototype.bool = function (likelihood) {\r\n        if (likelihood === void 0) { likelihood = 0.5; }\r\n        return this.next() <= likelihood;\r\n    };\r\n    /**\r\n     * Returns one element from an array at random\r\n     */\r\n    Random.prototype.pickOne = function (array) {\r\n        return array[this.integer(0, array.length - 1)];\r\n    };\r\n    /**\r\n     * Returns a new array random picking elements from the original\r\n     * @param array Original array to pick from\r\n     * @param numPicks can be any positive number\r\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\r\n     * just that it is possible)\r\n     */\r\n    Random.prototype.pickSet = function (array, numPicks, allowDuplicates) {\r\n        if (allowDuplicates === void 0) { allowDuplicates = false; }\r\n        if (allowDuplicates) {\r\n            return this._pickSetWithDuplicates(array, numPicks);\r\n        }\r\n        else {\r\n            return this._pickSetWithoutDuplicates(array, numPicks);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a new array randomly picking elements in the original (not reused)\r\n     * @param numPicks must be less than or equal to the number of elements in the array.\r\n     */\r\n    Random.prototype._pickSetWithoutDuplicates = function (array, numPicks) {\r\n        if (numPicks > array.length || numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\r\n        }\r\n        if (numPicks === array.length) {\r\n            return array;\r\n        }\r\n        var result = new Array(numPicks);\r\n        var currentPick = 0;\r\n        var tempArray = array.slice(0);\r\n        while (currentPick < numPicks) {\r\n            var index = this.integer(0, tempArray.length - 1);\r\n            result[currentPick++] = tempArray[index];\r\n            tempArray.splice(index, 1);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns a new array random picking elements from the original allowing duplicates\r\n     * @param numPicks can be any positive number\r\n     */\r\n    Random.prototype._pickSetWithDuplicates = function (array, numPicks) {\r\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\r\n        if (numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\r\n        }\r\n        var result = new Array(numPicks);\r\n        for (var i = 0; i < numPicks; i++) {\r\n            result[i] = this.pickOne(array);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\r\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\r\n     */\r\n    Random.prototype.shuffle = function (array) {\r\n        var tempArray = array.slice(0);\r\n        var swap = null;\r\n        for (var i = 0; i < tempArray.length - 2; i++) {\r\n            var randomIndex = this.integer(i, tempArray.length - 1);\r\n            swap = tempArray[i];\r\n            tempArray[i] = tempArray[randomIndex];\r\n            tempArray[randomIndex] = swap;\r\n        }\r\n        return tempArray;\r\n    };\r\n    /**\r\n     * Generate a list of random integer numbers\r\n     * @param length the length of the final array\r\n     * @param min the minimum integer number to generate inclusive\r\n     * @param max the maximum integer number to generate inclusive\r\n     */\r\n    Random.prototype.range = function (length, min, max) {\r\n        var result = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            result[i] = this.integer(min, max);\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns the result of a d4 dice roll\r\n     */\r\n    Random.prototype.d4 = function () {\r\n        return this.integer(1, 4);\r\n    };\r\n    /**\r\n     * Returns the result of a d6 dice roll\r\n     */\r\n    Random.prototype.d6 = function () {\r\n        return this.integer(1, 6);\r\n    };\r\n    /**\r\n     * Returns the result of a d8 dice roll\r\n     */\r\n    Random.prototype.d8 = function () {\r\n        return this.integer(1, 8);\r\n    };\r\n    /**\r\n     * Returns the result of a d10 dice roll\r\n     */\r\n    Random.prototype.d10 = function () {\r\n        return this.integer(1, 10);\r\n    };\r\n    /**\r\n     * Returns the result of a d12 dice roll\r\n     */\r\n    Random.prototype.d12 = function () {\r\n        return this.integer(1, 12);\r\n    };\r\n    /**\r\n     * Returns the result of a d20 dice roll\r\n     */\r\n    Random.prototype.d20 = function () {\r\n        return this.integer(1, 20);\r\n    };\r\n    return Random;\r\n}());\r\nexport { Random };\r\n//# sourceMappingURL=Random.js.map","import { Vector } from '../Algebra';\r\nimport { Random } from '../Math/Random';\r\nimport { Side } from '../Collision/Side';\r\n/**\r\n * Two PI constant\r\n */\r\nexport var TwoPI = Math.PI * 2;\r\n/**\r\n * Merges one or more objects into a single target object\r\n *\r\n * @returns Merged object with properties from other objects\r\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\r\n */\r\nexport function extend() {\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments.length;\r\n    // Check if a deep merge\r\n    if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\r\n        deep = arguments[0];\r\n        i++;\r\n    }\r\n    // Merge the object into the extended object\r\n    var assignExists = typeof Object.assign === 'function';\r\n    var merge = null;\r\n    if (!assignExists) {\r\n        merge = function (obj) {\r\n            for (var prop in obj) {\r\n                if (Object.prototype.hasOwnProperty.call(obj, prop)) {\r\n                    // If deep merge and property is an object, merge properties\r\n                    if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\r\n                        extended[prop] = extend(true, extended[prop], obj[prop]);\r\n                    }\r\n                    else {\r\n                        extended[prop] = obj[prop];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n    else {\r\n        merge = Object.assign;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = arguments[i];\r\n        if (!assignExists) {\r\n            merge(obj);\r\n        }\r\n        else {\r\n            merge(extended, obj);\r\n        }\r\n    }\r\n    return extended;\r\n}\r\nexport function base64Encode(inputStr) {\r\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n    var outputStr = '';\r\n    var i = 0;\r\n    while (i < inputStr.length) {\r\n        //all three \"& 0xff\" added below are there to fix a known bug\r\n        //with bytes returned by xhr.responseText\r\n        var byte1 = inputStr.charCodeAt(i++) & 0xff;\r\n        var byte2 = inputStr.charCodeAt(i++) & 0xff;\r\n        var byte3 = inputStr.charCodeAt(i++) & 0xff;\r\n        var enc1 = byte1 >> 2;\r\n        var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\r\n        var enc3, enc4;\r\n        if (isNaN(byte2)) {\r\n            enc3 = enc4 = 64;\r\n        }\r\n        else {\r\n            enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\r\n            if (isNaN(byte3)) {\r\n                enc4 = 64;\r\n            }\r\n            else {\r\n                enc4 = byte3 & 63;\r\n            }\r\n        }\r\n        outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\r\n    }\r\n    return outputStr;\r\n}\r\n/**\r\n * Clamps a value between a min and max inclusive\r\n */\r\nexport function clamp(val, min, max) {\r\n    return Math.min(Math.max(min, val), max);\r\n}\r\nexport function randomInRange(min, max, random) {\r\n    if (random === void 0) { random = new Random(); }\r\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\r\n}\r\nexport function randomIntInRange(min, max, random) {\r\n    if (random === void 0) { random = new Random(); }\r\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\r\n}\r\nexport function canonicalizeAngle(angle) {\r\n    var tmpAngle = angle;\r\n    if (angle > TwoPI) {\r\n        while (tmpAngle > TwoPI) {\r\n            tmpAngle -= TwoPI;\r\n        }\r\n    }\r\n    if (angle < 0) {\r\n        while (tmpAngle < 0) {\r\n            tmpAngle += TwoPI;\r\n        }\r\n    }\r\n    return tmpAngle;\r\n}\r\nexport function toDegrees(radians) {\r\n    return (180 / Math.PI) * radians;\r\n}\r\nexport function toRadians(degrees) {\r\n    return (degrees / 180) * Math.PI;\r\n}\r\nexport function getPosition(el) {\r\n    var oLeft = 0, oTop = 0;\r\n    var calcOffsetLeft = function (parent) {\r\n        oLeft += parent.offsetLeft;\r\n        if (parent.offsetParent) {\r\n            calcOffsetLeft(parent.offsetParent);\r\n        }\r\n    };\r\n    var calcOffsetTop = function (parent) {\r\n        oTop += parent.offsetTop;\r\n        if (parent.offsetParent) {\r\n            calcOffsetTop(parent.offsetParent);\r\n        }\r\n    };\r\n    calcOffsetLeft(el);\r\n    calcOffsetTop(el);\r\n    return new Vector(oLeft, oTop);\r\n}\r\nexport function addItemToArray(item, array) {\r\n    if (array.indexOf(item) === -1) {\r\n        array.push(item);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function removeItemFromArray(item, array) {\r\n    var index = -1;\r\n    if ((index = array.indexOf(item)) > -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function contains(array, obj) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        if (array[i] === obj) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function getOppositeSide(side) {\r\n    if (side === Side.Top) {\r\n        return Side.Bottom;\r\n    }\r\n    if (side === Side.Bottom) {\r\n        return Side.Top;\r\n    }\r\n    if (side === Side.Left) {\r\n        return Side.Right;\r\n    }\r\n    if (side === Side.Right) {\r\n        return Side.Left;\r\n    }\r\n    return Side.None;\r\n}\r\nexport function getSideFromVector(direction) {\r\n    var directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n    var directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n    var max = -Number.MAX_VALUE;\r\n    var maxIndex = -1;\r\n    for (var i = 0; i < directions.length; i++) {\r\n        if (directions[i].dot(direction) > max) {\r\n            max = directions[i].dot(direction);\r\n            maxIndex = i;\r\n        }\r\n    }\r\n    return directionEnum[maxIndex];\r\n}\r\n/**\r\n * Excalibur's dynamically resizing collection\r\n */\r\nvar Collection = /** @class */ (function () {\r\n    /**\r\n     * @param initialSize  Initial size of the internal backing array\r\n     */\r\n    function Collection(initialSize) {\r\n        if (initialSize === void 0) { initialSize = Collection.DefaultSize; }\r\n        this._internalArray = null;\r\n        this._endPointer = 0;\r\n        this._internalArray = new Array(initialSize);\r\n    }\r\n    Collection.prototype._resize = function () {\r\n        var newSize = this._internalArray.length * 2;\r\n        var newArray = new Array(newSize);\r\n        var count = this.count();\r\n        for (var i = 0; i < count; i++) {\r\n            newArray[i] = this._internalArray[i];\r\n        }\r\n        delete this._internalArray;\r\n        this._internalArray = newArray;\r\n    };\r\n    /**\r\n     * Push elements to the end of the collection\r\n     */\r\n    Collection.prototype.push = function (element) {\r\n        if (this._endPointer === this._internalArray.length) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[this._endPointer++] = element);\r\n    };\r\n    /**\r\n     * Removes elements from the end of the collection\r\n     */\r\n    Collection.prototype.pop = function () {\r\n        this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\r\n        return this._internalArray[this._endPointer];\r\n    };\r\n    /**\r\n     * Returns the count of the collection\r\n     */\r\n    Collection.prototype.count = function () {\r\n        return this._endPointer;\r\n    };\r\n    /**\r\n     * Empties the collection\r\n     */\r\n    Collection.prototype.clear = function () {\r\n        this._endPointer = 0;\r\n    };\r\n    /**\r\n     * Returns the size of the internal backing array\r\n     */\r\n    Collection.prototype.internalSize = function () {\r\n        return this._internalArray.length;\r\n    };\r\n    /**\r\n     * Returns an element at a specific index\r\n     * @param index  Index of element to retrieve\r\n     */\r\n    Collection.prototype.elementAt = function (index) {\r\n        if (index >= this.count()) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid index ' + index);\r\n        }\r\n        return this._internalArray[index];\r\n    };\r\n    /**\r\n     * Inserts an element at a specific index\r\n     * @param index  Index to insert the element\r\n     * @param value  Element to insert\r\n     */\r\n    Collection.prototype.insert = function (index, value) {\r\n        if (index >= this.count()) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[index] = value);\r\n    };\r\n    /**\r\n     * Removes an element at a specific index\r\n     * @param index  Index of element to remove\r\n     */\r\n    Collection.prototype.remove = function (index) {\r\n        var count = this.count();\r\n        if (count === 0) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid parameter ' + index);\r\n        }\r\n        // O(n) Shift\r\n        var removed = this._internalArray[index];\r\n        for (var i = index; i < count; i++) {\r\n            this._internalArray[i] = this._internalArray[i + 1];\r\n        }\r\n        this._endPointer--;\r\n        return removed;\r\n    };\r\n    /**\r\n     * Removes an element by reference\r\n     * @param element  Element to retrieve\r\n     */\r\n    Collection.prototype.removeElement = function (element) {\r\n        var index = this._internalArray.indexOf(element);\r\n        this.remove(index);\r\n    };\r\n    /**\r\n     * Returns a array representing the collection\r\n     */\r\n    Collection.prototype.toArray = function () {\r\n        return this._internalArray.slice(0, this._endPointer);\r\n    };\r\n    /**\r\n     * Iterate over every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\r\n     */\r\n    Collection.prototype.forEach = function (func) {\r\n        var i = 0, count = this.count();\r\n        for (i; i < count; i++) {\r\n            func.call(this, this._internalArray[i], i);\r\n        }\r\n    };\r\n    /**\r\n     * Mutate every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\r\n     * the collection\r\n     */\r\n    Collection.prototype.map = function (func) {\r\n        var count = this.count();\r\n        for (var i = 0; i < count; i++) {\r\n            this._internalArray[i] = func.call(this, this._internalArray[i], i);\r\n        }\r\n    };\r\n    /**\r\n     * Default collection size\r\n     */\r\n    Collection.DefaultSize = 200;\r\n    return Collection;\r\n}());\r\nexport { Collection };\r\n//# sourceMappingURL=Util.js.map","import { Vector } from './Algebra';\r\n/**\r\n * Possible collision resolution strategies\r\n *\r\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nexport var CollisionResolutionStrategy;\r\n(function (CollisionResolutionStrategy) {\r\n    CollisionResolutionStrategy[CollisionResolutionStrategy[\"Box\"] = 0] = \"Box\";\r\n    CollisionResolutionStrategy[CollisionResolutionStrategy[\"RigidBody\"] = 1] = \"RigidBody\";\r\n})(CollisionResolutionStrategy || (CollisionResolutionStrategy = {}));\r\n/**\r\n * Possible broadphase collision pair identification strategies\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\r\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n */\r\nexport var BroadphaseStrategy;\r\n(function (BroadphaseStrategy) {\r\n    BroadphaseStrategy[BroadphaseStrategy[\"Naive\"] = 0] = \"Naive\";\r\n    BroadphaseStrategy[BroadphaseStrategy[\"DynamicAABBTree\"] = 1] = \"DynamicAABBTree\";\r\n})(BroadphaseStrategy || (BroadphaseStrategy = {}));\r\n/**\r\n * Possible numerical integrators for position and velocity\r\n */\r\nexport var Integrator;\r\n(function (Integrator) {\r\n    Integrator[Integrator[\"Euler\"] = 0] = \"Euler\";\r\n})(Integrator || (Integrator = {}));\r\n/**\r\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\r\n *\r\n * [[include:Physics.md]]\r\n */\r\n/* istanbul ignore next */\r\nvar Physics = /** @class */ (function () {\r\n    function Physics() {\r\n    }\r\n    /**\r\n     * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\r\n     */\r\n    Physics.useBoxPhysics = function () {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n    };\r\n    /**\r\n     * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    Physics.useRigidBodyPhysics = function () {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\r\n    };\r\n    /**\r\n     * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\r\n     * Global acceleration won't effect [[Label|labels]], [[UIActor|ui actors]], or [[Trigger|triggers]] in Excalibur.\r\n     *\r\n     * This is a great way to globally simulate effects like gravity.\r\n     */\r\n    Physics.acc = new Vector(0, 0);\r\n    /**\r\n     * Globally switches all Excalibur physics behavior on or off.\r\n     */\r\n    Physics.enabled = true;\r\n    /**\r\n     * Gets or sets the number of collision passes for Excalibur to perform on physics bodies.\r\n     *\r\n     * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\r\n     *\r\n     * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\r\n     * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\r\n     *\r\n     * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the\r\n     * cost of performance.\r\n     *\r\n     * The default is set to 5 passes which is a good start.\r\n     */\r\n    Physics.collisionPasses = 5;\r\n    /**\r\n     * Gets or sets the broadphase pair identification strategy.\r\n     *\r\n     * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n     * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\r\n     * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n     */\r\n    Physics.broadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\r\n    /**\r\n     * Globally switches the debug information for the broadphase strategy\r\n     */\r\n    Physics.broadphaseDebug = false;\r\n    /**\r\n     * Show the normals as a result of collision on the screen.\r\n     */\r\n    Physics.showCollisionNormals = false;\r\n    /**\r\n     * Show the position, velocity, and acceleration as graphical vectors.\r\n     */\r\n    Physics.showMotionVectors = false;\r\n    /**\r\n     * Show the axis-aligned bounding boxes of the collision bodies on the screen.\r\n     */\r\n    Physics.showBounds = false;\r\n    /**\r\n     * Show the bounding collision area shapes\r\n     */\r\n    Physics.showArea = false;\r\n    /**\r\n     * Show points of collision interpreted by excalibur as a result of collision.\r\n     */\r\n    Physics.showContacts = false;\r\n    /**\r\n     * Show the surface normals of the collision areas.\r\n     */\r\n    Physics.showNormals = false;\r\n    /**\r\n     * Gets or sets the global collision resolution strategy (narrowphase).\r\n     *\r\n     * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n     *\r\n     * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n    /**\r\n     * The default mass to use if none is specified\r\n     */\r\n    Physics.defaultMass = 10;\r\n    /**\r\n     * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\r\n     */\r\n    Physics.integrator = Integrator.Euler;\r\n    /**\r\n     * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\r\n     * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\r\n     */\r\n    Physics.integrationSteps = 1;\r\n    /**\r\n     * Gets or sets whether rotation is allowed in a RigidBody collision resolution\r\n     */\r\n    Physics.allowRigidBodyRotation = true;\r\n    /**\r\n     * Small value to help collision passes settle themselves after the narrowphase.\r\n     */\r\n    Physics.collisionShift = 0.001;\r\n    /**\r\n     * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplyer);\r\n     */\r\n    Physics.dynamicTreeVelocityMultiplyer = 2;\r\n    /**\r\n     * Pad RigidBody BoundingBox by a constant amount\r\n     */\r\n    Physics.boundsPadding = 5;\r\n    /**\r\n     * Surface epsilon is used to help deal with surface penatration\r\n     */\r\n    Physics.surfaceEpsilon = 0.1;\r\n    /**\r\n     * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\r\n     * bodies from tunneling through one another.\r\n     */\r\n    Physics.checkForFastBodies = true;\r\n    /**\r\n     * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\r\n     * body is moving at least half of its minimum diminension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\r\n     * Excalibur will always perform the fast body raycast regardless of speed.\r\n     */\r\n    Physics.disableMinimumSpeedForFastBody = false;\r\n    return Physics;\r\n}());\r\nexport { Physics };\r\n//# sourceMappingURL=Physics.js.map","import * as Util from './Util/Util';\r\n/**\r\n * A 2D vector on a plane.\r\n */\r\nvar Vector = /** @class */ (function () {\r\n    /**\r\n     * @param x  X component of the Vector\r\n     * @param y  Y component of the Vector\r\n     */\r\n    function Vector(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\r\n     * @param angle The angle to generate the vector\r\n     */\r\n    Vector.fromAngle = function (angle) {\r\n        return new Vector(Math.cos(angle), Math.sin(angle));\r\n    };\r\n    /**\r\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\r\n     */\r\n    Vector.isValid = function (vec) {\r\n        if (vec === null || vec === undefined) {\r\n            return false;\r\n        }\r\n        if (isNaN(vec.x) || isNaN(vec.y)) {\r\n            return false;\r\n        }\r\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Calculates distance between two Vectors\r\n     * @param vec1\r\n     * @param vec2\r\n     */\r\n    Vector.distance = function (vec1, vec2) {\r\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\r\n    };\r\n    /**\r\n     * Sets the x and y components at once\r\n     */\r\n    Vector.prototype.setTo = function (x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    };\r\n    /**\r\n     * Compares this point against another and tests for equality\r\n     * @param point  The other point to compare to\r\n     */\r\n    Vector.prototype.equals = function (vector, tolerance) {\r\n        if (tolerance === void 0) { tolerance = 0.001; }\r\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\r\n    };\r\n    /**\r\n     * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\r\n     * @param v  The other vector. Leave blank to use origin vector.\r\n     */\r\n    Vector.prototype.distance = function (v) {\r\n        if (!v) {\r\n            v = Vector.Zero;\r\n        }\r\n        return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\r\n    };\r\n    /**\r\n     * The magnitude (size) of the Vector\r\n     */\r\n    Vector.prototype.magnitude = function () {\r\n        return this.distance();\r\n    };\r\n    /**\r\n     * Normalizes a vector to have a magnitude of 1.\r\n     */\r\n    Vector.prototype.normalize = function () {\r\n        var d = this.distance();\r\n        if (d > 0) {\r\n            return new Vector(this.x / d, this.y / d);\r\n        }\r\n        else {\r\n            return new Vector(0, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the average (midpoint) between the current point and the specified\r\n     */\r\n    Vector.prototype.average = function (vec) {\r\n        return this.add(vec).scale(0.5);\r\n    };\r\n    /**\r\n     * Scales a vector's by a factor of size\r\n     * @param size  The factor to scale the magnitude by\r\n     */\r\n    Vector.prototype.scale = function (size) {\r\n        return new Vector(this.x * size, this.y * size);\r\n    };\r\n    /**\r\n     * Adds one vector to another\r\n     * @param v The vector to add\r\n     */\r\n    Vector.prototype.add = function (v) {\r\n        return new Vector(this.x + v.x, this.y + v.y);\r\n    };\r\n    /**\r\n     * Subtracts a vector from another, if you subract vector `B.sub(A)` the resulting vector points from A -> B\r\n     * @param v The vector to subtract\r\n     */\r\n    Vector.prototype.sub = function (v) {\r\n        return new Vector(this.x - v.x, this.y - v.y);\r\n    };\r\n    /**\r\n     * Adds one vector to this one modifying the original\r\n     * @param v The vector to add\r\n     */\r\n    Vector.prototype.addEqual = function (v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        return this;\r\n    };\r\n    /**\r\n     * Subtracts a vector from this one modifying the original\r\n     * @parallel v The vector to subtract\r\n     */\r\n    Vector.prototype.subEqual = function (v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        return this;\r\n    };\r\n    /**\r\n     * Scales this vector by a factor of size and modifies the original\r\n     */\r\n    Vector.prototype.scaleEqual = function (size) {\r\n        this.x *= size;\r\n        this.y *= size;\r\n        return this;\r\n    };\r\n    /**\r\n     * Performs a dot product with another vector\r\n     * @param v  The vector to dot\r\n     */\r\n    Vector.prototype.dot = function (v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    };\r\n    Vector.prototype.cross = function (v) {\r\n        if (v instanceof Vector) {\r\n            return this.x * v.y - this.y * v.x;\r\n        }\r\n        else if (typeof v === 'number') {\r\n            return new Vector(v * this.y, -v * this.x);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the perpendicular vector to this one\r\n     */\r\n    Vector.prototype.perpendicular = function () {\r\n        return new Vector(this.y, -this.x);\r\n    };\r\n    /**\r\n     * Returns the normal vector to this one, same as the perpendicular of length 1\r\n     */\r\n    Vector.prototype.normal = function () {\r\n        return this.perpendicular().normalize();\r\n    };\r\n    /**\r\n     * Negate the current vector\r\n     */\r\n    Vector.prototype.negate = function () {\r\n        return this.scale(-1);\r\n    };\r\n    /**\r\n     * Returns the angle of this vector.\r\n     */\r\n    Vector.prototype.toAngle = function () {\r\n        return Math.atan2(this.y, this.x);\r\n    };\r\n    /**\r\n     * Rotates the current vector around a point by a certain number of\r\n     * degrees in radians\r\n     */\r\n    Vector.prototype.rotate = function (angle, anchor) {\r\n        if (!anchor) {\r\n            anchor = new Vector(0, 0);\r\n        }\r\n        var sinAngle = Math.sin(angle);\r\n        var cosAngle = Math.cos(angle);\r\n        var x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\r\n        var y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\r\n        return new Vector(x, y);\r\n    };\r\n    /**\r\n     * Creates new vector that has the same values as the previous.\r\n     */\r\n    Vector.prototype.clone = function () {\r\n        return new Vector(this.x, this.y);\r\n    };\r\n    /**\r\n     * Returns a string repesentation of the vector.\r\n     */\r\n    Vector.prototype.toString = function () {\r\n        return \"(\" + this.x + \", \" + this.y + \")\";\r\n    };\r\n    /**\r\n     * A (0, 0) vector\r\n     */\r\n    Vector.Zero = new Vector(0, 0);\r\n    /**\r\n     * A (1, 1) vector\r\n     */\r\n    Vector.One = new Vector(1, 1);\r\n    /**\r\n     * A (0.5, 0.5) vector\r\n     */\r\n    Vector.Half = new Vector(0.5, 0.5);\r\n    /**\r\n     * A unit vector pointing up (0, -1)\r\n     */\r\n    Vector.Up = new Vector(0, -1);\r\n    /**\r\n     * A unit vector pointing down (0, 1)\r\n     */\r\n    Vector.Down = new Vector(0, 1);\r\n    /**\r\n     * A unit vector pointing left (-1, 0)\r\n     */\r\n    Vector.Left = new Vector(-1, 0);\r\n    /**\r\n     * A unit vector pointing right (1, 0)\r\n     */\r\n    Vector.Right = new Vector(1, 0);\r\n    return Vector;\r\n}());\r\nexport { Vector };\r\n/**\r\n * A 2D ray that can be cast into the scene to do collision detection\r\n */\r\nvar Ray = /** @class */ (function () {\r\n    /**\r\n     * @param pos The starting position for the ray\r\n     * @param dir The vector indicating the direction of the ray\r\n     */\r\n    function Ray(pos, dir) {\r\n        this.pos = pos;\r\n        this.dir = dir.normalize();\r\n    }\r\n    /**\r\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\r\n     * This number indicates the mathematical intersection time.\r\n     * @param line  The line to test\r\n     */\r\n    Ray.prototype.intersect = function (line) {\r\n        var numerator = line.begin.sub(this.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\r\n            return -1;\r\n        }\r\n        // Lines are parallel\r\n        var divisor = this.dir.cross(line.getSlope());\r\n        if (divisor === 0) {\r\n            return -1;\r\n        }\r\n        var t = numerator.cross(line.getSlope()) / divisor;\r\n        if (t >= 0) {\r\n            var u = numerator.cross(this.dir) / divisor / line.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return t;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * Returns the point of intersection given the intersection time\r\n     */\r\n    Ray.prototype.getPoint = function (time) {\r\n        return this.pos.add(this.dir.scale(time));\r\n    };\r\n    return Ray;\r\n}());\r\nexport { Ray };\r\n/**\r\n * A 2D line segment\r\n */\r\nvar Line = /** @class */ (function () {\r\n    /**\r\n     * @param begin  The starting point of the line segment\r\n     * @param end  The ending point of the line segment\r\n     */\r\n    function Line(begin, end) {\r\n        this.begin = begin;\r\n        this.end = end;\r\n    }\r\n    Object.defineProperty(Line.prototype, \"slope\", {\r\n        /**\r\n         * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\r\n         */\r\n        get: function () {\r\n            return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Line.prototype, \"intercept\", {\r\n        /**\r\n         * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\r\n         */\r\n        get: function () {\r\n            return this.begin.y - this.slope * this.begin.x;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets the normal of the line\r\n     */\r\n    Line.prototype.normal = function () {\r\n        return this.end.sub(this.begin).normal();\r\n    };\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    Line.prototype.getSlope = function () {\r\n        var begin = this.begin;\r\n        var end = this.end;\r\n        var distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    };\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    Line.prototype.getLength = function () {\r\n        var begin = this.begin;\r\n        var end = this.end;\r\n        var distance = begin.distance(end);\r\n        return distance;\r\n    };\r\n    /**\r\n     * Find the perpendicular distance from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * @param point\r\n     */\r\n    Line.prototype.distanceToPoint = function (point) {\r\n        var x0 = point.x;\r\n        var y0 = point.y;\r\n        var l = this.getLength();\r\n        var dy = this.end.y - this.begin.y;\r\n        var dx = this.end.x - this.begin.x;\r\n        var distance = Math.abs(dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\r\n        return distance;\r\n    };\r\n    /**\r\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\r\n     * a new point with the calculated Y value and vice-versa.\r\n     *\r\n     * @param x The known X value of the target point\r\n     * @param y The known Y value of the target point\r\n     * @returns A new point with the other calculated axis value\r\n     */\r\n    Line.prototype.findPoint = function (x, y) {\r\n        if (x === void 0) { x = null; }\r\n        if (y === void 0) { y = null; }\r\n        var m = this.slope;\r\n        var b = this.intercept;\r\n        if (x !== null) {\r\n            return new Vector(x, m * x + b);\r\n        }\r\n        else if (y !== null) {\r\n            return new Vector((y - b) / m, y);\r\n        }\r\n        else {\r\n            throw new Error('You must provide an X or a Y value');\r\n        }\r\n    };\r\n    /**\r\n     * @see http://stackoverflow.com/a/11908158/109458\r\n     */\r\n    Line.prototype.hasPoint = function () {\r\n        var currPoint;\r\n        var threshold = 0;\r\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            currPoint = new Vector(arguments[0], arguments[1]);\r\n            threshold = arguments[2] || 0;\r\n        }\r\n        else if (arguments[0] instanceof Vector) {\r\n            currPoint = arguments[0];\r\n            threshold = arguments[1] || 0;\r\n        }\r\n        else {\r\n            throw 'Could not determine the arguments for Vector.hasPoint';\r\n        }\r\n        var dxc = currPoint.x - this.begin.x;\r\n        var dyc = currPoint.y - this.begin.y;\r\n        var dx1 = this.end.x - this.begin.x;\r\n        var dy1 = this.end.y - this.begin.y;\r\n        var cross = dxc * dy1 - dyc * dx1;\r\n        // check whether point lines on the line\r\n        if (Math.abs(cross) > threshold) {\r\n            return false;\r\n        }\r\n        // check whether point lies in-between start and end\r\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\r\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\r\n        }\r\n        else {\r\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\r\n        }\r\n    };\r\n    return Line;\r\n}());\r\nexport { Line };\r\n/**\r\n * A 1 dimensional projection on an axis, used to test overlaps\r\n */\r\nvar Projection = /** @class */ (function () {\r\n    function Projection(min, max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    Projection.prototype.overlaps = function (projection) {\r\n        return this.max > projection.min && projection.max > this.min;\r\n    };\r\n    Projection.prototype.getOverlap = function (projection) {\r\n        if (this.overlaps(projection)) {\r\n            if (this.max > projection.max) {\r\n                return projection.max - this.min;\r\n            }\r\n            else {\r\n                return this.max - projection.min;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    return Projection;\r\n}());\r\nexport { Projection };\r\nvar GlobalCoordinates = /** @class */ (function () {\r\n    function GlobalCoordinates(worldPos, pagePos, screenPos) {\r\n        this.worldPos = worldPos;\r\n        this.pagePos = pagePos;\r\n        this.screenPos = screenPos;\r\n    }\r\n    GlobalCoordinates.fromPagePosition = function (xOrPos, yOrEngine, engineOrUndefined) {\r\n        var pageX;\r\n        var pageY;\r\n        var pagePos;\r\n        var engine;\r\n        if (arguments.length === 3) {\r\n            pageX = xOrPos;\r\n            pageY = yOrEngine;\r\n            pagePos = new Vector(pageX, pageY);\r\n            engine = engineOrUndefined;\r\n        }\r\n        else {\r\n            pagePos = xOrPos;\r\n            pageX = pagePos.x;\r\n            pageY = pagePos.y;\r\n            engine = yOrEngine;\r\n        }\r\n        var screenX = pageX - Util.getPosition(engine.canvas).x;\r\n        var screenY = pageY - Util.getPosition(engine.canvas).y;\r\n        var screenPos = new Vector(screenX, screenY);\r\n        var worldPos = engine.screenToWorldCoordinates(screenPos);\r\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\r\n    };\r\n    return GlobalCoordinates;\r\n}());\r\nexport { GlobalCoordinates };\r\n//# sourceMappingURL=Algebra.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\r\n * some events are unique to a type, others are not.\r\n *\r\n */\r\nvar GameEvent = /** @class */ (function () {\r\n    function GameEvent() {\r\n        /**\r\n         * determines, if event bubbles to the target's ancestors\r\n         */\r\n        this.bubbles = true;\r\n        /**\r\n         * Holds the whole path from the Root to the event target\r\n         */\r\n        this._path = [];\r\n        this._name = '';\r\n    }\r\n    Object.defineProperty(GameEvent.prototype, \"eventPath\", {\r\n        /**\r\n         * Returns Event path from root to active actor.\r\n         */\r\n        get: function () {\r\n            return this._path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameEvent.prototype, \"name\", {\r\n        /**\r\n         * Returns name of the event\r\n         */\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    GameEvent.prototype.stopPropagation = function () {\r\n        this.bubbles = false;\r\n    };\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    GameEvent.prototype.action = function () {\r\n        var actor = this.eventPath.pop();\r\n        if (actor) {\r\n            this._onActionStart(actor);\r\n            actor.eventDispatcher.emit(this._name, this);\r\n            this._onActionEnd(actor);\r\n        }\r\n    };\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    GameEvent.prototype.propagate = function () {\r\n        if (!this.eventPath.length) {\r\n            return;\r\n        }\r\n        this.action();\r\n        if (this.bubbles) {\r\n            this.propagate();\r\n        }\r\n    };\r\n    GameEvent.prototype.layPath = function (actor) {\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    GameEvent.prototype._onActionStart = function (_actor) {\r\n        // to be rewritten\r\n    };\r\n    GameEvent.prototype._onActionEnd = function (_actor) {\r\n        // to be rewritten\r\n    };\r\n    return GameEvent;\r\n}());\r\nexport { GameEvent };\r\n/**\r\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\r\n */\r\nvar KillEvent = /** @class */ (function (_super) {\r\n    __extends(KillEvent, _super);\r\n    function KillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return KillEvent;\r\n}(GameEvent));\r\nexport { KillEvent };\r\n/**\r\n * The 'prekill' event is emitted directly before an actor is killed.\r\n */\r\nvar PreKillEvent = /** @class */ (function (_super) {\r\n    __extends(PreKillEvent, _super);\r\n    function PreKillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreKillEvent;\r\n}(GameEvent));\r\nexport { PreKillEvent };\r\n/**\r\n * The 'postkill' event is emitted directly after the actor is killed.\r\n */\r\nvar PostKillEvent = /** @class */ (function (_super) {\r\n    __extends(PostKillEvent, _super);\r\n    function PostKillEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostKillEvent;\r\n}(GameEvent));\r\nexport { PostKillEvent };\r\n/**\r\n * The 'start' event is emitted on engine when has started and is ready for interaction.\r\n */\r\nvar GameStartEvent = /** @class */ (function (_super) {\r\n    __extends(GameStartEvent, _super);\r\n    function GameStartEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GameStartEvent;\r\n}(GameEvent));\r\nexport { GameStartEvent };\r\n/**\r\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\r\n */\r\nvar GameStopEvent = /** @class */ (function (_super) {\r\n    __extends(GameStopEvent, _super);\r\n    function GameStopEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GameStopEvent;\r\n}(GameEvent));\r\nexport { GameStopEvent };\r\n/**\r\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nvar PreDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PreDrawEvent, _super);\r\n    function PreDrawEvent(ctx, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreDrawEvent;\r\n}(GameEvent));\r\nexport { PreDrawEvent };\r\n/**\r\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nvar PostDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PostDrawEvent, _super);\r\n    function PostDrawEvent(ctx, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostDrawEvent;\r\n}(GameEvent));\r\nexport { PostDrawEvent };\r\n/**\r\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\r\n */\r\nvar PreDebugDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PreDebugDrawEvent, _super);\r\n    function PreDebugDrawEvent(ctx, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreDebugDrawEvent;\r\n}(GameEvent));\r\nexport { PreDebugDrawEvent };\r\n/**\r\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\r\n */\r\nvar PostDebugDrawEvent = /** @class */ (function (_super) {\r\n    __extends(PostDebugDrawEvent, _super);\r\n    function PostDebugDrawEvent(ctx, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostDebugDrawEvent;\r\n}(GameEvent));\r\nexport { PostDebugDrawEvent };\r\n/**\r\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\r\n */\r\nvar PreUpdateEvent = /** @class */ (function (_super) {\r\n    __extends(PreUpdateEvent, _super);\r\n    function PreUpdateEvent(engine, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PreUpdateEvent;\r\n}(GameEvent));\r\nexport { PreUpdateEvent };\r\n/**\r\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\r\n */\r\nvar PostUpdateEvent = /** @class */ (function (_super) {\r\n    __extends(PostUpdateEvent, _super);\r\n    function PostUpdateEvent(engine, delta, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.delta = delta;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return PostUpdateEvent;\r\n}(GameEvent));\r\nexport { PostUpdateEvent };\r\n/**\r\n * The 'preframe' event is emitted on the engine, before the frame begins.\r\n */\r\nvar PreFrameEvent = /** @class */ (function (_super) {\r\n    __extends(PreFrameEvent, _super);\r\n    function PreFrameEvent(engine, prevStats) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.prevStats = prevStats;\r\n        _this.target = engine;\r\n        return _this;\r\n    }\r\n    return PreFrameEvent;\r\n}(GameEvent));\r\nexport { PreFrameEvent };\r\n/**\r\n * The 'postframe' event is emitted on the engine, after a frame ends.\r\n */\r\nvar PostFrameEvent = /** @class */ (function (_super) {\r\n    __extends(PostFrameEvent, _super);\r\n    function PostFrameEvent(engine, stats) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.stats = stats;\r\n        _this.target = engine;\r\n        return _this;\r\n    }\r\n    return PostFrameEvent;\r\n}(GameEvent));\r\nexport { PostFrameEvent };\r\n/**\r\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\r\n */\r\nvar GamepadConnectEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadConnectEvent, _super);\r\n    function GamepadConnectEvent(index, gamepad) {\r\n        var _this = _super.call(this) || this;\r\n        _this.index = index;\r\n        _this.gamepad = gamepad;\r\n        _this.target = gamepad;\r\n        return _this;\r\n    }\r\n    return GamepadConnectEvent;\r\n}(GameEvent));\r\nexport { GamepadConnectEvent };\r\n/**\r\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\r\n */\r\nvar GamepadDisconnectEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadDisconnectEvent, _super);\r\n    function GamepadDisconnectEvent(index, gamepad) {\r\n        var _this = _super.call(this) || this;\r\n        _this.index = index;\r\n        _this.gamepad = gamepad;\r\n        _this.target = gamepad;\r\n        return _this;\r\n    }\r\n    return GamepadDisconnectEvent;\r\n}(GameEvent));\r\nexport { GamepadDisconnectEvent };\r\n/**\r\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nvar GamepadButtonEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadButtonEvent, _super);\r\n    /**\r\n     * @param button  The Gamepad button\r\n     * @param value   A numeric value between 0 and 1\r\n     */\r\n    function GamepadButtonEvent(button, value, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.button = button;\r\n        _this.value = value;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GamepadButtonEvent;\r\n}(GameEvent));\r\nexport { GamepadButtonEvent };\r\n/**\r\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nvar GamepadAxisEvent = /** @class */ (function (_super) {\r\n    __extends(GamepadAxisEvent, _super);\r\n    /**\r\n     * @param axis  The Gamepad axis\r\n     * @param value A numeric value between -1 and 1\r\n     */\r\n    function GamepadAxisEvent(axis, value, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.axis = axis;\r\n        _this.value = value;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return GamepadAxisEvent;\r\n}(GameEvent));\r\nexport { GamepadAxisEvent };\r\n/**\r\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nvar SubscribeEvent = /** @class */ (function (_super) {\r\n    __extends(SubscribeEvent, _super);\r\n    function SubscribeEvent(topic, handler) {\r\n        var _this = _super.call(this) || this;\r\n        _this.topic = topic;\r\n        _this.handler = handler;\r\n        return _this;\r\n    }\r\n    return SubscribeEvent;\r\n}(GameEvent));\r\nexport { SubscribeEvent };\r\n/**\r\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nvar UnsubscribeEvent = /** @class */ (function (_super) {\r\n    __extends(UnsubscribeEvent, _super);\r\n    function UnsubscribeEvent(topic, handler) {\r\n        var _this = _super.call(this) || this;\r\n        _this.topic = topic;\r\n        _this.handler = handler;\r\n        return _this;\r\n    }\r\n    return UnsubscribeEvent;\r\n}(GameEvent));\r\nexport { UnsubscribeEvent };\r\n/**\r\n * Event received by the [[Engine]] when the browser window is visible on a screen.\r\n */\r\nvar VisibleEvent = /** @class */ (function (_super) {\r\n    __extends(VisibleEvent, _super);\r\n    function VisibleEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return VisibleEvent;\r\n}(GameEvent));\r\nexport { VisibleEvent };\r\n/**\r\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\r\n */\r\nvar HiddenEvent = /** @class */ (function (_super) {\r\n    __extends(HiddenEvent, _super);\r\n    function HiddenEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return HiddenEvent;\r\n}(GameEvent));\r\nexport { HiddenEvent };\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\r\n */\r\nvar PreCollisionEvent = /** @class */ (function (_super) {\r\n    __extends(PreCollisionEvent, _super);\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that will collided with the current actor\r\n     * @param side          The side that will be collided with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    function PreCollisionEvent(actor, other, side, intersection) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.side = side;\r\n        _this.intersection = intersection;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return PreCollisionEvent;\r\n}(GameEvent));\r\nexport { PreCollisionEvent };\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\r\n */\r\nvar PostCollisionEvent = /** @class */ (function (_super) {\r\n    __extends(PostCollisionEvent, _super);\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that did collide with the current actor\r\n     * @param side          The side that did collide with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    function PostCollisionEvent(actor, other, side, intersection) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.side = side;\r\n        _this.intersection = intersection;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return PostCollisionEvent;\r\n}(GameEvent));\r\nexport { PostCollisionEvent };\r\n/**\r\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\r\n */\r\nvar CollisionStartEvent = /** @class */ (function (_super) {\r\n    __extends(CollisionStartEvent, _super);\r\n    /**\r\n     *\r\n     */\r\n    function CollisionStartEvent(actor, other, pair) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.pair = pair;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return CollisionStartEvent;\r\n}(GameEvent));\r\nexport { CollisionStartEvent };\r\n/**\r\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\r\n */\r\nvar CollisionEndEvent = /** @class */ (function (_super) {\r\n    __extends(CollisionEndEvent, _super);\r\n    /**\r\n     *\r\n     */\r\n    function CollisionEndEvent(actor, other) {\r\n        var _this = _super.call(this) || this;\r\n        _this.actor = actor;\r\n        _this.other = other;\r\n        _this.target = actor;\r\n        return _this;\r\n    }\r\n    return CollisionEndEvent;\r\n}(GameEvent));\r\nexport { CollisionEndEvent };\r\n/**\r\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\r\n */\r\nvar InitializeEvent = /** @class */ (function (_super) {\r\n    __extends(InitializeEvent, _super);\r\n    /**\r\n     * @param engine  The reference to the current engine\r\n     */\r\n    function InitializeEvent(engine, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.engine = engine;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return InitializeEvent;\r\n}(GameEvent));\r\nexport { InitializeEvent };\r\n/**\r\n * Event thrown on a [[Scene]] on activation\r\n */\r\nvar ActivateEvent = /** @class */ (function (_super) {\r\n    __extends(ActivateEvent, _super);\r\n    /**\r\n     * @param oldScene  The reference to the old scene\r\n     */\r\n    function ActivateEvent(oldScene, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.oldScene = oldScene;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return ActivateEvent;\r\n}(GameEvent));\r\nexport { ActivateEvent };\r\n/**\r\n * Event thrown on a [[Scene]] on deactivation\r\n */\r\nvar DeactivateEvent = /** @class */ (function (_super) {\r\n    __extends(DeactivateEvent, _super);\r\n    /**\r\n     * @param newScene  The reference to the new scene\r\n     */\r\n    function DeactivateEvent(newScene, target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.newScene = newScene;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return DeactivateEvent;\r\n}(GameEvent));\r\nexport { DeactivateEvent };\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nvar ExitViewPortEvent = /** @class */ (function (_super) {\r\n    __extends(ExitViewPortEvent, _super);\r\n    function ExitViewPortEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return ExitViewPortEvent;\r\n}(GameEvent));\r\nexport { ExitViewPortEvent };\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nvar EnterViewPortEvent = /** @class */ (function (_super) {\r\n    __extends(EnterViewPortEvent, _super);\r\n    function EnterViewPortEvent(target) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    return EnterViewPortEvent;\r\n}(GameEvent));\r\nexport { EnterViewPortEvent };\r\nvar EnterTriggerEvent = /** @class */ (function (_super) {\r\n    __extends(EnterTriggerEvent, _super);\r\n    function EnterTriggerEvent(target, actor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this.actor = actor;\r\n        return _this;\r\n    }\r\n    return EnterTriggerEvent;\r\n}(GameEvent));\r\nexport { EnterTriggerEvent };\r\nvar ExitTriggerEvent = /** @class */ (function (_super) {\r\n    __extends(ExitTriggerEvent, _super);\r\n    function ExitTriggerEvent(target, actor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this.actor = actor;\r\n        return _this;\r\n    }\r\n    return ExitTriggerEvent;\r\n}(GameEvent));\r\nexport { ExitTriggerEvent };\r\n//# sourceMappingURL=Events.js.map","/**\r\n * Logging level that Excalibur will tag\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\r\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\r\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * Static singleton that represents the logging facility for Excalibur.\r\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\r\n * Derive from [[IAppender]] to create your own logging appenders.\r\n *\r\n * [[include:Logger.md]]\r\n */\r\nvar Logger = /** @class */ (function () {\r\n    function Logger() {\r\n        this._appenders = [];\r\n        /**\r\n         * Gets or sets the default logging level. Excalibur will only log\r\n         * messages if equal to or above this level. Default: [[LogLevel.Info]]\r\n         */\r\n        this.defaultLevel = LogLevel.Info;\r\n        if (Logger._instance) {\r\n            throw new Error('Logger is a singleton');\r\n        }\r\n        Logger._instance = this;\r\n        // Default console appender\r\n        Logger._instance.addAppender(new ConsoleAppender());\r\n        return Logger._instance;\r\n    }\r\n    /**\r\n     * Gets the current static instance of Logger\r\n     */\r\n    Logger.getInstance = function () {\r\n        if (Logger._instance == null) {\r\n            Logger._instance = new Logger();\r\n        }\r\n        return Logger._instance;\r\n    };\r\n    /**\r\n     * Adds a new [[IAppender]] to the list of appenders to write to\r\n     */\r\n    Logger.prototype.addAppender = function (appender) {\r\n        this._appenders.push(appender);\r\n    };\r\n    /**\r\n     * Clears all appenders from the logger\r\n     */\r\n    Logger.prototype.clearAppenders = function () {\r\n        this._appenders.length = 0;\r\n    };\r\n    /**\r\n     * Logs a message at a given LogLevel\r\n     * @param level  The LogLevel`to log the message at\r\n     * @param args   An array of arguments to write to an appender\r\n     */\r\n    Logger.prototype._log = function (level, args) {\r\n        if (level == null) {\r\n            level = this.defaultLevel;\r\n        }\r\n        var i = 0, len = this._appenders.length;\r\n        for (i; i < len; i++) {\r\n            if (level >= this.defaultLevel) {\r\n                this._appenders[i].log(level, args);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Debug]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Debug, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Info]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.info = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Info, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Warn]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.warn = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Warn, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Error]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.error = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Error, args);\r\n    };\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Fatal]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    Logger.prototype.fatal = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._log(LogLevel.Fatal, args);\r\n    };\r\n    Logger._instance = null;\r\n    return Logger;\r\n}());\r\nexport { Logger };\r\n/**\r\n * Console appender for browsers (i.e. `console.log`)\r\n */\r\nvar ConsoleAppender = /** @class */ (function () {\r\n    function ConsoleAppender() {\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    ConsoleAppender.prototype.log = function (level, args) {\r\n        // Check for console support\r\n        if (!console && !console.log && console.warn && console.error) {\r\n            // todo maybe do something better than nothing\r\n            return;\r\n        }\r\n        // Create a new console args array\r\n        var consoleArgs = [];\r\n        consoleArgs.unshift.apply(consoleArgs, args);\r\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\r\n        if (level < LogLevel.Warn) {\r\n            // Call .log for Debug/Info\r\n            if (console.log.apply) {\r\n                // this is required on some older browsers that don't support apply on console.log :(\r\n                console.log.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.log(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else if (level < LogLevel.Error) {\r\n            // Call .warn for Warn\r\n            if (console.warn.apply) {\r\n                console.warn.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.warn(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else {\r\n            // Call .error for Error/Fatal\r\n            if (console.error.apply) {\r\n                console.error.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.error(consoleArgs.join(' '));\r\n            }\r\n        }\r\n    };\r\n    return ConsoleAppender;\r\n}());\r\nexport { ConsoleAppender };\r\n/**\r\n * On-screen (canvas) appender\r\n */\r\nvar ScreenAppender = /** @class */ (function () {\r\n    /**\r\n     * @param width   Width of the screen appender in pixels\r\n     * @param height  Height of the screen appender in pixels\r\n     */\r\n    function ScreenAppender(width, height) {\r\n        // @todo Clean this up\r\n        this._messages = [];\r\n        this._canvas = document.createElement('canvas');\r\n        this._canvas.width = width || window.innerWidth;\r\n        this._canvas.height = height || window.innerHeight;\r\n        this._canvas.style.position = 'absolute';\r\n        this._ctx = this._canvas.getContext('2d');\r\n        document.body.appendChild(this._canvas);\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    ScreenAppender.prototype.log = function (level, args) {\r\n        var message = args.join(',');\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\r\n        var pos = 10;\r\n        var opacity = 1.0;\r\n        for (var i = 0; i < this._messages.length; i++) {\r\n            this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\r\n            this._ctx.fillText(this._messages[i], 200, pos);\r\n            pos += 10;\r\n            opacity = opacity > 0 ? opacity - 0.05 : 0;\r\n        }\r\n    };\r\n    return ScreenAppender;\r\n}());\r\nexport { ScreenAppender };\r\n//# sourceMappingURL=Log.js.map","import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\r\n/**\r\n * Excalibur's internal event dispatcher implementation.\r\n * Callbacks are fired immediately after an event is published.\r\n * Typically you will use [[Class.eventDispatcher]] since most classes in\r\n * Excalibur inherit from [[Class]]. You will rarely create an `EventDispatcher`\r\n * yourself.\r\n *\r\n * [[include:Events.md]]\r\n */\r\nvar EventDispatcher = /** @class */ (function () {\r\n    /**\r\n     * @param target  The object that will be the recipient of events from this event dispatcher\r\n     */\r\n    function EventDispatcher(target) {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n        this._target = target;\r\n    }\r\n    /**\r\n     * Emits an event for target\r\n     * @param eventName  The name of the event to publish\r\n     * @param event      Optionally pass an event data object to the handler\r\n     */\r\n    EventDispatcher.prototype.emit = function (eventName, event) {\r\n        if (!eventName) {\r\n            // key not mapped\r\n            return;\r\n        }\r\n        eventName = eventName.toLowerCase();\r\n        var target = this._target;\r\n        if (!event) {\r\n            event = new GameEvent();\r\n        }\r\n        event.target = target;\r\n        var i, len;\r\n        if (this._handlers[eventName]) {\r\n            i = 0;\r\n            len = this._handlers[eventName].length;\r\n            for (i; i < len; i++) {\r\n                this._handlers[eventName][i].call(target, event);\r\n            }\r\n        }\r\n        i = 0;\r\n        len = this._wiredEventDispatchers.length;\r\n        for (i; i < len; i++) {\r\n            this._wiredEventDispatchers[i].emit(eventName, event);\r\n        }\r\n    };\r\n    /**\r\n     * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\r\n     * @param eventName  The name of the event to subscribe to\r\n     * @param handler    The handler callback to fire on this event\r\n     */\r\n    EventDispatcher.prototype.on = function (eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        if (!this._handlers[eventName]) {\r\n            this._handlers[eventName] = [];\r\n        }\r\n        this._handlers[eventName].push(handler);\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('subscribe', new SubscribeEvent(eventName, handler));\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribe an event handler(s) from an event. If a specific handler\r\n     * is specified for an event, only that handler will be unsubscribed.\r\n     * Otherwise all handlers will be unsubscribed for that event.\r\n     *\r\n     * @param eventName  The name of the event to unsubscribe\r\n     * @param handler    Optionally the specific handler to unsubscribe\r\n     *\r\n     */\r\n    EventDispatcher.prototype.off = function (eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        var eventHandlers = this._handlers[eventName];\r\n        if (eventHandlers) {\r\n            // if no explicit handler is give with the event name clear all handlers\r\n            if (!handler) {\r\n                this._handlers[eventName].length = 0;\r\n            }\r\n            else {\r\n                var index = eventHandlers.indexOf(handler);\r\n                this._handlers[eventName].splice(index, 1);\r\n            }\r\n        }\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\r\n        }\r\n    };\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    EventDispatcher.prototype.once = function (eventName, handler) {\r\n        var _this = this;\r\n        var metaHandler = function (event) {\r\n            var ev = event || new GameEvent();\r\n            ev.target = ev.target || _this._target;\r\n            _this.off(eventName, handler);\r\n            handler.call(ev.target, ev);\r\n        };\r\n        this.on(eventName, metaHandler);\r\n    };\r\n    /**\r\n     * Wires this event dispatcher to also recieve events from another\r\n     */\r\n    EventDispatcher.prototype.wire = function (eventDispatcher) {\r\n        eventDispatcher._wiredEventDispatchers.push(this);\r\n    };\r\n    /**\r\n     * Unwires this event dispatcher from another\r\n     */\r\n    EventDispatcher.prototype.unwire = function (eventDispatcher) {\r\n        var index = eventDispatcher._wiredEventDispatchers.indexOf(this);\r\n        if (index > -1) {\r\n            eventDispatcher._wiredEventDispatchers.splice(index, 1);\r\n        }\r\n    };\r\n    return EventDispatcher;\r\n}());\r\nexport { EventDispatcher };\r\n//# sourceMappingURL=EventDispatcher.js.map","import { EventDispatcher } from './EventDispatcher';\r\n/**\r\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\r\n * and extending abilities for vanilla Javascript projects\r\n */\r\nvar Class = /** @class */ (function () {\r\n    function Class() {\r\n        this.eventDispatcher = new EventDispatcher(this);\r\n    }\r\n    /**\r\n     * Alias for `addEventListener`. You can listen for a variety of\r\n     * events off of the engine; see the events section below for a complete list.\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    Class.prototype.on = function (eventName, handler) {\r\n        this.eventDispatcher.on(eventName, handler);\r\n    };\r\n    /**\r\n     * Alias for `removeEventListener`. If only the eventName is specified\r\n     * it will remove all handlers registered for that specific event. If the eventName\r\n     * and the handler instance are specified only that handler will be removed.\r\n     *\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    Class.prototype.off = function (eventName, handler) {\r\n        this.eventDispatcher.off(eventName, handler);\r\n    };\r\n    /**\r\n     * Emits a new event\r\n     * @param eventName   Name of the event to emit\r\n     * @param eventObject Data associated with this event\r\n     */\r\n    Class.prototype.emit = function (eventName, eventObject) {\r\n        this.eventDispatcher.emit(eventName, eventObject);\r\n    };\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    Class.prototype.once = function (eventName, handler) {\r\n        this.eventDispatcher.once(eventName, handler);\r\n    };\r\n    /**\r\n     * You may wish to extend native Excalibur functionality in vanilla Javascript.\r\n     * Any method on a class inheriting [[Class]] may be extended to support\r\n     * additional functionality. In the example below we create a new type called `MyActor`.\r\n     *\r\n     *\r\n     * ```js\r\n     * var MyActor = Actor.extend({\r\n     *\r\n     *    constructor: function() {\r\n     *       this.newprop = 'something';\r\n     *       Actor.apply(this, arguments);\r\n     *    },\r\n     *\r\n     *    update: function(engine, delta) {\r\n     *       // Implement custom update\r\n     *       // Call super constructor update\r\n     *       Actor.prototype.update.call(this, engine, delta);\r\n     *\r\n     *       console.log(\"Something cool!\");\r\n     *    }\r\n     * });\r\n     *\r\n     * var myActor = new MyActor(100, 100, 100, 100, Color.Azure);\r\n     * ```\r\n     *\r\n     * In TypeScript, you only need to use the `extends` syntax, you do not need\r\n     * to use this method of extension.\r\n     *\r\n     * @param methods A JSON object contain any methods/properties you want to extend\r\n     */\r\n    Class.extend = function (methods) {\r\n        var parent = this;\r\n        var child;\r\n        if (methods && methods.hasOwnProperty('constructor')) {\r\n            child = methods.constructor;\r\n        }\r\n        else {\r\n            child = function () {\r\n                return parent.apply(this, arguments);\r\n            };\r\n        }\r\n        // Using constructor allows JS to lazily instantiate super classes\r\n        var Super = function () {\r\n            this.constructor = child;\r\n        };\r\n        Super.prototype = parent.prototype;\r\n        child.prototype = new Super();\r\n        if (methods) {\r\n            for (var prop in methods) {\r\n                if (methods.hasOwnProperty(prop)) {\r\n                    child.prototype[prop] = methods[prop];\r\n                }\r\n            }\r\n        }\r\n        // Make subclasses extendable\r\n        child.extend = Class.extend;\r\n        return child;\r\n    };\r\n    return Class;\r\n}());\r\nexport { Class };\r\n//# sourceMappingURL=Class.js.map","/**\r\n * Provides standard colors (e.g. [[Color.Black]])\r\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\r\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\r\n *\r\n * [[include:Colors.md]]\r\n */\r\nvar Color = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    function Color(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a != null ? a : 1;\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    Color.fromRGB = function (r, g, b, a) {\r\n        return new Color(r, g, b, a);\r\n    };\r\n    /**\r\n     * Creates a new inscance of Color from a hex string\r\n     *\r\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\r\n     */\r\n    Color.fromHex = function (hex) {\r\n        var hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\r\n        var match = null;\r\n        if ((match = hex.match(hexRegEx))) {\r\n            var r = parseInt(match[1], 16);\r\n            var g = parseInt(match[2], 16);\r\n            var b = parseInt(match[3], 16);\r\n            var a = 1;\r\n            if (match[4]) {\r\n                a = parseInt(match[4], 16) / 255;\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid hex string: ' + hex);\r\n        }\r\n    };\r\n    /**\r\n     * Creats a new instance of Color from hsla values\r\n     *\r\n     * @param h  Hue is represented [0-1]\r\n     * @param s  Saturation is represented [0-1]\r\n     * @param l  Luminance is represented [0-1]\r\n     * @param a  Alpha is represented [0-1]\r\n     */\r\n    Color.fromHSL = function (h, s, l, a) {\r\n        if (a === void 0) { a = 1.0; }\r\n        var temp = new HSLColor(h, s, l, a);\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Lightens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to lighten by [0-1]\r\n     */\r\n    Color.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l += temp.l * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Darkens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to darken by [0-1]\r\n     */\r\n    Color.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l -= temp.l * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Saturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to saturate by [0-1]\r\n     */\r\n    Color.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s += temp.s * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Desaturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to desaturate by [0-1]\r\n     */\r\n    Color.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s -= temp.s * factor;\r\n        return temp.toRGBA();\r\n    };\r\n    /**\r\n     * Multiplies a color by another, results in a darker color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.mulitiply = function (color) {\r\n        var newR = (((color.r / 255) * this.r) / 255) * 255;\r\n        var newG = (((color.g / 255) * this.g) / 255) * 255;\r\n        var newB = (((color.b / 255) * this.b) / 255) * 255;\r\n        var newA = color.a * this.a;\r\n        return new Color(newR, newG, newB, newA);\r\n    };\r\n    /**\r\n     * Screens a color by another, results in a lighter color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.screen = function (color) {\r\n        var color1 = color.invert();\r\n        var color2 = color.invert();\r\n        return color1.mulitiply(color2).invert();\r\n    };\r\n    /**\r\n     * Inverts the current color\r\n     */\r\n    Color.prototype.invert = function () {\r\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\r\n    };\r\n    /**\r\n     * Averages the current color with another\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    Color.prototype.average = function (color) {\r\n        var newR = (color.r + this.r) / 2;\r\n        var newG = (color.g + this.g) / 2;\r\n        var newB = (color.b + this.b) / 2;\r\n        var newA = (color.a + this.a) / 2;\r\n        return new Color(newR, newG, newB, newA);\r\n    };\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     *\r\n     * @param format Color representation, accepts: rgb, hsl, or hex\r\n     */\r\n    Color.prototype.toString = function (format) {\r\n        if (format === void 0) { format = 'rgb'; }\r\n        switch (format) {\r\n            case 'rgb':\r\n                return this.toRGBA();\r\n            case 'hsl':\r\n                return this.toHSLA();\r\n            case 'hex':\r\n                return this.toHex();\r\n            default:\r\n                throw new Error('Invalid Color format');\r\n        }\r\n    };\r\n    /**\r\n     * Returns Hex Value of a color component\r\n     * @param c color component\r\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n     */\r\n    Color.prototype._componentToHex = function (c) {\r\n        var hex = c.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    };\r\n    /**\r\n     * Return Hex representation of a color.\r\n     */\r\n    Color.prototype.toHex = function () {\r\n        return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\r\n    };\r\n    /**\r\n     * Return RGBA representation of a color.\r\n     */\r\n    Color.prototype.toRGBA = function () {\r\n        var result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\r\n        if (this.a !== undefined || this.a !== null) {\r\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\r\n        }\r\n        return 'rgb(' + result + ')';\r\n    };\r\n    /**\r\n     * Return HSLA representation of a color.\r\n     */\r\n    Color.prototype.toHSLA = function () {\r\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\r\n    };\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     */\r\n    Color.prototype.fillStyle = function () {\r\n        return this.toString();\r\n    };\r\n    /**\r\n     * Returns a clone of the current color.\r\n     */\r\n    Color.prototype.clone = function () {\r\n        return new Color(this.r, this.g, this.b, this.a);\r\n    };\r\n    /**\r\n     * Black (#000000)\r\n     */\r\n    Color.Black = Color.fromHex('#000000');\r\n    /**\r\n     * White (#FFFFFF)\r\n     */\r\n    Color.White = Color.fromHex('#FFFFFF');\r\n    /**\r\n     * Gray (#808080)\r\n     */\r\n    Color.Gray = Color.fromHex('#808080');\r\n    /**\r\n     * Light gray (#D3D3D3)\r\n     */\r\n    Color.LightGray = Color.fromHex('#D3D3D3');\r\n    /**\r\n     * Dark gray (#A9A9A9)\r\n     */\r\n    Color.DarkGray = Color.fromHex('#A9A9A9');\r\n    /**\r\n     * Yellow (#FFFF00)\r\n     */\r\n    Color.Yellow = Color.fromHex('#FFFF00');\r\n    /**\r\n     * Orange (#FFA500)\r\n     */\r\n    Color.Orange = Color.fromHex('#FFA500');\r\n    /**\r\n     * Red (#FF0000)\r\n     */\r\n    Color.Red = Color.fromHex('#FF0000');\r\n    /**\r\n     * Vermillion (#FF5B31)\r\n     */\r\n    Color.Vermillion = Color.fromHex('#FF5B31');\r\n    /**\r\n     * Rose (#FF007F)\r\n     */\r\n    Color.Rose = Color.fromHex('#FF007F');\r\n    /**\r\n     * Magenta (#FF00FF)\r\n     */\r\n    Color.Magenta = Color.fromHex('#FF00FF');\r\n    /**\r\n     * Violet (#7F00FF)\r\n     */\r\n    Color.Violet = Color.fromHex('#7F00FF');\r\n    /**\r\n     * Blue (#0000FF)\r\n     */\r\n    Color.Blue = Color.fromHex('#0000FF');\r\n    /**\r\n     * Azure (#007FFF)\r\n     */\r\n    Color.Azure = Color.fromHex('#007FFF');\r\n    /**\r\n     * Cyan (#00FFFF)\r\n     */\r\n    Color.Cyan = Color.fromHex('#00FFFF');\r\n    /**\r\n     * Viridian (#59978F)\r\n     */\r\n    Color.Viridian = Color.fromHex('#59978F');\r\n    /**\r\n     * Green (#00FF00)\r\n     */\r\n    Color.Green = Color.fromHex('#00FF00');\r\n    /**\r\n     * Chartreuse (#7FFF00)\r\n     */\r\n    Color.Chartreuse = Color.fromHex('#7FFF00');\r\n    /**\r\n     * Transparent (#FFFFFF00)\r\n     */\r\n    Color.Transparent = Color.fromHex('#FFFFFF00');\r\n    return Color;\r\n}());\r\nexport { Color };\r\n/**\r\n * Internal HSL Color representation\r\n *\r\n * http://en.wikipedia.org/wiki/HSL_and_HSV\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n */\r\nvar HSLColor = /** @class */ (function () {\r\n    function HSLColor(h, s, l, a) {\r\n        this.h = h;\r\n        this.s = s;\r\n        this.l = l;\r\n        this.a = a;\r\n    }\r\n    HSLColor.hue2rgb = function (p, q, t) {\r\n        if (t < 0) {\r\n            t += 1;\r\n        }\r\n        if (t > 1) {\r\n            t -= 1;\r\n        }\r\n        if (t < 1 / 6) {\r\n            return p + (q - p) * 6 * t;\r\n        }\r\n        if (t < 1 / 2) {\r\n            return q;\r\n        }\r\n        if (t < 2 / 3) {\r\n            return p + (q - p) * (2 / 3 - t) * 6;\r\n        }\r\n        return p;\r\n    };\r\n    HSLColor.fromRGBA = function (r, g, b, a) {\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return new HSLColor(h, s, l, a);\r\n    };\r\n    HSLColor.prototype.toRGBA = function () {\r\n        var r, g, b;\r\n        if (this.s === 0) {\r\n            r = g = b = this.l; // achromatic\r\n        }\r\n        else {\r\n            var q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\r\n            var p = 2 * this.l - q;\r\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\r\n            g = HSLColor.hue2rgb(p, q, this.h);\r\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\r\n        }\r\n        return new Color(r * 255, g * 255, b * 255, this.a);\r\n    };\r\n    HSLColor.prototype.toString = function () {\r\n        var h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\r\n        return \"hsla(\" + h + \", \" + s + \", \" + l + \", \" + a + \")\";\r\n    };\r\n    return HSLColor;\r\n}());\r\n//# sourceMappingURL=Color.js.map","import { CollisionType } from '../Actor';\r\nimport { Vector } from '../Algebra';\r\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\r\nimport { PostCollisionEvent, PreCollisionEvent } from '../Events';\r\nimport * as Util from '../Util/Util';\r\n/**\r\n * Collision contacts are used internally by Excalibur to resolve collision between actors. This\r\n * Pair prevents collisions from being evaluated more than one time\r\n */\r\nvar CollisionContact = /** @class */ (function () {\r\n    function CollisionContact(bodyA, bodyB, mtv, point, normal) {\r\n        this.bodyA = bodyA;\r\n        this.bodyB = bodyB;\r\n        this.mtv = mtv;\r\n        this.point = point;\r\n        this.normal = normal;\r\n    }\r\n    CollisionContact.prototype.resolve = function (strategy) {\r\n        if (strategy === CollisionResolutionStrategy.RigidBody) {\r\n            this._resolveRigidBodyCollision();\r\n        }\r\n        else if (strategy === CollisionResolutionStrategy.Box) {\r\n            this._resolveBoxCollision();\r\n        }\r\n        else {\r\n            throw new Error('Unknown collision resolution strategy');\r\n        }\r\n    };\r\n    CollisionContact.prototype._applyBoxImpulse = function (bodyA, bodyB, mtv) {\r\n        if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType !== CollisionType.Passive) {\r\n            // Resolve overlaps\r\n            if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\r\n                // split overlaps if both are Active\r\n                mtv = mtv.scale(0.5);\r\n            }\r\n            // Apply mtv\r\n            bodyA.pos.y += mtv.y;\r\n            bodyA.pos.x += mtv.x;\r\n            // non-zero intersection on the y axis\r\n            if (this.mtv.x !== 0) {\r\n                var velX = 0;\r\n                // both bodies are traveling in the same direction (negative or positive)\r\n                if (bodyA.vel.x < 0 && bodyB.vel.x < 0) {\r\n                    velX = Math.min(bodyA.vel.x, bodyB.vel.x);\r\n                }\r\n                else if (bodyA.vel.x > 0 && bodyB.vel.x > 0) {\r\n                    velX = Math.max(bodyA.vel.x, bodyB.vel.x);\r\n                }\r\n                else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                    // bodies are traveling in opposite directions\r\n                    if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                        velX = bodyA.vel.x;\r\n                    }\r\n                    else {\r\n                        // bodyA is heading towards b\r\n                        velX = bodyB.vel.x;\r\n                    }\r\n                }\r\n                bodyA.vel.x = velX;\r\n            }\r\n            if (this.mtv.y !== 0) {\r\n                var velY = 0;\r\n                // both bodies are traveling in the same direction (negative or positive)\r\n                if (bodyA.vel.y < 0 && bodyB.vel.y < 0) {\r\n                    velY = Math.min(bodyA.vel.y, bodyB.vel.y);\r\n                }\r\n                else if (bodyA.vel.y > 0 && bodyB.vel.y > 0) {\r\n                    velY = Math.max(bodyA.vel.y, bodyB.vel.y);\r\n                }\r\n                else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                    // bodies are traveling in opposite directions\r\n                    if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                        velY = bodyA.vel.y;\r\n                    }\r\n                    else {\r\n                        // bodyA is heading towards b\r\n                        velY = bodyB.vel.y;\r\n                    }\r\n                }\r\n                bodyA.vel.y = velY;\r\n            }\r\n            bodyA.emit('postcollision', new PostCollisionEvent(bodyA, bodyB, Util.getSideFromVector(mtv), mtv));\r\n        }\r\n    };\r\n    CollisionContact.prototype._resolveBoxCollision = function () {\r\n        var bodyA = this.bodyA.body.actor;\r\n        var bodyB = this.bodyB.body.actor;\r\n        var side = Util.getSideFromVector(this.mtv);\r\n        var mtv = this.mtv.negate();\r\n        // Publish collision events on both participants\r\n        bodyA.emit('precollision', new PreCollisionEvent(bodyA, bodyB, side, mtv));\r\n        bodyB.emit('precollision', new PreCollisionEvent(bodyB, bodyA, Util.getOppositeSide(side), mtv.negate()));\r\n        this._applyBoxImpulse(bodyA, bodyB, mtv);\r\n        this._applyBoxImpulse(bodyB, bodyA, mtv.negate());\r\n    };\r\n    CollisionContact.prototype._resolveRigidBodyCollision = function () {\r\n        // perform collison on bounding areas\r\n        var bodyA = this.bodyA.body;\r\n        var bodyB = this.bodyB.body;\r\n        var mtv = this.mtv; // normal pointing away from bodyA\r\n        var normal = this.normal; // normal pointing away from bodyA\r\n        if (bodyA.actor === bodyB.actor) {\r\n            // sanity check for existing pairs\r\n            return;\r\n        }\r\n        // Publish collision events on both participants\r\n        var side = Util.getSideFromVector(this.mtv);\r\n        bodyA.actor.emit('precollision', new PreCollisionEvent(this.bodyA.body.actor, this.bodyB.body.actor, side, this.mtv));\r\n        bodyB.actor.emit('precollision', new PreCollisionEvent(this.bodyB.body.actor, this.bodyA.body.actor, Util.getOppositeSide(side), this.mtv.negate()));\r\n        // If any of the participants are passive then short circuit\r\n        if (bodyA.actor.collisionType === CollisionType.Passive || bodyB.actor.collisionType === CollisionType.Passive) {\r\n            return;\r\n        }\r\n        var invMassA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.mass;\r\n        var invMassB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.mass;\r\n        var invMoiA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.moi;\r\n        var invMoiB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.moi;\r\n        // average restitution more relistic\r\n        var coefRestitution = Math.min(bodyA.restitution, bodyB.restitution);\r\n        var coefFriction = Math.min(bodyA.friction, bodyB.friction);\r\n        normal = normal.normalize();\r\n        var tangent = normal.normal().normalize();\r\n        var ra = this.point.sub(this.bodyA.getCenter()); // point relative to bodyA position\r\n        var rb = this.point.sub(this.bodyB.getCenter()); /// point relative to bodyB\r\n        // Relative velocity in linear terms\r\n        // Angular to linear velocity formula -> omega = v/r\r\n        var rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\r\n        var rvNormal = rv.dot(normal);\r\n        var rvTangent = rv.dot(tangent);\r\n        var raTangent = ra.dot(tangent);\r\n        var raNormal = ra.dot(normal);\r\n        var rbTangent = rb.dot(tangent);\r\n        var rbNormal = rb.dot(normal);\r\n        // If objects are moving away ignore\r\n        if (rvNormal > 0) {\r\n            return;\r\n        }\r\n        // Collision impulse formula from Chris Hecker\r\n        // https://en.wikipedia.org/wiki/Collision_response\r\n        var impulse = -((1 + coefRestitution) * rvNormal) / (invMassA + invMassB + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\r\n        if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n            bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n            }\r\n            bodyB.addMtv(mtv);\r\n        }\r\n        else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n            bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n            }\r\n            bodyA.addMtv(mtv.negate());\r\n        }\r\n        else {\r\n            bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n            bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n            if (Physics.allowRigidBodyRotation) {\r\n                bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n                bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n            }\r\n            // Split the mtv in half for the two bodies, potentially we could do something smarter here\r\n            bodyB.addMtv(mtv.scale(0.5));\r\n            bodyA.addMtv(mtv.scale(-0.5));\r\n        }\r\n        // Friction portion of impulse\r\n        if (coefFriction && rvTangent) {\r\n            // Columb model of friction, formula for impulse due to friction from\r\n            // https://en.wikipedia.org/wiki/Collision_response\r\n            // tangent force exerted by body on another in contact\r\n            var t = rv.sub(normal.scale(rv.dot(normal))).normalize();\r\n            // impulse in the direction of tangent force\r\n            var jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\r\n            var frictionImpulse = new Vector(0, 0);\r\n            if (Math.abs(jt) <= impulse * coefFriction) {\r\n                frictionImpulse = t.scale(jt).negate();\r\n            }\r\n            else {\r\n                frictionImpulse = t.scale(-impulse * coefFriction);\r\n            }\r\n            if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n                // apply frictional impulse\r\n                bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n                }\r\n            }\r\n            else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n                // apply frictional impulse\r\n                bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n                }\r\n            }\r\n            else {\r\n                // apply frictional impulse\r\n                bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n                bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n                // apply frictional impulse\r\n                if (Physics.allowRigidBodyRotation) {\r\n                    bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n                    bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n                }\r\n            }\r\n        }\r\n        bodyA.actor.emit('postcollision', new PostCollisionEvent(this.bodyA.body.actor, this.bodyB.body.actor, side, this.mtv));\r\n        bodyB.actor.emit('postcollision', new PostCollisionEvent(this.bodyB.body.actor, this.bodyA.body.actor, Util.getOppositeSide(side), this.mtv.negate()));\r\n    };\r\n    return CollisionContact;\r\n}());\r\nexport { CollisionContact };\r\n//# sourceMappingURL=CollisionContact.js.map","import { CollisionContact } from './CollisionContact';\r\nimport { PolygonArea } from './PolygonArea';\r\nexport var CollisionJumpTable = {\r\n    CollideCircleCircle: function (circleA, circleB) {\r\n        var radius = circleA.radius + circleB.radius;\r\n        var circleAPos = circleA.body.pos.add(circleA.pos);\r\n        var circleBPos = circleB.body.pos.add(circleB.pos);\r\n        if (circleAPos.distance(circleBPos) > radius) {\r\n            return null;\r\n        }\r\n        var axisOfCollision = circleBPos.sub(circleAPos).normalize();\r\n        var mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\r\n        var pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\r\n        return new CollisionContact(circleA, circleB, mvt, pointOfCollision, axisOfCollision);\r\n    },\r\n    CollideCirclePolygon: function (circle, polygon) {\r\n        var minAxis = circle.testSeparatingAxisTheorem(polygon);\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // make sure that the minAxis is pointing away from circle\r\n        var samedir = minAxis.dot(polygon.getCenter().sub(circle.getCenter()));\r\n        minAxis = samedir < 0 ? minAxis.negate() : minAxis;\r\n        var verts = [];\r\n        var point1 = polygon.getFurthestPoint(minAxis.negate());\r\n        var point2 = circle.getFurthestPoint(minAxis); //.add(cc);\r\n        if (circle.contains(point1)) {\r\n            verts.push(point1);\r\n        }\r\n        if (polygon.contains(point2)) {\r\n            verts.push(point2);\r\n        }\r\n        if (verts.length === 0) {\r\n            return null;\r\n        }\r\n        return new CollisionContact(circle, polygon, minAxis, verts.length === 2 ? verts[0].average(verts[1]) : verts[0], minAxis.normalize());\r\n    },\r\n    CollideCircleEdge: function (circle, edge) {\r\n        // center of the circle\r\n        var cc = circle.getCenter();\r\n        // vector in the direction of the edge\r\n        var e = edge.end.sub(edge.begin);\r\n        // amount of overlap with the circle's center along the edge direction\r\n        var u = e.dot(edge.end.sub(cc));\r\n        var v = e.dot(cc.sub(edge.begin));\r\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\r\n        if (v <= 0) {\r\n            var da = edge.begin.sub(cc);\r\n            var dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\r\n            // save some sqrts\r\n            if (dda > circle.radius * circle.radius) {\r\n                return null; // no collision\r\n            }\r\n            return new CollisionContact(circle, edge, da.normalize().scale(circle.radius - Math.sqrt(dda)), edge.begin, da.normalize());\r\n        }\r\n        // Potential region B collision (circle is on the right side of the edge, after the end)\r\n        if (u <= 0) {\r\n            var db = edge.end.sub(cc);\r\n            var ddb = db.dot(db);\r\n            if (ddb > circle.radius * circle.radius) {\r\n                return null;\r\n            }\r\n            return new CollisionContact(circle, edge, db.normalize().scale(circle.radius - Math.sqrt(ddb)), edge.end, db.normalize());\r\n        }\r\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\r\n        var den = e.dot(e);\r\n        var pointOnEdge = edge.begin\r\n            .scale(u)\r\n            .add(edge.end.scale(v))\r\n            .scale(1 / den);\r\n        var d = cc.sub(pointOnEdge);\r\n        var dd = d.dot(d);\r\n        if (dd > circle.radius * circle.radius) {\r\n            return null; // no collision\r\n        }\r\n        var n = e.perpendicular();\r\n        // flip correct direction\r\n        if (n.dot(cc.sub(edge.begin)) < 0) {\r\n            n.x = -n.x;\r\n            n.y = -n.y;\r\n        }\r\n        n = n.normalize();\r\n        var mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\r\n        return new CollisionContact(circle, edge, mvt.negate(), pointOnEdge, n.negate());\r\n    },\r\n    CollideEdgeEdge: function () {\r\n        // Edge-edge collision doesn't make sense\r\n        return null;\r\n    },\r\n    CollidePolygonEdge: function (polygon, edge) {\r\n        // 3 cases:\r\n        // (1) Polygon lands on the full face\r\n        // (2) Polygon lands on the right point\r\n        // (3) Polygon lands on the left point\r\n        var e = edge.end.sub(edge.begin);\r\n        var edgeNormal = e.normal();\r\n        if (polygon.contains(edge.begin)) {\r\n            var _a = polygon.getClosestFace(edge.begin), mtv = _a.distance, face = _a.face;\r\n            if (mtv) {\r\n                return new CollisionContact(polygon, edge, mtv.negate(), edge.begin.add(mtv.negate()), face.normal().negate());\r\n            }\r\n        }\r\n        if (polygon.contains(edge.end)) {\r\n            var _b = polygon.getClosestFace(edge.end), mtv = _b.distance, face = _b.face;\r\n            if (mtv) {\r\n                return new CollisionContact(polygon, edge, mtv.negate(), edge.end.add(mtv.negate()), face.normal().negate());\r\n            }\r\n        }\r\n        var pc = polygon.getCenter();\r\n        var ec = edge.getCenter();\r\n        var dir = ec.sub(pc).normalize();\r\n        // build a temporary polygon from the edge to use SAT\r\n        var linePoly = new PolygonArea({\r\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(30)), edge.begin.add(dir.scale(30))]\r\n        });\r\n        var minAxis = polygon.testSeparatingAxisTheorem(linePoly);\r\n        // no minAxis, no overlap, no collision\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // flip the normal and axis to always have positive collisions\r\n        edgeNormal = edgeNormal.dot(dir) < 0 ? edgeNormal.negate() : edgeNormal;\r\n        minAxis = minAxis.dot(dir) < 0 ? minAxis.negate() : minAxis;\r\n        return new CollisionContact(polygon, edge, minAxis, polygon.getFurthestPoint(edgeNormal), edgeNormal);\r\n    },\r\n    CollidePolygonPolygon: function (polyA, polyB) {\r\n        // do a SAT test to find a min axis if it exists\r\n        var minAxis = polyA.testSeparatingAxisTheorem(polyB);\r\n        // no overlap, no collision return null\r\n        if (!minAxis) {\r\n            return null;\r\n        }\r\n        // make sure that minAxis is pointing from A -> B\r\n        var sameDir = minAxis.dot(polyB.getCenter().sub(polyA.getCenter()));\r\n        minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\r\n        // find rough point of collision\r\n        // todo this could be better\r\n        var verts = [];\r\n        var pointA = polyA.getFurthestPoint(minAxis);\r\n        var pointB = polyB.getFurthestPoint(minAxis.negate());\r\n        if (polyB.contains(pointA)) {\r\n            verts.push(pointA);\r\n        }\r\n        if (polyA.contains(pointB)) {\r\n            verts.push(pointB);\r\n        }\r\n        // no candidates, pick something\r\n        if (verts.length === 0) {\r\n            verts.push(pointB);\r\n        }\r\n        var contact = verts.length === 2 ? verts[0].add(verts[1]).scale(0.5) : verts[0];\r\n        return new CollisionContact(polyA, polyB, minAxis, contact, minAxis.normalize());\r\n    }\r\n};\r\n//# sourceMappingURL=CollisionJumpTable.js.map","import { BoundingBox } from './BoundingBox';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { Vector, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\n/**\r\n * This is a circle collision area for the excalibur rigid body physics simulation\r\n */\r\nvar CircleArea = /** @class */ (function () {\r\n    function CircleArea(options) {\r\n        /**\r\n         * This is the center position of the circle, relative to the body position\r\n         */\r\n        this.pos = Vector.Zero.clone();\r\n        this.pos = options.pos || Vector.Zero.clone();\r\n        this.radius = options.radius || 0;\r\n        this.body = options.body || null;\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    CircleArea.prototype.getCenter = function () {\r\n        if (this.body) {\r\n            return this.pos.add(this.body.pos);\r\n        }\r\n        return this.pos;\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    CircleArea.prototype.contains = function (point) {\r\n        var distance = this.body.pos.distance(point);\r\n        if (distance <= this.radius) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Casts a ray at the CircleArea and returns the nearest point of collision\r\n     * @param ray\r\n     */\r\n    CircleArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\r\n        var c = this.getCenter();\r\n        var dir = ray.dir;\r\n        var orig = ray.pos;\r\n        var discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\r\n        if (discriminant < 0) {\r\n            // no intersection\r\n            return null;\r\n        }\r\n        else {\r\n            var toi = 0;\r\n            if (discriminant === 0) {\r\n                toi = -dir.dot(orig.sub(c));\r\n                if (toi > 0 && toi < max) {\r\n                    return ray.getPoint(toi);\r\n                }\r\n                return null;\r\n            }\r\n            else {\r\n                var toi1 = -dir.dot(orig.sub(c)) + discriminant;\r\n                var toi2 = -dir.dot(orig.sub(c)) - discriminant;\r\n                var mintoi = Math.min(toi1, toi2);\r\n                if (mintoi <= max) {\r\n                    return ray.getPoint(mintoi);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    CircleArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCircleCircle(this, area);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollideCirclePolygon(this, area);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollideCircleEdge(this, area);\r\n        }\r\n        else {\r\n            throw new Error(\"Circle could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    CircleArea.prototype.getFurthestPoint = function (direction) {\r\n        return this.getCenter().add(direction.normalize().scale(this.radius));\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the circle area\r\n     */\r\n    CircleArea.prototype.getBounds = function () {\r\n        return new BoundingBox(this.pos.x + this.body.pos.x - this.radius, this.pos.y + this.body.pos.y - this.radius, this.pos.x + this.body.pos.x + this.radius, this.pos.y + this.body.pos.y + this.radius);\r\n    };\r\n    /**\r\n     * Get axis not implemented on circles, since there are infinite axis in a circle\r\n     */\r\n    CircleArea.prototype.getAxes = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * Returns the moment of inertia of a circle given it's mass\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    CircleArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        return (mass * this.radius * this.radius) / 2;\r\n    };\r\n    /**\r\n     * Tests the separating axis theorem for circles against polygons\r\n     */\r\n    CircleArea.prototype.testSeparatingAxisTheorem = function (polygon) {\r\n        var axes = polygon.getAxes();\r\n        var pc = polygon.getCenter();\r\n        // Special SAT with circles\r\n        var closestPointOnPoly = polygon.getFurthestPoint(this.pos.sub(pc));\r\n        axes.push(this.pos.sub(closestPointOnPoly).normalize());\r\n        var minOverlap = Number.MAX_VALUE;\r\n        var minAxis = null;\r\n        var minIndex = -1;\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var proj1 = polygon.project(axes[i]);\r\n            var proj2 = this.project(axes[i]);\r\n            var overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        if (minIndex < 0) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    };\r\n    /* istanbul ignore next */\r\n    CircleArea.prototype.recalc = function () {\r\n        // circles don't cache\r\n    };\r\n    /**\r\n     * Project the circle along a specified axis\r\n     */\r\n    CircleArea.prototype.project = function (axis) {\r\n        var scalars = [];\r\n        var point = this.getCenter();\r\n        var dotProduct = point.dot(axis);\r\n        scalars.push(dotProduct);\r\n        scalars.push(dotProduct + this.radius);\r\n        scalars.push(dotProduct - this.radius);\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    };\r\n    /* istanbul ignore next */\r\n    CircleArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Green.clone(); }\r\n        var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n        var rotation = this.body ? this.body.rotation : 0;\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.moveTo(pos.x, pos.y);\r\n        ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return CircleArea;\r\n}());\r\nexport { CircleArea };\r\n//# sourceMappingURL=CircleArea.js.map","import { BoundingBox } from './BoundingBox';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CircleArea } from './CircleArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { Vector, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\nvar EdgeArea = /** @class */ (function () {\r\n    function EdgeArea(options) {\r\n        this.begin = options.begin || Vector.Zero.clone();\r\n        this.end = options.end || Vector.Zero.clone();\r\n        this.body = options.body || null;\r\n        this.pos = this.getCenter();\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    EdgeArea.prototype.getCenter = function () {\r\n        var pos = this.begin.average(this.end).add(this._getBodyPos());\r\n        return pos;\r\n    };\r\n    EdgeArea.prototype._getBodyPos = function () {\r\n        var bodyPos = Vector.Zero.clone();\r\n        if (this.body.pos) {\r\n            bodyPos = this.body.pos;\r\n        }\r\n        return bodyPos;\r\n    };\r\n    EdgeArea.prototype._getTransformedBegin = function () {\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        return this.begin.rotate(angle).add(this._getBodyPos());\r\n    };\r\n    EdgeArea.prototype._getTransformedEnd = function () {\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        return this.end.rotate(angle).add(this._getBodyPos());\r\n    };\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    EdgeArea.prototype.getSlope = function () {\r\n        var begin = this._getTransformedBegin();\r\n        var end = this._getTransformedEnd();\r\n        var distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    };\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    EdgeArea.prototype.getLength = function () {\r\n        var begin = this._getTransformedBegin();\r\n        var end = this._getTransformedEnd();\r\n        var distance = begin.distance(end);\r\n        return distance;\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    EdgeArea.prototype.contains = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        var numerator = this._getTransformedBegin().sub(ray.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\r\n            return null;\r\n        }\r\n        // Lines are parallel\r\n        var divisor = ray.dir.cross(this.getSlope());\r\n        if (divisor === 0) {\r\n            return null;\r\n        }\r\n        var t = numerator.cross(this.getSlope()) / divisor;\r\n        if (t >= 0 && t <= max) {\r\n            var u = numerator.cross(ray.dir) / divisor / this.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return ray.getPoint(t);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCircleEdge(area, this);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollidePolygonEdge(area, this);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollideEdgeEdge();\r\n        }\r\n        else {\r\n            throw new Error(\"Edge could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    EdgeArea.prototype.getFurthestPoint = function (direction) {\r\n        var transformedBegin = this._getTransformedBegin();\r\n        var transformedEnd = this._getTransformedEnd();\r\n        if (direction.dot(transformedBegin) > 0) {\r\n            return transformedBegin;\r\n        }\r\n        else {\r\n            return transformedEnd;\r\n        }\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the circle area\r\n     */\r\n    EdgeArea.prototype.getBounds = function () {\r\n        var transformedBegin = this._getTransformedBegin();\r\n        var transformedEnd = this._getTransformedEnd();\r\n        return new BoundingBox(Math.min(transformedBegin.x, transformedEnd.x), Math.min(transformedBegin.y, transformedEnd.y), Math.max(transformedBegin.x, transformedEnd.x), Math.max(transformedBegin.y, transformedEnd.y));\r\n    };\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    EdgeArea.prototype.getAxes = function () {\r\n        var e = this._getTransformedEnd().sub(this._getTransformedBegin());\r\n        var edgeNormal = e.normal();\r\n        var axes = [];\r\n        axes.push(edgeNormal);\r\n        axes.push(edgeNormal.negate());\r\n        axes.push(edgeNormal.normal());\r\n        axes.push(edgeNormal.normal().negate());\r\n        return axes;\r\n    };\r\n    /**\r\n     * Get the moment of inertia for an edge\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    EdgeArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        var length = this.end.sub(this.begin).distance() / 2;\r\n        return mass * length * length;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    EdgeArea.prototype.recalc = function () {\r\n        // edges don't have any cached data\r\n    };\r\n    /**\r\n     * Project the edge along a specified axis\r\n     */\r\n    EdgeArea.prototype.project = function (axis) {\r\n        var scalars = [];\r\n        var points = [this._getTransformedBegin(), this._getTransformedEnd()];\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            scalars.push(points[i].dot(axis));\r\n        }\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    };\r\n    /* istanbul ignore next */\r\n    EdgeArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Red.clone(); }\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.begin.x, this.begin.y);\r\n        ctx.lineTo(this.end.x, this.end.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return EdgeArea;\r\n}());\r\nexport { EdgeArea };\r\n//# sourceMappingURL=EdgeArea.js.map","import { Color } from './../Drawing/Color';\r\nimport { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CircleArea } from './CircleArea';\r\nimport { Vector, Line, Ray, Projection } from './../Algebra';\r\n/**\r\n * Polygon collision area for detecting collisions for actors, or independently\r\n */\r\nvar PolygonArea = /** @class */ (function () {\r\n    function PolygonArea(options) {\r\n        this._transformedPoints = [];\r\n        this._axes = [];\r\n        this._sides = [];\r\n        this.pos = options.pos || Vector.Zero.clone();\r\n        var winding = !!options.clockwiseWinding;\r\n        this.points = (winding ? options.points.reverse() : options.points) || [];\r\n        this.body = options.body || null;\r\n        // calculate initial transformation\r\n        this._calculateTransformation();\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    PolygonArea.prototype.getCenter = function () {\r\n        if (this.body) {\r\n            return this.body.pos.add(this.pos);\r\n        }\r\n        return this.pos;\r\n    };\r\n    /**\r\n     * Calculates the underlying transformation from the body relative space to world space\r\n     */\r\n    PolygonArea.prototype._calculateTransformation = function () {\r\n        var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n        var angle = this.body ? this.body.rotation : 0;\r\n        var len = this.points.length;\r\n        this._transformedPoints.length = 0; // clear out old transform\r\n        for (var i = 0; i < len; i++) {\r\n            this._transformedPoints[i] = this.points[i].rotate(angle).add(pos);\r\n        }\r\n    };\r\n    /**\r\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\r\n     */\r\n    PolygonArea.prototype.getTransformedPoints = function () {\r\n        if (!this._transformedPoints.length) {\r\n            this._calculateTransformation();\r\n        }\r\n        return this._transformedPoints;\r\n    };\r\n    /**\r\n     * Gets the sides of the polygon in world space\r\n     */\r\n    PolygonArea.prototype.getSides = function () {\r\n        if (this._sides.length) {\r\n            return this._sides;\r\n        }\r\n        var lines = [];\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            lines.push(new Line(points[i], points[(i - 1 + len) % len]));\r\n        }\r\n        this._sides = lines;\r\n        return this._sides;\r\n    };\r\n    PolygonArea.prototype.recalc = function () {\r\n        this._sides.length = 0;\r\n        this._axes.length = 0;\r\n        this._transformedPoints.length = 0;\r\n        this.getTransformedPoints();\r\n        this.getAxes();\r\n        this.getSides();\r\n    };\r\n    /**\r\n     * Tests if a point is contained in this collision area in world space\r\n     */\r\n    PolygonArea.prototype.contains = function (point) {\r\n        // Always cast to the right, as long as we cast in a consitent fixed direction we\r\n        // will be fine\r\n        var testRay = new Ray(point, new Vector(1, 0));\r\n        var intersectCount = this.getSides().reduce(function (accum, side) {\r\n            if (testRay.intersect(side) >= 0) {\r\n                return accum + 1;\r\n            }\r\n            return accum;\r\n        }, 0);\r\n        if (intersectCount % 2 === 0) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Returns a collision contact if the 2 collision areas collide, otherwise collide will\r\n     * return null.\r\n     * @param area\r\n     */\r\n    PolygonArea.prototype.collide = function (area) {\r\n        if (area instanceof CircleArea) {\r\n            return CollisionJumpTable.CollideCirclePolygon(area, this);\r\n        }\r\n        else if (area instanceof PolygonArea) {\r\n            return CollisionJumpTable.CollidePolygonPolygon(this, area);\r\n        }\r\n        else if (area instanceof EdgeArea) {\r\n            return CollisionJumpTable.CollidePolygonEdge(this, area);\r\n        }\r\n        else {\r\n            throw new Error(\"Polygon could not collide with unknown ICollisionArea \" + typeof area);\r\n        }\r\n    };\r\n    /**\r\n     * Find the point on the shape furthest in the direction specified\r\n     */\r\n    PolygonArea.prototype.getFurthestPoint = function (direction) {\r\n        var pts = this.getTransformedPoints();\r\n        var furthestPoint = null;\r\n        var maxDistance = -Number.MAX_VALUE;\r\n        for (var i = 0; i < pts.length; i++) {\r\n            var distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    };\r\n    /**\r\n     * Finds the closes face to the point using perpendicular distance\r\n     * @param point point to test against polygon\r\n     */\r\n    PolygonArea.prototype.getClosestFace = function (point) {\r\n        var sides = this.getSides();\r\n        var min = Number.POSITIVE_INFINITY;\r\n        var faceIndex = -1;\r\n        var distance = -1;\r\n        for (var i = 0; i < sides.length; i++) {\r\n            var dist = sides[i].distanceToPoint(point);\r\n            if (dist < min) {\r\n                min = dist;\r\n                faceIndex = i;\r\n                distance = dist;\r\n            }\r\n        }\r\n        if (faceIndex !== -1) {\r\n            return {\r\n                distance: sides[faceIndex].normal().scale(distance),\r\n                face: sides[faceIndex]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon area\r\n     */\r\n    PolygonArea.prototype.getBounds = function () {\r\n        // todo there is a faster way to do this\r\n        var points = this.getTransformedPoints();\r\n        var minX = points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.x);\r\n        }, 999999999);\r\n        var maxX = points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.x);\r\n        }, -99999999);\r\n        var minY = points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.y);\r\n        }, 9999999999);\r\n        var maxY = points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.y);\r\n        }, -9999999999);\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    };\r\n    /**\r\n     * Get the moment of inertia for an arbitrary polygon\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    PolygonArea.prototype.getMomentOfInertia = function () {\r\n        var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n        var numerator = 0;\r\n        var denominator = 0;\r\n        for (var i = 0; i < this.points.length; i++) {\r\n            var iplusone = (i + 1) % this.points.length;\r\n            var crossTerm = this.points[iplusone].cross(this.points[i]);\r\n            numerator +=\r\n                crossTerm *\r\n                    (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\r\n            denominator += crossTerm;\r\n        }\r\n        return (mass / 6) * (numerator / denominator);\r\n    };\r\n    /**\r\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\r\n     */\r\n    PolygonArea.prototype.rayCast = function (ray, max) {\r\n        if (max === void 0) { max = Infinity; }\r\n        // find the minimum contact time greater than 0\r\n        // contact times less than 0 are behind the ray and we don't want those\r\n        var sides = this.getSides();\r\n        var len = sides.length;\r\n        var minContactTime = Number.MAX_VALUE;\r\n        var contactIndex = -1;\r\n        for (var i = 0; i < len; i++) {\r\n            var contactTime = ray.intersect(sides[i]);\r\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\r\n                minContactTime = contactTime;\r\n                contactIndex = i;\r\n            }\r\n        }\r\n        // contact was found\r\n        if (contactIndex >= 0) {\r\n            return ray.getPoint(minContactTime);\r\n        }\r\n        // no contact found\r\n        return null;\r\n    };\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    PolygonArea.prototype.getAxes = function () {\r\n        if (this._axes.length) {\r\n            return this._axes;\r\n        }\r\n        var axes = [];\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        for (var i = 0; i < len; i++) {\r\n            axes.push(points[i].sub(points[(i + 1) % len]).normal());\r\n        }\r\n        this._axes = axes;\r\n        return this._axes;\r\n    };\r\n    /**\r\n     * Perform Separating Axis test against another polygon, returns null if no overlap in polys\r\n     * Reference http://www.dyn4j.org/2010/01/sat/\r\n     */\r\n    PolygonArea.prototype.testSeparatingAxisTheorem = function (other) {\r\n        var poly1 = this;\r\n        var poly2 = other;\r\n        var axes = poly1.getAxes().concat(poly2.getAxes());\r\n        var minOverlap = Number.MAX_VALUE;\r\n        var minAxis = null;\r\n        var minIndex = -1;\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var proj1 = poly1.project(axes[i]);\r\n            var proj2 = poly2.project(axes[i]);\r\n            var overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        // Sanity check\r\n        if (minIndex === -1) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    };\r\n    /**\r\n     * Project the edges of the polygon along a specified axis\r\n     */\r\n    PolygonArea.prototype.project = function (axis) {\r\n        var points = this.getTransformedPoints();\r\n        var len = points.length;\r\n        var min = Number.MAX_VALUE;\r\n        var max = -Number.MAX_VALUE;\r\n        for (var i = 0; i < len; i++) {\r\n            var scalar = points[i].dot(axis);\r\n            min = Math.min(min, scalar);\r\n            max = Math.max(max, scalar);\r\n        }\r\n        return new Projection(min, max);\r\n    };\r\n    /* istanbul ignore next */\r\n    PolygonArea.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Red.clone(); }\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        var firstPoint = this.getTransformedPoints()[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        this.getTransformedPoints().forEach(function (point) {\r\n            ctx.lineTo(point.x, point.y);\r\n        });\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    return PolygonArea;\r\n}());\r\nexport { PolygonArea };\r\n//# sourceMappingURL=PolygonArea.js.map","import { PolygonArea } from './PolygonArea';\r\nimport { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\n/**\r\n * Axis Aligned collision primitive for Excalibur.\r\n */\r\nvar BoundingBox = /** @class */ (function () {\r\n    /**\r\n     * @param left    x coordinate of the left edge\r\n     * @param top     y coordinate of the top edge\r\n     * @param right   x coordinate of the right edge\r\n     * @param bottom  y coordinate of the bottom edge\r\n     */\r\n    function BoundingBox(left, top, right, bottom) {\r\n        if (left === void 0) { left = 0; }\r\n        if (top === void 0) { top = 0; }\r\n        if (right === void 0) { right = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        this.left = left;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n    }\r\n    BoundingBox.fromPoints = function (points) {\r\n        var minX = Infinity;\r\n        var minY = Infinity;\r\n        var maxX = -Infinity;\r\n        var maxY = -Infinity;\r\n        for (var i = 0; i < points.length; i++) {\r\n            if (points[i].x < minX) {\r\n                minX = points[i].x;\r\n            }\r\n            if (points[i].x > maxX) {\r\n                maxX = points[i].x;\r\n            }\r\n            if (points[i].y < minY) {\r\n                minY = points[i].y;\r\n            }\r\n            if (points[i].y > maxY) {\r\n                maxY = points[i].y;\r\n            }\r\n        }\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    };\r\n    /**\r\n     * Returns the calculated width of the bounding box\r\n     */\r\n    BoundingBox.prototype.getWidth = function () {\r\n        return this.right - this.left;\r\n    };\r\n    /**\r\n     * Returns the calculated height of the bounding box\r\n     */\r\n    BoundingBox.prototype.getHeight = function () {\r\n        return this.bottom - this.top;\r\n    };\r\n    /**\r\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\r\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\r\n     */\r\n    BoundingBox.prototype.rotate = function (angle, point) {\r\n        if (point === void 0) { point = Vector.Zero.clone(); }\r\n        var points = this.getPoints().map(function (p) { return p.rotate(angle, point); });\r\n        return BoundingBox.fromPoints(points);\r\n    };\r\n    /**\r\n     * Returns the perimeter of the bounding box\r\n     */\r\n    BoundingBox.prototype.getPerimeter = function () {\r\n        var wx = this.getWidth();\r\n        var wy = this.getHeight();\r\n        return 2 * (wx + wy);\r\n    };\r\n    BoundingBox.prototype.getPoints = function () {\r\n        var results = [];\r\n        results.push(new Vector(this.left, this.top));\r\n        results.push(new Vector(this.right, this.top));\r\n        results.push(new Vector(this.right, this.bottom));\r\n        results.push(new Vector(this.left, this.bottom));\r\n        return results;\r\n    };\r\n    /**\r\n     * Creates a Polygon collision area from the points of the bounding box\r\n     */\r\n    BoundingBox.prototype.toPolygon = function (actor) {\r\n        return new PolygonArea({\r\n            body: actor ? actor.body : null,\r\n            points: this.getPoints(),\r\n            pos: Vector.Zero.clone()\r\n        });\r\n    };\r\n    /**\r\n     * Determines whether a ray intersects with a bounding box\r\n     */\r\n    BoundingBox.prototype.rayCast = function (ray, farClipDistance) {\r\n        if (farClipDistance === void 0) { farClipDistance = Infinity; }\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        var tmin = -Infinity;\r\n        var tmax = +Infinity;\r\n        var xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        var yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        var tx1 = (this.left - ray.pos.x) * xinv;\r\n        var tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        var ty1 = (this.top - ray.pos.y) * yinv;\r\n        var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\r\n    };\r\n    BoundingBox.prototype.rayCastTime = function (ray, farClipDistance) {\r\n        if (farClipDistance === void 0) { farClipDistance = Infinity; }\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        var tmin = -Infinity;\r\n        var tmax = +Infinity;\r\n        var xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        var yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        var tx1 = (this.left - ray.pos.x) * xinv;\r\n        var tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        var ty1 = (this.top - ray.pos.y) * yinv;\r\n        var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\r\n            return tmin;\r\n        }\r\n        return -1;\r\n    };\r\n    BoundingBox.prototype.contains = function (val) {\r\n        if (val instanceof Vector) {\r\n            return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\r\n        }\r\n        else if (val instanceof BoundingBox) {\r\n            if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Combines this bounding box and another together returning a new bounding box\r\n     * @param other  The bounding box to combine\r\n     */\r\n    BoundingBox.prototype.combine = function (other) {\r\n        var compositeBB = new BoundingBox(Math.min(this.left, other.left), Math.min(this.top, other.top), Math.max(this.right, other.right), Math.max(this.bottom, other.bottom));\r\n        return compositeBB;\r\n    };\r\n    /**\r\n     * Test wether this bounding box collides with another returning,\r\n     * the intersection vector that can be used to resolve the collision. If there\r\n     * is no collision null is returned.\r\n     * @param collidable  Other collidable to test\r\n     */\r\n    BoundingBox.prototype.collides = function (collidable) {\r\n        if (collidable instanceof BoundingBox) {\r\n            var other = collidable;\r\n            var totalBoundingBox = this.combine(other);\r\n            // If the total bounding box is less than the sum of the 2 bounds then there is collision\r\n            if (totalBoundingBox.getWidth() < other.getWidth() + this.getWidth() &&\r\n                totalBoundingBox.getHeight() < other.getHeight() + this.getHeight()) {\r\n                // collision\r\n                var overlapX = 0;\r\n                if (this.right >= other.left && this.right <= other.right) {\r\n                    overlapX = other.left - this.right;\r\n                }\r\n                else {\r\n                    overlapX = other.right - this.left;\r\n                }\r\n                var overlapY = 0;\r\n                if (this.top <= other.bottom && this.top >= other.top) {\r\n                    overlapY = other.bottom - this.top;\r\n                }\r\n                else {\r\n                    overlapY = other.top - this.bottom;\r\n                }\r\n                if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                    return new Vector(overlapX, 0);\r\n                }\r\n                else {\r\n                    return new Vector(0, overlapY);\r\n                }\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /* istanbul ignore next */\r\n    BoundingBox.prototype.debugDraw = function (ctx, color) {\r\n        if (color === void 0) { color = Color.Yellow; }\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.strokeRect(this.left, this.top, this.getWidth(), this.getHeight());\r\n    };\r\n    return BoundingBox;\r\n}());\r\nexport { BoundingBox };\r\n//# sourceMappingURL=BoundingBox.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from '../Class';\r\nimport { Promise } from '../Promises';\r\nimport { Logger } from '../Util/Log';\r\n/**\r\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\r\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\r\n *\r\n * [[include:Resources.md]]\r\n */\r\nvar Resource = /** @class */ (function (_super) {\r\n    __extends(Resource, _super);\r\n    /**\r\n     * @param path          Path to the remote resource\r\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\r\n     * @param bustCache     Whether or not to cache-bust requests\r\n     */\r\n    function Resource(path, responseType, bustCache) {\r\n        if (bustCache === void 0) { bustCache = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this.path = path;\r\n        _this.responseType = responseType;\r\n        _this.bustCache = bustCache;\r\n        _this.data = null;\r\n        _this.logger = Logger.getInstance();\r\n        _this.onprogress = function () {\r\n            return;\r\n        };\r\n        _this.oncomplete = function () {\r\n            return;\r\n        };\r\n        _this.onerror = function () {\r\n            return;\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns true if the Resource is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    Resource.prototype.isLoaded = function () {\r\n        return this.data !== null;\r\n    };\r\n    Resource.prototype.wireEngine = function (_engine) {\r\n        // override me\r\n    };\r\n    Resource.prototype._cacheBust = function (uri) {\r\n        var query = /\\?\\w*=\\w*/;\r\n        if (query.test(uri)) {\r\n            uri += '&__=' + Date.now();\r\n        }\r\n        else {\r\n            uri += '?__=' + Date.now();\r\n        }\r\n        return uri;\r\n    };\r\n    Resource.prototype._start = function () {\r\n        this.logger.debug('Started loading resource ' + this.path);\r\n    };\r\n    /**\r\n     * Begin loading the resource and returns a promise to be resolved on completion\r\n     */\r\n    Resource.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        // Exit early if we already have data\r\n        if (this.data !== null) {\r\n            this.logger.debug('Already have data for resource', this.path);\r\n            complete.resolve(this.data);\r\n            this.oncomplete();\r\n            return complete;\r\n        }\r\n        var request = new XMLHttpRequest();\r\n        request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\r\n        request.responseType = this.responseType;\r\n        request.onloadstart = function () {\r\n            _this._start();\r\n        };\r\n        request.onprogress = this.onprogress;\r\n        request.onerror = this.onerror;\r\n        request.onload = function () {\r\n            // XHR on file:// success status is 0, such as with PhantomJS\r\n            if (request.status !== 0 && request.status !== 200) {\r\n                _this.logger.error('Failed to load resource ', _this.path, ' server responded with error code', request.status);\r\n                _this.onerror(request.response);\r\n                complete.resolve(request.response);\r\n                return;\r\n            }\r\n            _this.data = _this.processData(request.response);\r\n            _this.oncomplete();\r\n            _this.logger.debug('Completed loading resource', _this.path);\r\n            complete.resolve(_this.data);\r\n        };\r\n        request.send();\r\n        return complete;\r\n    };\r\n    /**\r\n     * Returns the loaded data once the resource is loaded\r\n     */\r\n    Resource.prototype.getData = function () {\r\n        return this.data;\r\n    };\r\n    /**\r\n     * Sets the data for this resource directly\r\n     */\r\n    Resource.prototype.setData = function (data) {\r\n        this.data = this.processData(data);\r\n    };\r\n    /**\r\n     * This method is meant to be overriden to handle any additional\r\n     * processing. Such as decoding downloaded audio bits.\r\n     */\r\n    Resource.prototype.processData = function (data) {\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\r\n        // Blob requires an object url\r\n        if (this.responseType === 'blob') {\r\n            return URL.createObjectURL(data);\r\n        }\r\n        return data;\r\n    };\r\n    return Resource;\r\n}(Class));\r\nexport { Resource };\r\n//# sourceMappingURL=Resource.js.map","/**\r\n * These effects can be applied to any bitmap image but are mainly used\r\n * for [[Sprite]] effects or [[Animation]] effects.\r\n *\r\n * [[include:SpriteEffects.md]]\r\n */\r\n/**\r\n * @typedoc\r\n */\r\nimport { Color } from './Color';\r\n/**\r\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\r\n */\r\nvar Grayscale = /** @class */ (function () {\r\n    function Grayscale() {\r\n    }\r\n    Grayscale.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\r\n        pixel[firstPixel + 0] = avg;\r\n        pixel[firstPixel + 1] = avg;\r\n        pixel[firstPixel + 2] = avg;\r\n    };\r\n    return Grayscale;\r\n}());\r\nexport { Grayscale };\r\n/**\r\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\r\n */\r\nvar Invert = /** @class */ (function () {\r\n    function Invert() {\r\n    }\r\n    Invert.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\r\n        pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\r\n        pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\r\n    };\r\n    return Invert;\r\n}());\r\nexport { Invert };\r\n/**\r\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\r\n */\r\nvar Opacity = /** @class */ (function () {\r\n    /**\r\n     * @param opacity  The new opacity of the sprite from 0-1.0\r\n     */\r\n    function Opacity(opacity) {\r\n        this.opacity = opacity;\r\n    }\r\n    Opacity.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\r\n        }\r\n    };\r\n    return Opacity;\r\n}());\r\nexport { Opacity };\r\n/**\r\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\r\n * average of the original color and the provided color\r\n */\r\nvar Colorize = /** @class */ (function () {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    function Colorize(color) {\r\n        this.color = color;\r\n    }\r\n    Colorize.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\r\n            pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\r\n            pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\r\n        }\r\n    };\r\n    return Colorize;\r\n}());\r\nexport { Colorize };\r\n/**\r\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\r\n */\r\nvar Lighten = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Lighten(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Lighten.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Lighten;\r\n}());\r\nexport { Lighten };\r\n/**\r\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\r\n */\r\nvar Darken = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Darken(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Darken.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Darken;\r\n}());\r\nexport { Darken };\r\n/**\r\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\r\n */\r\nvar Saturate = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Saturate(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Saturate.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Saturate;\r\n}());\r\nexport { Saturate };\r\n/**\r\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\r\n */\r\nvar Desaturate = /** @class */ (function () {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    function Desaturate(factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.factor = factor;\r\n    }\r\n    Desaturate.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        var color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    };\r\n    return Desaturate;\r\n}());\r\nexport { Desaturate };\r\n/**\r\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\r\n * a given color\r\n */\r\nvar Fill = /** @class */ (function () {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    function Fill(color) {\r\n        this.color = color;\r\n    }\r\n    Fill.prototype.updatePixel = function (x, y, imageData) {\r\n        var firstPixel = (x + y * imageData.width) * 4;\r\n        var pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = this.color.r;\r\n            pixel[firstPixel + 1] = this.color.g;\r\n            pixel[firstPixel + 2] = this.color.b;\r\n        }\r\n    };\r\n    return Fill;\r\n}());\r\nexport { Fill };\r\n//# sourceMappingURL=SpriteEffects.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexport function Configurable(base) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var _this = _super.apply(this, args) || this;\r\n            //get the number of arguments that aren't undefined. TS passes a value to all parameters\r\n            //of whatever ctor is the implementation, so args.length doesn't work here.\r\n            var size = args.filter(function (value) {\r\n                return value !== undefined;\r\n            }).length;\r\n            if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\r\n                _this.assign(args[0]);\r\n            }\r\n            return _this;\r\n        }\r\n        class_1.prototype.assign = function (props) {\r\n            //set the value of every property that was passed in,\r\n            //if the constructor previously set this value, it will be overridden here\r\n            for (var k in props) {\r\n                if (typeof this[k] !== 'function') {\r\n                    this[k] = props[k];\r\n                }\r\n            }\r\n        };\r\n        return class_1;\r\n    }(base));\r\n}\r\n//# sourceMappingURL=Configurable.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Effects from './SpriteEffects';\r\nimport { Color } from './Color';\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport { clamp } from '../Util/Util';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar SpriteImpl = /** @class */ (function () {\r\n    /**\r\n     * @param image   The backing image texture to build the Sprite\r\n     * @param x      The x position of the sprite\r\n     * @param y      The y position of the sprite\r\n     * @param width  The width of the sprite in pixels\r\n     * @param height The height of the sprite in pixels\r\n     */\r\n    function SpriteImpl(imageOrConfig, x, y, width, height) {\r\n        var _this = this;\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.rotation = 0.0;\r\n        this.anchor = new Vector(0.0, 0.0);\r\n        this.scale = new Vector(1, 1);\r\n        this.logger = Logger.getInstance();\r\n        /**\r\n         * Draws the sprite flipped vertically\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Draws the sprite flipped horizontally\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.effects = [];\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._spriteCanvas = null;\r\n        this._spriteCtx = null;\r\n        this._pixelData = null;\r\n        this._pixelsLoaded = false;\r\n        this._dirtyEffect = false;\r\n        var image = imageOrConfig;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            x = imageOrConfig.x || imageOrConfig.x;\r\n            y = imageOrConfig.y || imageOrConfig.y;\r\n            width = imageOrConfig.drawWidth || imageOrConfig.width;\r\n            height = imageOrConfig.drawHeight || imageOrConfig.height;\r\n            image = imageOrConfig.image;\r\n            if (!image) {\r\n                var message = 'An image texture is required to contsruct a sprite';\r\n                throw new Error(message);\r\n            }\r\n        }\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this._texture = image;\r\n        this._spriteCanvas = document.createElement('canvas');\r\n        this._spriteCanvas.width = width;\r\n        this._spriteCanvas.height = height;\r\n        this._spriteCtx = this._spriteCanvas.getContext('2d');\r\n        this._texture.loaded\r\n            .then(function () {\r\n            _this._spriteCanvas.width = _this._spriteCanvas.width || _this._texture.image.naturalWidth;\r\n            _this._spriteCanvas.height = _this._spriteCanvas.height || _this._texture.image.naturalHeight;\r\n            _this._loadPixels();\r\n            _this._dirtyEffect = true;\r\n        })\r\n            .error(function (e) {\r\n            _this.logger.error('Error loading texture ', _this._texture.path, e);\r\n        });\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    Object.defineProperty(SpriteImpl.prototype, \"drawWidth\", {\r\n        get: function () {\r\n            return this.width * this.scale.x;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpriteImpl.prototype, \"drawHeight\", {\r\n        get: function () {\r\n            return this.height * this.scale.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SpriteImpl.prototype._loadPixels = function () {\r\n        if (this._texture.isLoaded() && !this._pixelsLoaded) {\r\n            var naturalWidth = this._texture.image.naturalWidth || 0;\r\n            var naturalHeight = this._texture.image.naturalHeight || 0;\r\n            if (this.width > naturalWidth) {\r\n                this.logger.warn(\"The sprite width \" + this.width + \" exceeds the width \\n                              \" + naturalWidth + \" of the backing texture \" + this._texture.path);\r\n            }\r\n            if (this.height > naturalHeight) {\r\n                this.logger.warn(\"The sprite height \" + this.height + \" exceeds the height \\n                              \" + naturalHeight + \" of the backing texture \" + this._texture.path);\r\n            }\r\n            this._spriteCtx.drawImage(this._texture.image, clamp(this.x, 0, naturalWidth), clamp(this.y, 0, naturalHeight), clamp(this.width, 0, naturalWidth), clamp(this.height, 0, naturalHeight), 0, 0, this.width, this.height);\r\n            this._pixelsLoaded = true;\r\n        }\r\n    };\r\n    /**\r\n     * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    SpriteImpl.prototype.opacity = function (value) {\r\n        this.addEffect(new Effects.Opacity(value));\r\n    };\r\n    /**\r\n     * Applies the [[Grayscale]] effect to a sprite, removing color information.\r\n     */\r\n    SpriteImpl.prototype.grayscale = function () {\r\n        this.addEffect(new Effects.Grayscale());\r\n    };\r\n    /**\r\n     * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\r\n     */\r\n    SpriteImpl.prototype.invert = function () {\r\n        this.addEffect(new Effects.Invert());\r\n    };\r\n    /**\r\n     * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    SpriteImpl.prototype.fill = function (color) {\r\n        this.addEffect(new Effects.Fill(color));\r\n    };\r\n    /**\r\n     * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\r\n     * and the provided color.\r\n     */\r\n    SpriteImpl.prototype.colorize = function (color) {\r\n        this.addEffect(new Effects.Colorize(color));\r\n    };\r\n    /**\r\n     * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Lighten(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Darken(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Saturate(factor));\r\n    };\r\n    /**\r\n     * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\r\n     */\r\n    SpriteImpl.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Desaturate(factor));\r\n    };\r\n    /**\r\n     * Adds a new [[ISpriteEffect]] to this drawing.\r\n     * @param effect  Effect to add to the this drawing\r\n     */\r\n    SpriteImpl.prototype.addEffect = function (effect) {\r\n        this.effects.push(effect);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    };\r\n    SpriteImpl.prototype.removeEffect = function (param) {\r\n        var indexToRemove = -1;\r\n        if (typeof param === 'number') {\r\n            indexToRemove = param;\r\n        }\r\n        else {\r\n            indexToRemove = this.effects.indexOf(param);\r\n        }\r\n        // bounds check\r\n        if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\r\n            return;\r\n        }\r\n        this.effects.splice(indexToRemove, 1);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    };\r\n    SpriteImpl.prototype._applyEffects = function () {\r\n        var naturalWidth = this._texture.image.naturalWidth || 0;\r\n        var naturalHeight = this._texture.image.naturalHeight || 0;\r\n        this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n        this._spriteCtx.drawImage(this._texture.image, clamp(this.x, 0, naturalWidth), clamp(this.y, 0, naturalHeight), clamp(this.width, 0, naturalWidth), clamp(this.height, 0, naturalHeight), 0, 0, this.width, this.height);\r\n        this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\r\n        var i = 0, x = 0, y = 0, len = this.effects.length;\r\n        for (i; i < len; i++) {\r\n            y = 0;\r\n            for (y; y < this.height; y++) {\r\n                x = 0;\r\n                for (x; x < this.width; x++) {\r\n                    this.effects[i].updatePixel(x, y, this._pixelData);\r\n                }\r\n            }\r\n        }\r\n        this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n        this._spriteCtx.putImageData(this._pixelData, 0, 0);\r\n        this._dirtyEffect = false;\r\n    };\r\n    /**\r\n     * Clears all effects from the drawing and return it to its original state.\r\n     */\r\n    SpriteImpl.prototype.clearEffects = function () {\r\n        this.effects.length = 0;\r\n        this._applyEffects();\r\n    };\r\n    /**\r\n     * Resets the internal state of the drawing (if any)\r\n     */\r\n    SpriteImpl.prototype.reset = function () {\r\n        // do nothing\r\n    };\r\n    SpriteImpl.prototype.debugDraw = function (ctx, x, y) {\r\n        ctx.save();\r\n        ctx.translate(x, y);\r\n        ctx.rotate(this.rotation);\r\n        var xpoint = this.drawWidth * this.anchor.x;\r\n        var ypoint = this.drawHeight * this.anchor.y;\r\n        ctx.strokeStyle = Color.Black.toString();\r\n        ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\r\n     * @param ctx  The 2D rendering context\r\n     * @param x    The x coordinate of where to draw\r\n     * @param y    The y coordinate of where to draw\r\n     */\r\n    SpriteImpl.prototype.draw = function (ctx, x, y) {\r\n        if (this._dirtyEffect) {\r\n            this._applyEffects();\r\n        }\r\n        // calculating current dimensions\r\n        ctx.save();\r\n        var xpoint = this.drawWidth * this.anchor.x;\r\n        var ypoint = this.drawHeight * this.anchor.y;\r\n        ctx.translate(x, y);\r\n        ctx.rotate(this.rotation);\r\n        // todo cache flipped sprites\r\n        if (this.flipHorizontal) {\r\n            ctx.translate(this.drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ctx.translate(0, this.drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        ctx.drawImage(this._spriteCanvas, 0, 0, this.width, this.height, -xpoint, -ypoint, this.drawWidth, this.drawHeight);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Produces a copy of the current sprite\r\n     */\r\n    SpriteImpl.prototype.clone = function () {\r\n        var result = new Sprite(this._texture, this.x, this.y, this.width, this.height);\r\n        result.scale = this.scale.clone();\r\n        result.rotation = this.rotation;\r\n        result.flipHorizontal = this.flipHorizontal;\r\n        result.flipVertical = this.flipVertical;\r\n        var i = 0, len = this.effects.length;\r\n        for (i; i < len; i++) {\r\n            result.addEffect(this.effects[i]);\r\n        }\r\n        return result;\r\n    };\r\n    return SpriteImpl;\r\n}());\r\nexport { SpriteImpl };\r\n/**\r\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\r\n * images or parts of images from a [[Texture]] resource to the screen.\r\n *\r\n * [[include:Sprites.md]]\r\n */\r\nvar Sprite = /** @class */ (function (_super) {\r\n    __extends(Sprite, _super);\r\n    function Sprite(imageOrConfig, x, y, width, height) {\r\n        return _super.call(this, imageOrConfig, x, y, width, height) || this;\r\n    }\r\n    return Sprite;\r\n}(Configurable(SpriteImpl)));\r\nexport { Sprite };\r\n//# sourceMappingURL=Sprite.js.map","/**\r\n * An enum that describes the strategies that rotation actions can use\r\n */\r\nexport var RotationType;\r\n(function (RotationType) {\r\n    /**\r\n     * Rotation via `ShortestPath` will use the smallest angle\r\n     * between the starting and ending points. This strategy is the default behavior.\r\n     */\r\n    RotationType[RotationType[\"ShortestPath\"] = 0] = \"ShortestPath\";\r\n    /**\r\n     * Rotation via `LongestPath` will use the largest angle\r\n     * between the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"LongestPath\"] = 1] = \"LongestPath\";\r\n    /**\r\n     * Rotation via `Clockwise` will travel in a clockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"Clockwise\"] = 2] = \"Clockwise\";\r\n    /**\r\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"CounterClockwise\"] = 3] = \"CounterClockwise\";\r\n})(RotationType || (RotationType = {}));\r\n//# sourceMappingURL=RotationType.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Resource } from './Resource';\r\nimport { Promise } from '../Promises';\r\nimport { Sprite } from '../Drawing/Sprite';\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[ILoadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n *\r\n * [[include:Textures.md]]\r\n */\r\nvar Texture = /** @class */ (function (_super) {\r\n    __extends(Texture, _super);\r\n    /**\r\n     * @param path       Path to the image resource\r\n     * @param bustCache  Optionally load texture with cache busting\r\n     */\r\n    function Texture(path, bustCache) {\r\n        if (bustCache === void 0) { bustCache = true; }\r\n        var _this = _super.call(this, path, 'blob', bustCache) || this;\r\n        _this.path = path;\r\n        _this.bustCache = bustCache;\r\n        /**\r\n         * A [[Promise]] that resolves when the Texture is loaded.\r\n         */\r\n        _this.loaded = new Promise();\r\n        _this._isLoaded = false;\r\n        _this._sprite = null;\r\n        _this._sprite = new Sprite(_this, 0, 0, 0, 0);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns true if the Texture is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    Texture.prototype.isLoaded = function () {\r\n        return this._isLoaded;\r\n    };\r\n    /**\r\n     * Begins loading the texture and returns a promise to be resolved on completion\r\n     */\r\n    Texture.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        var loaded = _super.prototype.load.call(this);\r\n        loaded.then(function () {\r\n            _this.image = new Image();\r\n            _this.image.addEventListener('load', function () {\r\n                _this._isLoaded = true;\r\n                _this.width = _this._sprite.width = _this.image.naturalWidth;\r\n                _this.height = _this._sprite.height = _this.image.naturalHeight;\r\n                _this.loaded.resolve(_this.image);\r\n                complete.resolve(_this.image);\r\n            });\r\n            _this.image.src = _super.prototype.getData.call(_this);\r\n        }, function () {\r\n            complete.reject('Error loading texture.');\r\n        });\r\n        return complete;\r\n    };\r\n    Texture.prototype.asSprite = function () {\r\n        return this._sprite;\r\n    };\r\n    return Texture;\r\n}(Resource));\r\nexport { Texture };\r\n//# sourceMappingURL=Texture.js.map","import { RotationType } from './RotationType';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport * as Util from '../Util/Util';\r\nvar EaseTo = /** @class */ (function () {\r\n    function EaseTo(actor, x, y, duration, easingFcn) {\r\n        this.actor = actor;\r\n        this.easingFcn = easingFcn;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1 * 1000; // 1 second\r\n        this._lerpStart = new Vector(0, 0);\r\n        this._lerpEnd = new Vector(0, 0);\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._distance = 0;\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = new Vector(x, y);\r\n    }\r\n    EaseTo.prototype._initialize = function () {\r\n        this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\r\n        this._currentLerpTime = 0;\r\n        this._distance = this._lerpStart.distance(this._lerpEnd);\r\n    };\r\n    EaseTo.prototype.update = function (delta) {\r\n        if (!this._initialized) {\r\n            this._initialize();\r\n            this._initialized = true;\r\n        }\r\n        var newX = this.actor.pos.x;\r\n        var newY = this.actor.pos.y;\r\n        if (this._currentLerpTime < this._lerpDuration) {\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n                newX =\r\n                    this._lerpStart.x -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            }\r\n            else {\r\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n                newY =\r\n                    this._lerpStart.y -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            }\r\n            else {\r\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            this.actor.pos.x = newX;\r\n            this.actor.pos.y = newY;\r\n            this._currentLerpTime += delta;\r\n        }\r\n        else {\r\n            this.actor.pos.x = this._lerpEnd.x;\r\n            this.actor.pos.y = this._lerpEnd.y;\r\n            //this._lerpStart = null;\r\n            //this._lerpEnd = null;\r\n            //this._currentLerpTime = 0;\r\n        }\r\n    };\r\n    EaseTo.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\r\n    };\r\n    EaseTo.prototype.reset = function () {\r\n        this._initialized = false;\r\n    };\r\n    EaseTo.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    return EaseTo;\r\n}());\r\nexport { EaseTo };\r\nvar MoveTo = /** @class */ (function () {\r\n    function MoveTo(actor, destx, desty, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = new Vector(destx, desty);\r\n        this._speed = speed;\r\n    }\r\n    MoveTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete(this._actor)) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    MoveTo.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\r\n    };\r\n    MoveTo.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    MoveTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return MoveTo;\r\n}());\r\nexport { MoveTo };\r\nvar MoveBy = /** @class */ (function () {\r\n    function MoveBy(actor, destx, desty, time) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = new Vector(destx, desty);\r\n        if (time <= 0) {\r\n            Logger.getInstance().error('Attempted to moveBy time less than or equal to zero : ' + time);\r\n            throw new Error('Cannot move in time <= 0');\r\n        }\r\n        this._time = time;\r\n    }\r\n    MoveBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n            this._speed = this._distance / (this._time / 1000);\r\n        }\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete(this._actor)) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    MoveBy.prototype.isComplete = function (actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\r\n    };\r\n    MoveBy.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    MoveBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return MoveBy;\r\n}());\r\nexport { MoveBy };\r\nvar Follow = /** @class */ (function () {\r\n    function Follow(actor, actorToFollow, followDistance) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actorToFollow = actorToFollow;\r\n        this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n        this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\r\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\r\n        this._speed = 0;\r\n    }\r\n    Follow.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        var actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\r\n        if (actorToFollowSpeed !== 0) {\r\n            this._speed = actorToFollowSpeed;\r\n        }\r\n        this._current.x = this._actor.pos.x;\r\n        this._current.y = this._actor.pos.y;\r\n        this._end.x = this._actorToFollow.pos.x;\r\n        this._end.y = this._actorToFollow.pos.y;\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        if (this._distanceBetween >= this._maximumDistance) {\r\n            var m = this._dir.scale(this._speed);\r\n            this._actor.vel.x = m.x;\r\n            this._actor.vel.y = m.y;\r\n        }\r\n        else {\r\n            this._actor.vel.x = 0;\r\n            this._actor.vel.y = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            // TODO this should never occur\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    Follow.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    Follow.prototype.isComplete = function () {\r\n        // the actor following should never stop unless specified to do so\r\n        return this._stopped;\r\n    };\r\n    Follow.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Follow;\r\n}());\r\nexport { Follow };\r\nvar Meet = /** @class */ (function () {\r\n    function Meet(actor, actorToMeet, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._speedWasSpecified = false;\r\n        this._actor = actor;\r\n        this._actorToMeet = actorToMeet;\r\n        this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n        this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\r\n        this._speed = speed || 0;\r\n        if (speed !== undefined) {\r\n            this._speedWasSpecified = true;\r\n        }\r\n    }\r\n    Meet.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        var actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\r\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\r\n            this._speed = actorToMeetSpeed;\r\n        }\r\n        this._current.x = this._actor.pos.x;\r\n        this._current.y = this._actor.pos.y;\r\n        this._end.x = this._actorToMeet.pos.x;\r\n        this._end.y = this._actorToMeet.pos.y;\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        var m = this._dir.scale(this._speed);\r\n        this._actor.vel.x = m.x;\r\n        this._actor.vel.y = m.y;\r\n        if (this.isComplete()) {\r\n            this._actor.pos.x = this._end.x;\r\n            this._actor.pos.y = this._end.y;\r\n            this._actor.vel.y = 0;\r\n            this._actor.vel.x = 0;\r\n        }\r\n    };\r\n    Meet.prototype.isComplete = function () {\r\n        return this._stopped || this._distanceBetween <= 1;\r\n    };\r\n    Meet.prototype.stop = function () {\r\n        this._actor.vel.y = 0;\r\n        this._actor.vel.x = 0;\r\n        this._stopped = true;\r\n    };\r\n    Meet.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Meet;\r\n}());\r\nexport { Meet };\r\nvar RotateTo = /** @class */ (function () {\r\n    function RotateTo(actor, angleRadians, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = angleRadians;\r\n        this._speed = speed;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    RotateTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._actor.rotation;\r\n            var distance1 = Math.abs(this._end - this._start);\r\n            var distance2 = Util.TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (!this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._actor.rx = this._direction * this._speed;\r\n        if (this.isComplete()) {\r\n            this._actor.rotation = this._end;\r\n            this._actor.rx = 0;\r\n            this._stopped = true;\r\n        }\r\n    };\r\n    RotateTo.prototype.isComplete = function () {\r\n        var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    };\r\n    RotateTo.prototype.stop = function () {\r\n        this._actor.rx = 0;\r\n        this._stopped = true;\r\n    };\r\n    RotateTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return RotateTo;\r\n}());\r\nexport { RotateTo };\r\nvar RotateBy = /** @class */ (function () {\r\n    function RotateBy(actor, angleRadians, time, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._end = angleRadians;\r\n        this._time = time;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    RotateBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._actor.rotation;\r\n            var distance1 = Math.abs(this._end - this._start);\r\n            var distance2 = Util.TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortDistance >= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (this._shortDistance <= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n            this._speed = Math.abs((this._distance / this._time) * 1000);\r\n        }\r\n        this._actor.rx = this._direction * this._speed;\r\n        if (this.isComplete()) {\r\n            this._actor.rotation = this._end;\r\n            this._actor.rx = 0;\r\n            this._stopped = true;\r\n        }\r\n    };\r\n    RotateBy.prototype.isComplete = function () {\r\n        var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    };\r\n    RotateBy.prototype.stop = function () {\r\n        this._actor.rx = 0;\r\n        this._stopped = true;\r\n    };\r\n    RotateBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return RotateBy;\r\n}());\r\nexport { RotateBy };\r\nvar ScaleTo = /** @class */ (function () {\r\n    function ScaleTo(actor, scaleX, scaleY, speedX, speedY) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = speedX;\r\n        this._speedY = speedY;\r\n    }\r\n    ScaleTo.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._actor.scale.x;\r\n            this._startY = this._actor.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\r\n            var directionX = this._endY < this._startY ? -1 : 1;\r\n            this._actor.sx = this._speedX * directionX;\r\n        }\r\n        else {\r\n            this._actor.sx = 0;\r\n        }\r\n        if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\r\n            var directionY = this._endY < this._startY ? -1 : 1;\r\n            this._actor.sy = this._speedY * directionY;\r\n        }\r\n        else {\r\n            this._actor.sy = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._actor.scale.x = this._endX;\r\n            this._actor.scale.y = this._endY;\r\n            this._actor.sx = 0;\r\n            this._actor.sy = 0;\r\n        }\r\n    };\r\n    ScaleTo.prototype.isComplete = function () {\r\n        return (this._stopped ||\r\n            (Math.abs(this._actor.scale.y - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n    };\r\n    ScaleTo.prototype.stop = function () {\r\n        this._actor.sx = 0;\r\n        this._actor.sy = 0;\r\n        this._stopped = true;\r\n    };\r\n    ScaleTo.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return ScaleTo;\r\n}());\r\nexport { ScaleTo };\r\nvar ScaleBy = /** @class */ (function () {\r\n    function ScaleBy(actor, scaleX, scaleY, time) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = ((this._endX - this._actor.scale.x) / time) * 1000;\r\n        this._speedY = ((this._endY - this._actor.scale.y) / time) * 1000;\r\n    }\r\n    ScaleBy.prototype.update = function (_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._actor.scale.x;\r\n            this._startY = this._actor.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        var directionX = this._endX < this._startX ? -1 : 1;\r\n        var directionY = this._endY < this._startY ? -1 : 1;\r\n        this._actor.sx = this._speedX * directionX;\r\n        this._actor.sy = this._speedY * directionY;\r\n        if (this.isComplete()) {\r\n            this._actor.scale.x = this._endX;\r\n            this._actor.scale.y = this._endY;\r\n            this._actor.sx = 0;\r\n            this._actor.sy = 0;\r\n        }\r\n    };\r\n    ScaleBy.prototype.isComplete = function () {\r\n        return (this._stopped ||\r\n            (Math.abs(this._actor.scale.x - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n    };\r\n    ScaleBy.prototype.stop = function () {\r\n        this._actor.sx = 0;\r\n        this._actor.sy = 0;\r\n        this._stopped = true;\r\n    };\r\n    ScaleBy.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return ScaleBy;\r\n}());\r\nexport { ScaleBy };\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(actor, delay) {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._delay = delay;\r\n    }\r\n    Delay.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        this._elapsedTime += delta;\r\n    };\r\n    Delay.prototype.isComplete = function () {\r\n        return this._stopped || this._elapsedTime >= this._delay;\r\n    };\r\n    Delay.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Delay.prototype.reset = function () {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n    };\r\n    return Delay;\r\n}());\r\nexport { Delay };\r\nvar Blink = /** @class */ (function () {\r\n    function Blink(actor, timeVisible, timeNotVisible, numBlinks) {\r\n        if (numBlinks === void 0) { numBlinks = 1; }\r\n        this._timeVisible = 0;\r\n        this._timeNotVisible = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n        this._stopped = false;\r\n        this._started = false;\r\n        this._actor = actor;\r\n        this._timeVisible = timeVisible;\r\n        this._timeNotVisible = timeNotVisible;\r\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\r\n    }\r\n    Blink.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this._elapsedTime += delta;\r\n        this._totalTime += delta;\r\n        if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\r\n            this._actor.visible = false;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\r\n            this._actor.visible = true;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._actor.visible = true;\r\n        }\r\n    };\r\n    Blink.prototype.isComplete = function () {\r\n        return this._stopped || this._totalTime >= this._duration;\r\n    };\r\n    Blink.prototype.stop = function () {\r\n        this._actor.visible = true;\r\n        this._stopped = true;\r\n    };\r\n    Blink.prototype.reset = function () {\r\n        this._started = false;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n    };\r\n    return Blink;\r\n}());\r\nexport { Blink };\r\nvar Fade = /** @class */ (function () {\r\n    function Fade(actor, endOpacity, speed) {\r\n        this._multiplier = 1;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._endOpacity = endOpacity;\r\n        this._speed = speed;\r\n    }\r\n    Fade.prototype.update = function (delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            // determine direction when we start\r\n            if (this._endOpacity < this._actor.opacity) {\r\n                this._multiplier = -1;\r\n            }\r\n            else {\r\n                this._multiplier = 1;\r\n            }\r\n        }\r\n        if (this._speed > 0) {\r\n            this._actor.opacity += (this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta)) / this._speed;\r\n        }\r\n        this._speed -= delta;\r\n        if (this.isComplete()) {\r\n            this._actor.opacity = this._endOpacity;\r\n        }\r\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\r\n    };\r\n    Fade.prototype.isComplete = function () {\r\n        return this._stopped || Math.abs(this._actor.opacity - this._endOpacity) < 0.05;\r\n    };\r\n    Fade.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Fade.prototype.reset = function () {\r\n        this._started = false;\r\n    };\r\n    return Fade;\r\n}());\r\nexport { Fade };\r\nvar Die = /** @class */ (function () {\r\n    function Die(actor) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n    }\r\n    Die.prototype.update = function (_delta) {\r\n        this._actor.actionQueue.clearActions();\r\n        this._actor.kill();\r\n        this._stopped = true;\r\n    };\r\n    Die.prototype.isComplete = function () {\r\n        return this._stopped;\r\n    };\r\n    Die.prototype.stop = function () {\r\n        return;\r\n    };\r\n    Die.prototype.reset = function () {\r\n        return;\r\n    };\r\n    return Die;\r\n}());\r\nexport { Die };\r\nvar CallMethod = /** @class */ (function () {\r\n    function CallMethod(actor, method) {\r\n        this._method = null;\r\n        this._actor = null;\r\n        this._hasBeenCalled = false;\r\n        this._actor = actor;\r\n        this._method = method;\r\n    }\r\n    CallMethod.prototype.update = function (_delta) {\r\n        this._method.call(this._actor);\r\n        this._hasBeenCalled = true;\r\n    };\r\n    CallMethod.prototype.isComplete = function () {\r\n        return this._hasBeenCalled;\r\n    };\r\n    CallMethod.prototype.reset = function () {\r\n        this._hasBeenCalled = false;\r\n    };\r\n    CallMethod.prototype.stop = function () {\r\n        this._hasBeenCalled = true;\r\n    };\r\n    return CallMethod;\r\n}());\r\nexport { CallMethod };\r\nvar Repeat = /** @class */ (function () {\r\n    function Repeat(actor, repeat, actions) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actionQueue = new ActionQueue(actor);\r\n        this._repeat = repeat;\r\n        this._originalRepeat = repeat;\r\n        var i = 0, len = actions.length;\r\n        for (i; i < len; i++) {\r\n            actions[i].reset();\r\n            this._actionQueue.add(actions[i]);\r\n        }\r\n    }\r\n    Repeat.prototype.update = function (delta) {\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        if (!this._actionQueue.hasNext()) {\r\n            this._actionQueue.reset();\r\n            this._repeat--;\r\n        }\r\n        this._actionQueue.update(delta);\r\n    };\r\n    Repeat.prototype.isComplete = function () {\r\n        return this._stopped || this._repeat <= 0;\r\n    };\r\n    Repeat.prototype.stop = function () {\r\n        this._stopped = true;\r\n    };\r\n    Repeat.prototype.reset = function () {\r\n        this._repeat = this._originalRepeat;\r\n    };\r\n    return Repeat;\r\n}());\r\nexport { Repeat };\r\nvar RepeatForever = /** @class */ (function () {\r\n    function RepeatForever(actor, actions) {\r\n        this._stopped = false;\r\n        this._actor = actor;\r\n        this._actionQueue = new ActionQueue(actor);\r\n        var i = 0, len = actions.length;\r\n        for (i; i < len; i++) {\r\n            actions[i].reset();\r\n            this._actionQueue.add(actions[i]);\r\n        }\r\n    }\r\n    RepeatForever.prototype.update = function (delta) {\r\n        this.x = this._actor.pos.x;\r\n        this.y = this._actor.pos.y;\r\n        if (this._stopped) {\r\n            return;\r\n        }\r\n        if (!this._actionQueue.hasNext()) {\r\n            this._actionQueue.reset();\r\n        }\r\n        this._actionQueue.update(delta);\r\n    };\r\n    RepeatForever.prototype.isComplete = function () {\r\n        return this._stopped;\r\n    };\r\n    RepeatForever.prototype.stop = function () {\r\n        this._stopped = true;\r\n        this._actionQueue.clearActions();\r\n    };\r\n    RepeatForever.prototype.reset = function () {\r\n        return;\r\n    };\r\n    return RepeatForever;\r\n}());\r\nexport { RepeatForever };\r\n/**\r\n * Action Queues\r\n *\r\n * Action queues are part of the [[ActionContext|Action API]] and\r\n * store the list of actions to be executed for an [[Actor]].\r\n *\r\n * Actors implement [[Actor.actions]] which can be manipulated by\r\n * advanced users to adjust the actions currently being executed in the\r\n * queue.\r\n */\r\nvar ActionQueue = /** @class */ (function () {\r\n    function ActionQueue(actor) {\r\n        this._actions = [];\r\n        this._completedActions = [];\r\n        this._actor = actor;\r\n    }\r\n    ActionQueue.prototype.add = function (action) {\r\n        this._actions.push(action);\r\n    };\r\n    ActionQueue.prototype.remove = function (action) {\r\n        var index = this._actions.indexOf(action);\r\n        this._actions.splice(index, 1);\r\n    };\r\n    ActionQueue.prototype.clearActions = function () {\r\n        this._actions.length = 0;\r\n        this._completedActions.length = 0;\r\n        if (this._currentAction) {\r\n            this._currentAction.stop();\r\n        }\r\n    };\r\n    ActionQueue.prototype.getActions = function () {\r\n        return this._actions.concat(this._completedActions);\r\n    };\r\n    ActionQueue.prototype.hasNext = function () {\r\n        return this._actions.length > 0;\r\n    };\r\n    ActionQueue.prototype.reset = function () {\r\n        this._actions = this.getActions();\r\n        var i = 0, len = this._actions.length;\r\n        for (i; i < len; i++) {\r\n            this._actions[i].reset();\r\n        }\r\n        this._completedActions = [];\r\n    };\r\n    ActionQueue.prototype.update = function (delta) {\r\n        if (this._actions.length > 0) {\r\n            this._currentAction = this._actions[0];\r\n            this._currentAction.update(delta);\r\n            if (this._currentAction.isComplete(this._actor)) {\r\n                this._completedActions.push(this._actions.shift());\r\n            }\r\n        }\r\n    };\r\n    return ActionQueue;\r\n}());\r\nexport { ActionQueue };\r\n//# sourceMappingURL=Action.js.map","import { Vector } from '../Algebra';\r\n/**\r\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\r\n * Given a time, the function will return a value from positive startValue to positive endValue.\r\n *\r\n * ```js\r\n * function Linear (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInQuad (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutQuad (t) {\r\n *    return t * (2 - t);\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutQuad (t) {\r\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInCubic (t) {\r\n *    return t * t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutCubic (t) {\r\n *    return (--t) * t * t + 1;\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutCubic (t) {\r\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n * }\r\n * ```\r\n */\r\nvar EasingFunctions = /** @class */ (function () {\r\n    function EasingFunctions() {\r\n    }\r\n    EasingFunctions.CreateReversableEasingFunction = function (easing) {\r\n        return function (time, start, end, duration) {\r\n            if (end < start) {\r\n                return start - (easing(time, end, start, duration) - end);\r\n            }\r\n            else {\r\n                return easing(time, start, end, duration);\r\n            }\r\n        };\r\n    };\r\n    EasingFunctions.CreateVectorEasingFunction = function (easing) {\r\n        return function (time, start, end, duration) {\r\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\r\n        };\r\n    };\r\n    EasingFunctions.Linear = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        return (endValue * currentTime) / duration + startValue;\r\n    });\r\n    EasingFunctions.EaseInQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return endValue * currentTime * currentTime + startValue;\r\n    });\r\n    EasingFunctions.EaseOutQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return -endValue * currentTime * (currentTime - 2) + startValue;\r\n    });\r\n    EasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration / 2;\r\n        if (currentTime < 1) {\r\n            return (endValue / 2) * currentTime * currentTime + startValue;\r\n        }\r\n        currentTime--;\r\n        return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\r\n    });\r\n    EasingFunctions.EaseInCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        return endValue * currentTime * currentTime * currentTime + startValue;\r\n    });\r\n    EasingFunctions.EaseOutCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration;\r\n        currentTime--;\r\n        return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\r\n    });\r\n    EasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversableEasingFunction(function (currentTime, startValue, endValue, duration) {\r\n        endValue = endValue - startValue;\r\n        currentTime /= duration / 2;\r\n        if (currentTime < 1) {\r\n            return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\r\n        }\r\n        currentTime -= 2;\r\n        return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\r\n    });\r\n    return EasingFunctions;\r\n}());\r\nexport { EasingFunctions };\r\n//# sourceMappingURL=EasingFunctions.js.map","import * as Actions from './Action';\r\nimport { Promise } from '../Promises';\r\nimport { EasingFunctions } from '../Util/EasingFunctions';\r\n/**\r\n * The fluent Action API allows you to perform \"actions\" on\r\n * [[Actor|Actors]] such as following, moving, rotating, and\r\n * more. You can implement your own actions by implementing\r\n * the [[IAction]] interface.\r\n *\r\n * [[include:Actions.md]]\r\n */\r\nvar ActionContext = /** @class */ (function () {\r\n    function ActionContext() {\r\n        this._actors = [];\r\n        this._queues = [];\r\n        if (arguments !== null) {\r\n            this._actors = Array.prototype.slice.call(arguments, 0);\r\n            this._queues = this._actors.map(function (a) {\r\n                return a.actionQueue;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    ActionContext.prototype.clearActions = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].clearActions();\r\n        }\r\n    };\r\n    ActionContext.prototype.addActorToContext = function (actor) {\r\n        this._actors.push(actor);\r\n        // if we run into problems replace the line below with:\r\n        this._queues.push(actor.actionQueue);\r\n    };\r\n    ActionContext.prototype.removeActorFromContext = function (actor) {\r\n        var index = this._actors.indexOf(actor);\r\n        if (index > -1) {\r\n            this._actors.splice(index, 1);\r\n            this._queues.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified `x` and `y` position over the\r\n     * specified duration using a given [[EasingFunctions]] and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param x         The x location to move the actor to\r\n     * @param y         The y location to move the actor to\r\n     * @param duration  The time it should take the actor to move to the new location in milliseconds\r\n     * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\r\n     */\r\n    ActionContext.prototype.easeTo = function (x, y, duration, easingFcn) {\r\n        if (easingFcn === void 0) { easingFcn = EasingFunctions.Linear; }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.EaseTo(this._actors[i], x, y, duration, easingFcn));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified x and y position at the\r\n     * speed specified (in pixels per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param x      The x location to move the actor to\r\n     * @param y      The y location to move the actor to\r\n     * @param speed  The speed in pixels per second to move\r\n     */\r\n    ActionContext.prototype.moveTo = function (x, y, speed) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.MoveTo(this._actors[i], x, y, speed));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will move an actor to the specified x and y position by a\r\n     * certain time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param x     The x location to move the actor to\r\n     * @param y     The y location to move the actor to\r\n     * @param time  The time it should take the actor to move to the new location in milliseconds\r\n     */\r\n    ActionContext.prototype.moveBy = function (x, y, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.MoveBy(this._actors[i], x, y, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    ActionContext.prototype.rotateTo = function (angleRadians, speed, rotationType) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateTo(this._actors[i], angleRadians, speed, rotationType));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will rotate an actor to the specified angle by a certain\r\n     * time (in milliseconds) and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param time          The time it should take the actor to complete the rotation in milliseconds\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    ActionContext.prototype.rotateBy = function (angleRadians, time, rotationType) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateBy(this._actors[i], angleRadians, time, rotationType));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will scale an actor to the specified size at the speed\r\n     * specified (in magnitude increase per second) and return back the\r\n     * actor. This method is part of the actor 'Action' fluent API allowing\r\n     * action chaining.\r\n     * @param sizeX   The scaling factor to apply on X axis\r\n     * @param sizeY   The scaling factor to apply on Y axis\r\n     * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\r\n     * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\r\n     */\r\n    ActionContext.prototype.scaleTo = function (sizeX, sizeY, speedX, speedY) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.ScaleTo(this._actors[i], sizeX, sizeY, speedX, speedY));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will scale an actor to the specified size by a certain time\r\n     * (in milliseconds) and return back the actor. This method is part of the\r\n     * actor 'Action' fluent API allowing action chaining.\r\n     * @param sizeX   The scaling factor to apply on X axis\r\n     * @param sizeY   The scaling factor to apply on Y axis\r\n     * @param time    The time it should take to complete the scaling in milliseconds\r\n     */\r\n    ActionContext.prototype.scaleBy = function (sizeX, sizeY, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.ScaleBy(this._actors[i], sizeX, sizeY, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    ActionContext.prototype.blink = function (timeVisible, timeNotVisible, numBlinks) {\r\n        if (numBlinks === void 0) { numBlinks = 1; }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Blink(this._actors[i], timeVisible, timeNotVisible, numBlinks));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    ActionContext.prototype.fade = function (opacity, time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Fade(this._actors[i], opacity, time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    ActionContext.prototype.delay = function (time) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Delay(this._actors[i], time));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous actions. Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    ActionContext.prototype.die = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Die(this._actors[i]));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    ActionContext.prototype.callMethod = function (method) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.CallMethod(this._actors[i], method));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to repeat all of the previously\r\n     * called actions a certain number of times. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    ActionContext.prototype.repeat = function (times) {\r\n        if (!times) {\r\n            this.repeatForever();\r\n            return this;\r\n        }\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.Repeat(this._actors[i], times, this._actors[i].actionQueue.getActions()));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to repeat all of the previously\r\n     * called actions forever. This method is part of the actor 'Action'\r\n     * fluent API allowing action chaining.\r\n     */\r\n    ActionContext.prototype.repeatForever = function () {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RepeatForever(this._actors[i], this._actors[i].actionQueue.getActions()));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to follow another at a specified distance\r\n     * @param actor           The actor to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    ActionContext.prototype.follow = function (actor, followDistance) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            if (followDistance === undefined) {\r\n                this._queues[i].add(new Actions.Follow(this._actors[i], actor));\r\n            }\r\n            else {\r\n                this._queues[i].add(new Actions.Follow(this._actors[i], actor, followDistance));\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * This method will cause the actor to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param actor  The actor to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    ActionContext.prototype.meet = function (actor, speed) {\r\n        var i = 0, len = this._queues.length;\r\n        for (i; i < len; i++) {\r\n            if (speed === undefined) {\r\n                this._queues[i].add(new Actions.Meet(this._actors[i], actor));\r\n            }\r\n            else {\r\n                this._queues[i].add(new Actions.Meet(this._actors[i], actor, speed));\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    ActionContext.prototype.asPromise = function () {\r\n        var _this = this;\r\n        var promises = this._queues.map(function (q, i) {\r\n            var temp = new Promise();\r\n            q.add(new Actions.CallMethod(_this._actors[i], function () {\r\n                temp.resolve();\r\n            }));\r\n            return temp;\r\n        });\r\n        return Promise.join.apply(this, promises);\r\n    };\r\n    return ActionContext;\r\n}());\r\nexport { ActionContext };\r\n//# sourceMappingURL=ActionContext.js.map","import { Color } from '../Drawing/Color';\r\n/**\r\n * Draw a line on canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param color The color of the line\r\n * @param x1 The start x coordinate\r\n * @param y1 The start y coordinate\r\n * @param x2 The ending x coordinate\r\n * @param y2 The ending y coordinate\r\n * @param thickness The line thickness\r\n * @param cap The [[LineCapStyle]] (butt, round, or square)\r\n */\r\n/* istanbul ignore next */\r\nexport function line(ctx, color, x1, y1, x2, y2, thickness, cap) {\r\n    if (color === void 0) { color = Color.Red.clone(); }\r\n    if (thickness === void 0) { thickness = 1; }\r\n    if (cap === void 0) { cap = 'butt'; }\r\n    ctx.beginPath();\r\n    ctx.lineWidth = thickness;\r\n    ctx.lineCap = cap;\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a point onto the canvas.\r\n */\r\n/* istanbul ignore next */\r\nexport function point(ctx, color, point) {\r\n    if (color === void 0) { color = Color.Red.clone(); }\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a line onto the canvas starting a origin point.\r\n */\r\n/* istanbul ignore next */\r\nexport function vector(ctx, color, origin, vector, scale) {\r\n    if (scale === void 0) { scale = 1.0; }\r\n    var c = color ? color.toString() : 'blue';\r\n    var v = vector.scale(scale);\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = c;\r\n    ctx.moveTo(origin.x, origin.y);\r\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw a round rectangle on a canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param x The top-left x coordinate\r\n * @param y The top-left y coordinate\r\n * @param width The width of the rectangle\r\n * @param height The height of the rectangle\r\n * @param radius The border radius of the rectangle\r\n * @param fill The [[Color]] to fill rectangle with\r\n * @param stroke The [[Color]] to stroke rectangle with\r\n */\r\nexport function roundRect(ctx, x, y, width, height, radius, stroke, fill) {\r\n    if (radius === void 0) { radius = 5; }\r\n    if (stroke === void 0) { stroke = Color.White; }\r\n    if (fill === void 0) { fill = null; }\r\n    var br;\r\n    if (typeof radius === 'number') {\r\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\r\n    }\r\n    else {\r\n        var defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\r\n        for (var prop in defaultRadius) {\r\n            if (defaultRadius.hasOwnProperty(prop)) {\r\n                var side = prop;\r\n                br[side] = radius[side] || defaultRadius[side];\r\n            }\r\n        }\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + br.tl, y);\r\n    ctx.lineTo(x + width - br.tr, y);\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\r\n    ctx.lineTo(x + width, y + height - br.br);\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\r\n    ctx.lineTo(x + br.bl, y + height);\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\r\n    ctx.lineTo(x, y + br.tl);\r\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\nexport function circle(ctx, x, y, radius, stroke, fill) {\r\n    if (stroke === void 0) { stroke = Color.White; }\r\n    if (fill === void 0) { fill = null; }\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n//# sourceMappingURL=DrawUtil.js.map","import { Physics } from './../Physics';\r\nimport { Color } from './../Drawing/Color';\r\nimport { CollisionType } from '../Actor';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\n/**\r\n * Models a potential collision between 2 bodies\r\n */\r\nvar Pair = /** @class */ (function () {\r\n    function Pair(bodyA, bodyB) {\r\n        this.bodyA = bodyA;\r\n        this.bodyB = bodyB;\r\n        this.id = null;\r\n        this.collision = null;\r\n        this.id = Pair.calculatePairHash(bodyA, bodyB);\r\n    }\r\n    Object.defineProperty(Pair.prototype, \"canCollide\", {\r\n        /**\r\n         * Returns whether or not it is possible for the pairs to collide\r\n         */\r\n        get: function () {\r\n            var actorA = this.bodyA.actor;\r\n            var actorB = this.bodyB.actor;\r\n            // if both are fixed short circuit\r\n            if (actorA.collisionType === CollisionType.Fixed && actorB.collisionType === CollisionType.Fixed) {\r\n                return false;\r\n            }\r\n            // if the other is prevent collision or is dead short circuit\r\n            if (actorB.collisionType === CollisionType.PreventCollision || actorB.isKilled()) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Runs the collison intersection logic on the members of this pair\r\n     */\r\n    Pair.prototype.collide = function () {\r\n        this.collision = this.bodyA.collisionArea.collide(this.bodyB.collisionArea);\r\n    };\r\n    /**\r\n     * Resovles the collision body position and velocity if a collision occured\r\n     */\r\n    Pair.prototype.resolve = function (strategy) {\r\n        if (this.collision) {\r\n            this.collision.resolve(strategy);\r\n        }\r\n    };\r\n    /**\r\n     * Calculates the unique pair hash id for this collision pair\r\n     */\r\n    Pair.calculatePairHash = function (bodyA, bodyB) {\r\n        if (bodyA.actor.id < bodyB.actor.id) {\r\n            return \"#\" + bodyA.actor.id + \"+\" + bodyB.actor.id;\r\n        }\r\n        else {\r\n            return \"#\" + bodyB.actor.id + \"+\" + bodyA.actor.id;\r\n        }\r\n    };\r\n    /* istanbul ignore next */\r\n    Pair.prototype.debugDraw = function (ctx) {\r\n        if (this.collision) {\r\n            if (Physics.showContacts) {\r\n                DrawUtil.point(ctx, Color.Red, this.collision.point);\r\n            }\r\n            if (Physics.showCollisionNormals) {\r\n                DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\r\n            }\r\n        }\r\n    };\r\n    return Pair;\r\n}());\r\nexport { Pair };\r\n//# sourceMappingURL=Pair.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Physics } from './Physics';\r\nimport { Class } from './Class';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\nimport { Texture } from './Resources/Texture';\r\nimport { InitializeEvent, KillEvent, PreUpdateEvent, PreDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent, PostKillEvent, PreKillEvent } from './Events';\r\nimport { Color } from './Drawing/Color';\r\nimport { Sprite } from './Drawing/Sprite';\r\nimport { Logger } from './Util/Log';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { Vector } from './Algebra';\r\nimport { Body } from './Collision/Body';\r\nimport { Side } from './Collision/Side';\r\nimport { Configurable } from './Configurable';\r\nimport * as Traits from './Traits/Index';\r\nimport * as Effects from './Drawing/SpriteEffects';\r\nimport * as Util from './Util/Util';\r\n/**\r\n * @hidden\r\n */\r\nvar ActorImpl = /** @class */ (function (_super) {\r\n    __extends(ActorImpl, _super);\r\n    // #endregion\r\n    /**\r\n     * @param x       The starting x coordinate of the actor\r\n     * @param y       The starting y coordinate of the actor\r\n     * @param width   The starting width of the actor\r\n     * @param height  The starting height of the actor\r\n     * @param color   The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\r\n     * initial [[opacity]].\r\n     */\r\n    function ActorImpl(xOrConfig, y, width, height, color) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * The unique identifier for the actor\r\n         */\r\n        _this.id = ActorImpl.maxId++;\r\n        /**\r\n         * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\r\n         * acceleration, mass, inertia, etc.\r\n         */\r\n        _this.body = new Body(_this);\r\n        /**\r\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n         */\r\n        _this.oldAcc = Vector.Zero.clone();\r\n        _this._height = 0;\r\n        _this._width = 0;\r\n        /**\r\n         * The scale vector of the actor\r\n         */\r\n        _this.scale = Vector.One.clone();\r\n        /**\r\n         * The scale of the actor last frame\r\n         */\r\n        _this.oldScale = Vector.One.clone();\r\n        /**\r\n         * The x scalar velocity of the actor in scale/second\r\n         */\r\n        _this.sx = 0; //scale/sec\r\n        /**\r\n         * The y scalar velocity of the actor in scale/second\r\n         */\r\n        _this.sy = 0; //scale/sec\r\n        /**\r\n         * Indicates whether the actor is physically in the viewport\r\n         */\r\n        _this.isOffScreen = false;\r\n        /**\r\n         * The visibility of an actor\r\n         */\r\n        _this.visible = true;\r\n        /**\r\n         * The opacity of an actor. Passing in a color in the [[constructor]] will use the\r\n         * color's opacity.\r\n         */\r\n        _this.opacity = 1;\r\n        _this.previousOpacity = 1;\r\n        /**\r\n         * Convenience reference to the global logger\r\n         */\r\n        _this.logger = Logger.getInstance();\r\n        /**\r\n         * The scene that the actor is in\r\n         */\r\n        _this.scene = null;\r\n        /**\r\n         * The parent of this actor\r\n         */\r\n        _this.parent = null;\r\n        // TODO: Replace this with the new actor collection once z-indexing is built\r\n        /**\r\n         * The children of this actor\r\n         */\r\n        _this.children = [];\r\n        /**\r\n         * Gets or sets the current collision type of this actor. By\r\n         * default it is ([[CollisionType.PreventCollision]]).\r\n         */\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.collisionGroups = [];\r\n        /**\r\n         * Flag to be set when any property change would result in a geometry recalculation\r\n         * @internal\r\n         */\r\n        _this._geometryDirty = false;\r\n        _this._collisionHandlers = {};\r\n        _this._isInitialized = false;\r\n        _this.frames = {};\r\n        _this._effectsDirty = false;\r\n        /**\r\n         * Access to the current drawing for the actor, this can be\r\n         * an [[Animation]], [[Sprite]], or [[Polygon]].\r\n         * Set drawings with [[setDrawing]].\r\n         */\r\n        _this.currentDrawing = null;\r\n        /**\r\n         * Modify the current actor update pipeline.\r\n         */\r\n        _this.traits = [];\r\n        /**\r\n         * Whether or not to enable the [[CapturePointer]] trait that propagates\r\n         * pointer events to this actor\r\n         */\r\n        _this.enableCapturePointer = false;\r\n        /**\r\n         * Configuration for [[CapturePointer]] trait\r\n         */\r\n        _this.capturePointer = {\r\n            captureMoveEvents: false,\r\n            captureDragEvents: false\r\n        };\r\n        _this._zIndex = 0;\r\n        _this._isKilled = false;\r\n        _this._opacityFx = new Effects.Opacity(_this.opacity);\r\n        // #region Events\r\n        _this._capturePointerEvents = [\r\n            'pointerup',\r\n            'pointerdown',\r\n            'pointermove',\r\n            'pointerenter',\r\n            'pointerleave',\r\n            'pointerdragstart',\r\n            'pointerdragend',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        _this._captureMoveEvents = [\r\n            'pointermove',\r\n            'pointerenter',\r\n            'pointerleave',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        _this._captureDragEvents = [\r\n            'pointerdragstart',\r\n            'pointerdragend',\r\n            'pointerdragmove',\r\n            'pointerdragenter',\r\n            'pointerdragleave'\r\n        ];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.pos ? config.pos.x : config.x;\r\n            y = config.pos ? config.pos.y : config.y;\r\n            width = config.width;\r\n            height = config.height;\r\n        }\r\n        _this.pos.x = xOrConfig || 0;\r\n        _this.pos.y = y || 0;\r\n        _this._width = width || 0;\r\n        _this._height = height || 0;\r\n        if (color) {\r\n            _this.color = color;\r\n            // set default opacity of an actor to the color\r\n            _this.opacity = color.a;\r\n        }\r\n        // Build default pipeline\r\n        //this.traits.push(new ex.Traits.EulerMovement());\r\n        // TODO: TileMaps should be converted to a collision area\r\n        _this.traits.push(new Traits.TileMapCollisionDetection());\r\n        _this.traits.push(new Traits.OffscreenCulling());\r\n        _this.traits.push(new Traits.CapturePointer());\r\n        // Build the action queue\r\n        _this.actionQueue = new ActionQueue(_this);\r\n        _this.actions = new ActionContext(_this);\r\n        // initialize default options\r\n        _this._initDefaults();\r\n        // Initialize default collision area to be box\r\n        _this.body.useBoxCollision();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ActorImpl.prototype, \"collisionArea\", {\r\n        /**\r\n         * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and\r\n         * [EdgeArea|edges].\r\n         */\r\n        get: function () {\r\n            return this.body.collisionArea;\r\n        },\r\n        /**\r\n         * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and\r\n         * [EdgeArea|edges].\r\n         */\r\n        set: function (area) {\r\n            this.body.collisionArea = area;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"x\", {\r\n        /**\r\n         * Gets the x position of the actor relative to it's parent (if any)\r\n         */\r\n        get: function () {\r\n            return this.body.pos.x;\r\n        },\r\n        /**\r\n         * Sets the x position of the actor relative to it's parent (if any)\r\n         */\r\n        set: function (theX) {\r\n            this.body.pos.x = theX;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"y\", {\r\n        /**\r\n         * Gets the y position of the actor relative to it's parent (if any)\r\n         */\r\n        get: function () {\r\n            return this.body.pos.y;\r\n        },\r\n        /**\r\n         * Sets the y position of the actor relative to it's parent (if any)\r\n         */\r\n        set: function (theY) {\r\n            this.body.pos.y = theY;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"pos\", {\r\n        /**\r\n         * Gets the position vector of the actor in pixels\r\n         */\r\n        get: function () {\r\n            return this.body.pos;\r\n        },\r\n        /**\r\n         * Sets the position vector of the actor in pixels\r\n         */\r\n        set: function (thePos) {\r\n            this.body.pos.setTo(thePos.x, thePos.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"oldPos\", {\r\n        /**\r\n         * Gets the position vector of the actor from the last frame\r\n         */\r\n        get: function () {\r\n            return this.body.oldPos;\r\n        },\r\n        /**\r\n         * Sets the position vector of the actor in the last frame\r\n         */\r\n        set: function (thePos) {\r\n            this.body.oldPos.setTo(thePos.x, thePos.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"vel\", {\r\n        /**\r\n         * Gets the velocity vector of the actor in pixels/sec\r\n         */\r\n        get: function () {\r\n            return this.body.vel;\r\n        },\r\n        /**\r\n         * Sets the velocity vector of the actor in pixels/sec\r\n         */\r\n        set: function (theVel) {\r\n            this.body.vel.setTo(theVel.x, theVel.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"oldVel\", {\r\n        /**\r\n         * Gets the velocity vector of the actor from the last frame\r\n         */\r\n        get: function () {\r\n            return this.body.oldVel;\r\n        },\r\n        /**\r\n         * Sets the velocity vector of the actor from the last frame\r\n         */\r\n        set: function (theVel) {\r\n            this.body.oldVel.setTo(theVel.x, theVel.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"acc\", {\r\n        /**\r\n         * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\r\n         * useful to simulate a gravitational effect.\r\n         */\r\n        get: function () {\r\n            return this.body.acc;\r\n        },\r\n        /**\r\n         * Sets the acceleration vector of teh actor in pixels/second/second\r\n         */\r\n        set: function (theAcc) {\r\n            this.body.acc.setTo(theAcc.x, theAcc.y);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"rotation\", {\r\n        /**\r\n         * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n         */\r\n        get: function () {\r\n            return this.body.rotation;\r\n        },\r\n        /**\r\n         * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n         */\r\n        set: function (theAngle) {\r\n            this.body.rotation = theAngle;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"rx\", {\r\n        /**\r\n         * Gets the rotational velocity of the actor in radians/second\r\n         */\r\n        get: function () {\r\n            return this.body.rx;\r\n        },\r\n        /**\r\n         * Sets the rotational velocity of the actor in radians/sec\r\n         */\r\n        set: function (angularVelocity) {\r\n            this.body.rx = angularVelocity;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"torque\", {\r\n        /**\r\n         * Gets the current torque applied to the actor. Torque can be thought of as rotational force\r\n         */\r\n        get: function () {\r\n            return this.body.torque;\r\n        },\r\n        /**\r\n         * Sets the current torque applied to the actor. Torque can be thought of as rotational force\r\n         */\r\n        set: function (theTorque) {\r\n            this.body.torque = theTorque;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"mass\", {\r\n        /**\r\n         * Get the current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        get: function () {\r\n            return this.body.mass;\r\n        },\r\n        /**\r\n         * Sets the mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        set: function (theMass) {\r\n            this.body.mass = theMass;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"moi\", {\r\n        /**\r\n         * Gets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        get: function () {\r\n            return this.body.moi;\r\n        },\r\n        /**\r\n         * Sets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        set: function (theMoi) {\r\n            this.body.moi = theMoi;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"friction\", {\r\n        /**\r\n         * Gets the coefficient of friction on this actor, this can be thought of as how sticky or slippery an object is.\r\n         */\r\n        get: function () {\r\n            return this.body.friction;\r\n        },\r\n        /**\r\n         * Sets the coefficient of friction of this actor, this can ve thought of as how stick or slippery an object is.\r\n         */\r\n        set: function (theFriction) {\r\n            this.body.friction = theFriction;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"restitution\", {\r\n        /**\r\n         * Gets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this\r\n         * as bounciness.\r\n         */\r\n        get: function () {\r\n            return this.body.restitution;\r\n        },\r\n        /**\r\n         * Sets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this\r\n         * as bounciness.\r\n         */\r\n        set: function (theRestitution) {\r\n            this.body.restitution = theRestitution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActorImpl.prototype, \"color\", {\r\n        /**\r\n         * Sets the color of the actor. A rectangle of this color will be\r\n         * drawn if no [[IDrawable]] is specified as the actors drawing.\r\n         *\r\n         * The default is `null` which prevents a rectangle from being drawn.\r\n         */\r\n        get: function () {\r\n            return this._color;\r\n        },\r\n        set: function (v) {\r\n            this._color = v.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    ActorImpl.prototype.onInitialize = function (_engine) {\r\n        // Override me\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets wether the actor is Initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._initialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\r\n            var child = _a[_i];\r\n            child._initialize(engine);\r\n        }\r\n    };\r\n    ActorImpl.prototype._initDefaults = function () {\r\n        this.anchor = Actor.defaults.anchor.clone();\r\n    };\r\n    ActorImpl.prototype._checkForPointerOptIn = function (eventName) {\r\n        if (eventName) {\r\n            var normalized = eventName.toLowerCase();\r\n            if (this._capturePointerEvents.indexOf(normalized) !== -1) {\r\n                this.enableCapturePointer = true;\r\n                if (this._captureMoveEvents.indexOf(normalized) !== -1) {\r\n                    this.capturePointer.captureMoveEvents = true;\r\n                }\r\n                if (this._captureDragEvents.indexOf(normalized) !== -1) {\r\n                    this.capturePointer.captureDragEvents = true;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActorImpl.prototype.on = function (eventName, handler) {\r\n        this._checkForPointerOptIn(eventName);\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    ActorImpl.prototype.once = function (eventName, handler) {\r\n        this._checkForPointerOptIn(eventName);\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    ActorImpl.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    // #endregion\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPreKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._prekill = function (_scene) {\r\n        _super.prototype.emit.call(this, 'prekill', new PreKillEvent(this));\r\n        this.onPreKill(_scene);\r\n    };\r\n    /**\r\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\r\n     *\r\n     * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\r\n     */\r\n    ActorImpl.prototype.onPreKill = function (_scene) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPostKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postkill = function (_scene) {\r\n        _super.prototype.emit.call(this, 'postkill', new PostKillEvent(this));\r\n        this.onPostKill(_scene);\r\n    };\r\n    /**\r\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\r\n     *\r\n     * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\r\n     */\r\n    ActorImpl.prototype.onPostKill = function (_scene) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * If the current actor is a member of the scene, this will remove\r\n     * it from the scene graph. It will no longer be drawn or updated.\r\n     */\r\n    ActorImpl.prototype.kill = function () {\r\n        if (this.scene) {\r\n            this._prekill(this.scene);\r\n            this.emit('kill', new KillEvent(this));\r\n            this._isKilled = true;\r\n            this.scene.remove(this);\r\n            this._postkill(this.scene);\r\n        }\r\n        else {\r\n            this.logger.warn('Cannot kill actor, it was never added to the Scene');\r\n        }\r\n    };\r\n    /**\r\n     * If the current actor is killed, it will now not be killed.\r\n     */\r\n    ActorImpl.prototype.unkill = function () {\r\n        this._isKilled = false;\r\n    };\r\n    /**\r\n     * Indicates wether the actor has been killed.\r\n     */\r\n    ActorImpl.prototype.isKilled = function () {\r\n        return this._isKilled;\r\n    };\r\n    /**\r\n     * Adds a child actor to this actor. All movement of the child actor will be\r\n     * relative to the parent actor. Meaning if the parent moves the child will\r\n     * move with it.\r\n     * @param actor The child actor to add\r\n     */\r\n    ActorImpl.prototype.add = function (actor) {\r\n        actor.collisionType = CollisionType.PreventCollision;\r\n        if (Util.addItemToArray(actor, this.children)) {\r\n            actor.parent = this;\r\n        }\r\n    };\r\n    /**\r\n     * Removes a child actor from this actor.\r\n     * @param actor The child actor to remove\r\n     */\r\n    ActorImpl.prototype.remove = function (actor) {\r\n        if (Util.removeItemFromArray(actor, this.children)) {\r\n            actor.parent = null;\r\n        }\r\n    };\r\n    ActorImpl.prototype.setDrawing = function (key) {\r\n        key = key.toString();\r\n        if (this.currentDrawing !== this.frames[key]) {\r\n            if (this.frames[key] != null) {\r\n                this.frames[key].reset();\r\n                this.currentDrawing = this.frames[key];\r\n            }\r\n            else {\r\n                Logger.getInstance().error(\"the specified drawing key \" + key + \" does not exist\");\r\n            }\r\n        }\r\n    };\r\n    ActorImpl.prototype.addDrawing = function () {\r\n        if (arguments.length === 2) {\r\n            this.frames[arguments[0]] = arguments[1];\r\n            if (!this.currentDrawing) {\r\n                this.currentDrawing = arguments[1];\r\n            }\r\n            this._effectsDirty = true;\r\n        }\r\n        else {\r\n            if (arguments[0] instanceof Sprite) {\r\n                this.addDrawing('default', arguments[0]);\r\n            }\r\n            if (arguments[0] instanceof Texture) {\r\n                this.addDrawing('default', arguments[0].asSprite());\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"z\", {\r\n        get: function () {\r\n            return this.getZIndex();\r\n        },\r\n        set: function (newZ) {\r\n            this.setZIndex(newZ);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     */\r\n    ActorImpl.prototype.getZIndex = function () {\r\n        return this._zIndex;\r\n    };\r\n    /**\r\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\r\n     * The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     * @param newIndex new z-index to assign\r\n     */\r\n    ActorImpl.prototype.setZIndex = function (newIndex) {\r\n        this.scene.cleanupDrawTree(this);\r\n        this._zIndex = newIndex;\r\n        this.scene.updateDrawTree(this);\r\n    };\r\n    /**\r\n     * Adds an actor to a collision group. Actors with no named collision groups are\r\n     * considered to be in every collision group.\r\n     *\r\n     * Once in a collision group(s) actors will only collide with other actors in\r\n     * that group.\r\n     *\r\n     * @param name The name of the collision group\r\n     */\r\n    ActorImpl.prototype.addCollisionGroup = function (name) {\r\n        this.collisionGroups.push(name);\r\n    };\r\n    /**\r\n     * Removes an actor from a collision group.\r\n     * @param name The name of the collision group\r\n     */\r\n    ActorImpl.prototype.removeCollisionGroup = function (name) {\r\n        var index = this.collisionGroups.indexOf(name);\r\n        if (index !== -1) {\r\n            this.collisionGroups.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Get the center point of an actor\r\n     */\r\n    ActorImpl.prototype.getCenter = function () {\r\n        return new Vector(this.pos.x + this.getWidth() / 2 - this.anchor.x * this.getWidth(), this.pos.y + this.getHeight() / 2 - this.anchor.y * this.getHeight());\r\n    };\r\n    /**\r\n     * Gets the calculated width of an actor, factoring in scale\r\n     */\r\n    ActorImpl.prototype.getWidth = function () {\r\n        return this._width * this.getGlobalScale().x;\r\n    };\r\n    /**\r\n     * Sets the width of an actor, factoring in the current scale\r\n     */\r\n    ActorImpl.prototype.setWidth = function (width) {\r\n        this._width = width / this.scale.x;\r\n        this._geometryDirty = true;\r\n    };\r\n    /**\r\n     * Gets the calculated height of an actor, factoring in scale\r\n     */\r\n    ActorImpl.prototype.getHeight = function () {\r\n        return this._height * this.getGlobalScale().y;\r\n    };\r\n    /**\r\n     * Sets the height of an actor, factoring in the current scale\r\n     */\r\n    ActorImpl.prototype.setHeight = function (height) {\r\n        this._height = height / this.scale.y;\r\n        this._geometryDirty = true;\r\n    };\r\n    /**\r\n     * Gets the left edge of the actor\r\n     */\r\n    ActorImpl.prototype.getLeft = function () {\r\n        return this.getBounds().left;\r\n    };\r\n    /**\r\n     * Gets the right edge of the actor\r\n     */\r\n    ActorImpl.prototype.getRight = function () {\r\n        return this.getBounds().right;\r\n    };\r\n    /**\r\n     * Gets the top edge of the actor\r\n     */\r\n    ActorImpl.prototype.getTop = function () {\r\n        return this.getBounds().top;\r\n    };\r\n    /**\r\n     * Gets the bottom edge of the actor\r\n     */\r\n    ActorImpl.prototype.getBottom = function () {\r\n        return this.getBounds().bottom;\r\n    };\r\n    /**\r\n     * Gets this actor's rotation taking into account any parent relationships\r\n     *\r\n     * @returns Rotation angle in radians\r\n     */\r\n    ActorImpl.prototype.getWorldRotation = function () {\r\n        if (!this.parent) {\r\n            return this.rotation;\r\n        }\r\n        return this.rotation + this.parent.getWorldRotation();\r\n    };\r\n    /**\r\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\r\n     *\r\n     * @returns Position in world coordinates\r\n     */\r\n    ActorImpl.prototype.getWorldPos = function () {\r\n        if (!this.parent) {\r\n            return this.pos.clone();\r\n        }\r\n        // collect parents\r\n        var parents = [];\r\n        var root = this;\r\n        parents.push(this);\r\n        // find parents\r\n        while (root.parent) {\r\n            root = root.parent;\r\n            parents.push(root);\r\n        }\r\n        // calculate position\r\n        var x = parents.reduceRight(function (px, p) {\r\n            if (p.parent) {\r\n                return px + p.pos.x * p.getGlobalScale().x;\r\n            }\r\n            return px + p.pos.x;\r\n        }, 0);\r\n        var y = parents.reduceRight(function (py, p) {\r\n            if (p.parent) {\r\n                return py + p.pos.y * p.getGlobalScale().y;\r\n            }\r\n            return py + p.pos.y;\r\n        }, 0);\r\n        // rotate around root anchor\r\n        var ra = root.getWorldPos(); // 10, 10\r\n        var r = this.getWorldRotation();\r\n        return new Vector(x, y).rotate(r, ra);\r\n    };\r\n    /**\r\n     * Gets the global scale of the Actor\r\n     */\r\n    ActorImpl.prototype.getGlobalScale = function () {\r\n        if (!this.parent) {\r\n            return new Vector(this.scale.x, this.scale.y);\r\n        }\r\n        var parentScale = this.parent.getGlobalScale();\r\n        return new Vector(this.scale.x * parentScale.x, this.scale.y * parentScale.y);\r\n    };\r\n    // #region Collision\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] calculated for this instant in world space.\r\n     */\r\n    ActorImpl.prototype.getBounds = function (rotated) {\r\n        if (rotated === void 0) { rotated = true; }\r\n        // todo cache bounding box\r\n        var anchor = this._getCalculatedAnchor();\r\n        var pos = this.getWorldPos();\r\n        var bb = new BoundingBox(pos.x - anchor.x, pos.y - anchor.y, pos.x + this.getWidth() - anchor.x, pos.y + this.getHeight() - anchor.y);\r\n        return rotated ? bb.rotate(this.rotation, pos) : bb;\r\n    };\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] relative to the actor's position.\r\n     */\r\n    ActorImpl.prototype.getRelativeBounds = function (rotated) {\r\n        if (rotated === void 0) { rotated = true; }\r\n        // todo cache bounding box\r\n        var anchor = this._getCalculatedAnchor();\r\n        var bb = new BoundingBox(-anchor.x, -anchor.y, this.getWidth() - anchor.x, this.getHeight() - anchor.y);\r\n        return rotated ? bb.rotate(this.rotation) : bb;\r\n    };\r\n    /**\r\n     * Returns the actors unrotated geometry in world coordinates\r\n     */\r\n    ActorImpl.prototype.getGeometry = function () {\r\n        return this.getBounds(false).getPoints();\r\n    };\r\n    /**\r\n     * Return the actor's unrotated geometry relative to the actor's position\r\n     */\r\n    ActorImpl.prototype.getRelativeGeometry = function () {\r\n        return this.getRelativeBounds(false).getPoints();\r\n    };\r\n    Object.defineProperty(ActorImpl.prototype, \"isGeometryDirty\", {\r\n        /**\r\n         * Indicates that the actor's collision geometry needs to be recalculated for accurate collisions\r\n         */\r\n        get: function () {\r\n            return this._geometryDirty;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Tests whether the x/y specified are contained in the actor\r\n     * @param x  X coordinate to test (in world coordinates)\r\n     * @param y  Y coordinate to test (in world coordinates)\r\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\r\n     */\r\n    ActorImpl.prototype.contains = function (x, y, recurse) {\r\n        if (recurse === void 0) { recurse = false; }\r\n        var containment = this.getBounds().contains(new Vector(x, y));\r\n        if (recurse) {\r\n            return (containment ||\r\n                this.children.some(function (child) {\r\n                    return child.contains(x, y, true);\r\n                }));\r\n        }\r\n        return containment;\r\n    };\r\n    /**\r\n     * Returns the side of the collision based on the intersection\r\n     * @param intersect The displacement vector returned by a collision\r\n     */\r\n    ActorImpl.prototype.getSideFromIntersect = function (intersect) {\r\n        if (intersect) {\r\n            if (Math.abs(intersect.x) > Math.abs(intersect.y)) {\r\n                if (intersect.x < 0) {\r\n                    return Side.Right;\r\n                }\r\n                return Side.Left;\r\n            }\r\n            else {\r\n                if (intersect.y < 0) {\r\n                    return Side.Bottom;\r\n                }\r\n                return Side.Top;\r\n            }\r\n        }\r\n        return Side.None;\r\n    };\r\n    /**\r\n     * Test whether the actor has collided with another actor, returns the side of the current actor that collided.\r\n     * @param actor The other actor to test\r\n     */\r\n    ActorImpl.prototype.collidesWithSide = function (actor) {\r\n        var separationVector = this.collides(actor);\r\n        if (!separationVector) {\r\n            return Side.None;\r\n        }\r\n        if (Math.abs(separationVector.x) > Math.abs(separationVector.y)) {\r\n            if (this.pos.x < actor.pos.x) {\r\n                return Side.Right;\r\n            }\r\n            else {\r\n                return Side.Left;\r\n            }\r\n        }\r\n        else {\r\n            if (this.pos.y < actor.pos.y) {\r\n                return Side.Bottom;\r\n            }\r\n            else {\r\n                return Side.Top;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Test whether the actor has collided with another actor, returns the intersection vector on collision. Returns\r\n     * `null` when there is no collision;\r\n     * @param actor The other actor to test\r\n     */\r\n    ActorImpl.prototype.collides = function (actor) {\r\n        var bounds = this.getBounds();\r\n        var otherBounds = actor.getBounds();\r\n        var intersect = bounds.collides(otherBounds);\r\n        return intersect;\r\n    };\r\n    /**\r\n     * Register a handler to fire when this actor collides with another in a specified group\r\n     * @param group The group name to listen for\r\n     * @param func The callback to fire on collision with another actor from the group. The callback is passed the other actor.\r\n     */\r\n    ActorImpl.prototype.onCollidesWith = function (group, func) {\r\n        if (!this._collisionHandlers[group]) {\r\n            this._collisionHandlers[group] = [];\r\n        }\r\n        this._collisionHandlers[group].push(func);\r\n    };\r\n    ActorImpl.prototype.getCollisionHandlers = function () {\r\n        return this._collisionHandlers;\r\n    };\r\n    /**\r\n     * Removes all collision handlers for this group on this actor\r\n     * @param group Group to remove all handlers for on this actor.\r\n     */\r\n    ActorImpl.prototype.removeCollidesWith = function (group) {\r\n        this._collisionHandlers[group] = [];\r\n    };\r\n    /**\r\n     * Returns true if the two actors are less than or equal to the distance specified from each other\r\n     * @param actor     Actor to test\r\n     * @param distance  Distance in pixels to test\r\n     */\r\n    ActorImpl.prototype.within = function (actor, distance) {\r\n        return Math.sqrt(Math.pow(this.pos.x - actor.pos.x, 2) + Math.pow(this.pos.y - actor.pos.y, 2)) <= distance;\r\n    };\r\n    // #endregion\r\n    ActorImpl.prototype._getCalculatedAnchor = function () {\r\n        return new Vector(this.getWidth() * this.anchor.x, this.getHeight() * this.anchor.y);\r\n    };\r\n    ActorImpl.prototype._reapplyEffects = function (drawing) {\r\n        drawing.removeEffect(this._opacityFx);\r\n        drawing.addEffect(this._opacityFx);\r\n    };\r\n    // #region Update\r\n    /**\r\n     * Perform euler integration at the specified time step\r\n     */\r\n    ActorImpl.prototype.integrate = function (delta) {\r\n        // Update placements based on linear algebra\r\n        var seconds = delta / 1000;\r\n        var totalAcc = this.acc.clone();\r\n        // Only active vanilla actors are affected by global acceleration\r\n        if (this.collisionType === CollisionType.Active) {\r\n            totalAcc.addEqual(Physics.acc);\r\n        }\r\n        this.vel.addEqual(totalAcc.scale(seconds));\r\n        this.pos.addEqual(this.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n        this.rx += this.torque * (1.0 / this.moi) * seconds;\r\n        this.rotation += this.rx * seconds;\r\n        this.scale.x += (this.sx * delta) / 1000;\r\n        this.scale.y += (this.sy * delta) / 1000;\r\n        if (!this.scale.equals(this.oldScale)) {\r\n            // change in scale effects the geometry\r\n            this._geometryDirty = true;\r\n        }\r\n        // Update physics body\r\n        this.body.update();\r\n        this._geometryDirty = false;\r\n    };\r\n    /**\r\n     * Called by the Engine, updates the state of the actor\r\n     * @param engine The reference to the current game engine\r\n     * @param delta  The time elapsed since the last update in milliseconds\r\n     */\r\n    ActorImpl.prototype.update = function (engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        // Update action queue\r\n        this.actionQueue.update(delta);\r\n        // Update color only opacity\r\n        if (this.color) {\r\n            this.color.a = this.opacity;\r\n        }\r\n        // calculate changing opacity\r\n        if (this.previousOpacity !== this.opacity) {\r\n            this.previousOpacity = this.opacity;\r\n            this._opacityFx.opacity = this.opacity;\r\n            this._effectsDirty = true;\r\n        }\r\n        // Capture old values before integration step updates them\r\n        this.oldVel.setTo(this.vel.x, this.vel.y);\r\n        this.oldPos.setTo(this.pos.x, this.pos.y);\r\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\r\n        this.oldScale.setTo(this.scale.x, this.scale.y);\r\n        // Run Euler integration\r\n        this.integrate(delta);\r\n        // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\r\n        for (var _i = 0, _a = this.traits; _i < _a.length; _i++) {\r\n            var trait = _a[_i];\r\n            trait.update(this, engine, delta);\r\n        }\r\n        // Update child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            this.children[i].update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an actor is updated.\r\n     */\r\n    ActorImpl.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an actor is updated.\r\n     */\r\n    ActorImpl.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._preupdate = function (engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postupdate = function (engine, delta) {\r\n        this.emit('postupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    };\r\n    // endregion\r\n    // #region Drawing\r\n    /**\r\n     * Called by the Engine, draws the actor to the screen\r\n     * @param ctx   The rendering context\r\n     * @param delta The time since the last draw in milliseconds\r\n     */\r\n    ActorImpl.prototype.draw = function (ctx, delta) {\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        ctx.rotate(this.rotation);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        // translate canvas by anchor offset\r\n        ctx.save();\r\n        ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\r\n        this._predraw(ctx, delta);\r\n        if (this.currentDrawing) {\r\n            var drawing = this.currentDrawing;\r\n            // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\r\n            var offsetX = (this._width - drawing.width * drawing.scale.x) * this.anchor.x;\r\n            var offsetY = (this._height - drawing.height * drawing.scale.y) * this.anchor.y;\r\n            if (this._effectsDirty) {\r\n                this._reapplyEffects(this.currentDrawing);\r\n                this._effectsDirty = false;\r\n            }\r\n            this.currentDrawing.draw(ctx, offsetX, offsetY);\r\n        }\r\n        else {\r\n            if (this.color) {\r\n                ctx.fillStyle = this.color.toString();\r\n                ctx.fillRect(0, 0, this._width, this._height);\r\n            }\r\n        }\r\n        ctx.restore();\r\n        // Draw child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            if (this.children[i].visible) {\r\n                this.children[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        this._postdraw(ctx, delta);\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\r\n     */\r\n    ActorImpl.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\r\n     */\r\n    ActorImpl.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._predraw = function (ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPreDraw(ctx, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     * @internal\r\n     */\r\n    ActorImpl.prototype._postdraw = function (ctx, delta) {\r\n        this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPostDraw(ctx, delta);\r\n    };\r\n    /**\r\n     * Called by the Engine, draws the actors debugging to the screen\r\n     * @param ctx The rendering context\r\n     */\r\n    /* istanbul ignore next */\r\n    ActorImpl.prototype.debugDraw = function (ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        this.body.debugDraw(ctx);\r\n        // Draw actor bounding box\r\n        var bb = this.getBounds();\r\n        bb.debugDraw(ctx);\r\n        // Draw actor Id\r\n        ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\r\n        // Draw actor anchor Vector\r\n        ctx.fillStyle = Color.Yellow.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this.getWorldPos().x, this.getWorldPos().y, 3, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // Culling Box debug draw\r\n        for (var j = 0; j < this.traits.length; j++) {\r\n            if (this.traits[j] instanceof Traits.OffscreenCulling) {\r\n                this.traits[j].cullingBox.debugDraw(ctx);\r\n            }\r\n        }\r\n        // Unit Circle debug draw\r\n        ctx.strokeStyle = Color.Yellow.toString();\r\n        ctx.beginPath();\r\n        var radius = Math.min(this.getWidth(), this.getHeight());\r\n        ctx.arc(this.getWorldPos().x, this.getWorldPos().y, radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        var ticks = {\r\n            '0 Pi': 0,\r\n            'Pi/2': Math.PI / 2,\r\n            Pi: Math.PI,\r\n            '3/2 Pi': (3 * Math.PI) / 2\r\n        };\r\n        var oldFont = ctx.font;\r\n        for (var tick in ticks) {\r\n            ctx.fillStyle = Color.Yellow.toString();\r\n            ctx.font = '14px';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillText(tick, this.getWorldPos().x + Math.cos(ticks[tick]) * (radius + 10), this.getWorldPos().y + Math.sin(ticks[tick]) * (radius + 10));\r\n        }\r\n        ctx.font = oldFont;\r\n        // Draw child actors\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            this.children[i].debugDraw(ctx);\r\n        }\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    };\r\n    /**\r\n     * Returns the full array of ancestors\r\n     */\r\n    ActorImpl.prototype.getAncestors = function () {\r\n        var path = [this];\r\n        var currentActor = this;\r\n        var parent;\r\n        while ((parent = currentActor.parent)) {\r\n            currentActor = parent;\r\n            path.push(currentActor);\r\n        }\r\n        return path.reverse();\r\n    };\r\n    // #region Properties\r\n    /**\r\n     * Indicates the next id to be set\r\n     */\r\n    ActorImpl.defaults = {\r\n        anchor: Vector.Half.clone()\r\n    };\r\n    /**\r\n     * Indicates the next id to be set\r\n     */\r\n    ActorImpl.maxId = 0;\r\n    return ActorImpl;\r\n}(Class));\r\nexport { ActorImpl };\r\n/**\r\n * The most important primitive in Excalibur is an `Actor`. Anything that\r\n * can move on the screen, collide with another `Actor`, respond to events,\r\n * or interact with the current scene, must be an actor. An `Actor` **must**\r\n * be part of a [[Scene]] for it to be drawn to the screen.\r\n *\r\n * [[include:Actors.md]]\r\n *\r\n *\r\n * [[include:Constructors.md]]\r\n *\r\n */\r\nvar Actor = /** @class */ (function (_super) {\r\n    __extends(Actor, _super);\r\n    function Actor(xOrConfig, y, width, height, color) {\r\n        return _super.call(this, xOrConfig, y, width, height, color) || this;\r\n    }\r\n    return Actor;\r\n}(Configurable(ActorImpl)));\r\nexport { Actor };\r\n/**\r\n * An enum that describes the types of collisions actors can participate in\r\n */\r\nexport var CollisionType;\r\n(function (CollisionType) {\r\n    /**\r\n     * Actors with the `PreventCollision` setting do not participate in any\r\n     * collisions and do not raise collision events.\r\n     */\r\n    CollisionType[CollisionType[\"PreventCollision\"] = 0] = \"PreventCollision\";\r\n    /**\r\n     * Actors with the `Passive` setting only raise collision events, but are not\r\n     * influenced or moved by other actors and do not influence or move other actors.\r\n     */\r\n    CollisionType[CollisionType[\"Passive\"] = 1] = \"Passive\";\r\n    /**\r\n     * Actors with the `Active` setting raise collision events and participate\r\n     * in collisions with other actors and will be push or moved by actors sharing\r\n     * the `Active` or `Fixed` setting.\r\n     */\r\n    CollisionType[CollisionType[\"Active\"] = 2] = \"Active\";\r\n    /**\r\n     * Actors with the `Fixed` setting raise collision events and participate in\r\n     * collisions with other actors. Actors with the `Fixed` setting will not be\r\n     * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\r\n     * actors as \"immovable/onstoppable\" objects. If two `Fixed` actors meet they will\r\n     * not be pushed or moved by each other, they will not interact except to throw\r\n     * collision events.\r\n     */\r\n    CollisionType[CollisionType[\"Fixed\"] = 3] = \"Fixed\";\r\n})(CollisionType || (CollisionType = {}));\r\n//# sourceMappingURL=Actor.js.map","import { Physics, CollisionResolutionStrategy } from './../Physics';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CircleArea } from './CircleArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { Pair } from './Pair';\r\nimport { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\nvar Body = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new physics body associated with an actor\r\n     */\r\n    function Body(actor) {\r\n        this.actor = actor;\r\n        /**\r\n         * [[ICollisionArea|Collision area]] of this physics body, defines the shape for rigid body collision\r\n         */\r\n        this.collisionArea = null;\r\n        /**\r\n         * The (x, y) position of the actor this will be in the middle of the actor if the\r\n         * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\r\n         * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\r\n         */\r\n        this.pos = new Vector(0, 0);\r\n        /**\r\n         * The position of the actor last frame (x, y) in pixels\r\n         */\r\n        this.oldPos = new Vector(0, 0);\r\n        /**\r\n         * The current velocity vector (vx, vy) of the actor in pixels/second\r\n         */\r\n        this.vel = new Vector(0, 0);\r\n        /**\r\n         * The velocity of the actor last frame (vx, vy) in pixels/second\r\n         */\r\n        this.oldVel = new Vector(0, 0);\r\n        /**\r\n         * The curret acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\r\n         * be useful to simulate a gravitational effect.\r\n         */\r\n        this.acc = new Vector(0, 0);\r\n        /**\r\n         * The current torque applied to the actor\r\n         */\r\n        this.torque = 0;\r\n        /**\r\n         * The current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n         */\r\n        this.mass = 1.0;\r\n        /**\r\n         * The current moment of inertia, moi can be thought of as the resistance to rotation.\r\n         */\r\n        this.moi = 1000;\r\n        /**\r\n         * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\r\n         */\r\n        this.motion = 10;\r\n        /**\r\n         * The coefficient of friction on this actor\r\n         */\r\n        this.friction = 0.99;\r\n        /**\r\n         * The coefficient of restitution of this actor, represents the amount of energy preserved after collision\r\n         */\r\n        this.restitution = 0.2;\r\n        /**\r\n         * The rotation of the actor in radians\r\n         */\r\n        this.rotation = 0; // radians\r\n        /**\r\n         * The rotational velocity of the actor in radians/second\r\n         */\r\n        this.rx = 0; //radians/sec\r\n        this._totalMtv = Vector.Zero.clone();\r\n    }\r\n    /**\r\n     * Add minimum translation vectors accumulated during the current frame to resolve collisions.\r\n     */\r\n    Body.prototype.addMtv = function (mtv) {\r\n        this._totalMtv.addEqual(mtv);\r\n    };\r\n    /**\r\n     * Applies the accumulated translation vectors to the actors position\r\n     */\r\n    Body.prototype.applyMtv = function () {\r\n        this.pos.addEqual(this._totalMtv);\r\n        this._totalMtv.setTo(0, 0);\r\n    };\r\n    /**\r\n     * Returns the body's [[BoundingBox]] calculated for this instant in world space.\r\n     */\r\n    Body.prototype.getBounds = function () {\r\n        if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n            return this.actor.getBounds();\r\n        }\r\n        else {\r\n            return this.collisionArea.getBounds();\r\n        }\r\n    };\r\n    /**\r\n     * Returns the actor's [[BoundingBox]] relative to the actors position.\r\n     */\r\n    Body.prototype.getRelativeBounds = function () {\r\n        if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n            return this.actor.getRelativeBounds();\r\n        }\r\n        else {\r\n            return this.actor.getRelativeBounds();\r\n        }\r\n    };\r\n    /**\r\n     * Updates the collision area geometry and internal caches\r\n     */\r\n    Body.prototype.update = function () {\r\n        if (this.collisionArea) {\r\n            // Update the geometry if needed\r\n            if (this.actor && this.actor.isGeometryDirty && this.collisionArea instanceof PolygonArea) {\r\n                this.collisionArea.points = this.actor.getRelativeGeometry();\r\n            }\r\n            this.collisionArea.recalc();\r\n        }\r\n    };\r\n    /**\r\n     * Sets up a box collision area based on the current bounds of the associated actor of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useBoxCollision = function (center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        this.collisionArea = new PolygonArea({\r\n            body: this,\r\n            points: this.actor.getRelativeGeometry(),\r\n            pos: center // position relative to actor\r\n        });\r\n        // in case of a nan moi, coalesce to a safe default\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up a polygon collision area based on a list of of points relative to the anchor of the associated actor of this physics body.\r\n     *\r\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.usePolygonCollision = function (points, center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        this.collisionArea = new PolygonArea({\r\n            body: this,\r\n            points: points,\r\n            pos: center // position relative to actor\r\n        });\r\n        // in case of a nan moi, collesce to a safe default\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up a [[CircleArea|circle collision area]] with a specified radius in pixels.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useCircleCollision = function (radius, center) {\r\n        if (center === void 0) { center = Vector.Zero.clone(); }\r\n        if (!radius) {\r\n            radius = this.actor.getWidth() / 2;\r\n        }\r\n        this.collisionArea = new CircleArea({\r\n            body: this,\r\n            radius: radius,\r\n            pos: center\r\n        });\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /**\r\n     * Sets up an [[EdgeArea|edge collision]] with a start point and an end point relative to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    Body.prototype.useEdgeCollision = function (begin, end) {\r\n        this.collisionArea = new EdgeArea({\r\n            begin: begin,\r\n            end: end,\r\n            body: this\r\n        });\r\n        this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n    };\r\n    /* istanbul ignore next */\r\n    Body.prototype.debugDraw = function (ctx) {\r\n        // Draw motion vectors\r\n        if (Physics.showMotionVectors) {\r\n            DrawUtil.vector(ctx, Color.Yellow, this.pos, this.acc.add(Physics.acc));\r\n            DrawUtil.vector(ctx, Color.Red, this.pos, this.vel);\r\n            DrawUtil.point(ctx, Color.Red, this.pos);\r\n        }\r\n        if (Physics.showBounds) {\r\n            this.getBounds().debugDraw(ctx, Color.Yellow);\r\n        }\r\n        if (Physics.showArea) {\r\n            this.collisionArea.debugDraw(ctx, Color.Green);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a boolean indicating whether this body collided with\r\n     * or was in stationary contact with\r\n     * the body of the other [[Actor]]\r\n     */\r\n    Body.prototype.touching = function (other) {\r\n        var pair = new Pair(this, other.body);\r\n        pair.collide();\r\n        if (pair.collision) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return Body;\r\n}());\r\nexport { Body };\r\n//# sourceMappingURL=Body.js.map","/**\r\n * Revises pointer events path accordingly to the actor\r\n */\r\nvar CapturePointer = /** @class */ (function () {\r\n    function CapturePointer() {\r\n    }\r\n    CapturePointer.prototype.update = function (actor, engine) {\r\n        if (!actor.enableCapturePointer) {\r\n            return;\r\n        }\r\n        if (actor.isKilled()) {\r\n            return;\r\n        }\r\n        engine.input.pointers.revisePointerEventsPaths(actor);\r\n    };\r\n    return CapturePointer;\r\n}());\r\nexport { CapturePointer };\r\n//# sourceMappingURL=CapturePointer.js.map","import { Physics } from './../Physics';\r\nimport { CollisionType } from '../Actor';\r\nvar EulerMovement = /** @class */ (function () {\r\n    function EulerMovement() {\r\n    }\r\n    EulerMovement.prototype.update = function (actor, _engine, delta) {\r\n        // Update placements based on linear algebra\r\n        var seconds = delta / 1000;\r\n        var totalAcc = actor.acc.clone();\r\n        // Only active vanilla actors are affected by global acceleration\r\n        if (actor.collisionType === CollisionType.Active) {\r\n            totalAcc.addEqual(Physics.acc);\r\n        }\r\n        actor.oldVel = actor.vel;\r\n        actor.vel.addEqual(totalAcc.scale(seconds));\r\n        actor.pos.addEqual(actor.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n        actor.rx += actor.torque * (1.0 / actor.moi) * seconds;\r\n        actor.rotation += actor.rx * seconds;\r\n        actor.scale.x += (actor.sx * delta) / 1000;\r\n        actor.scale.y += (actor.sy * delta) / 1000;\r\n    };\r\n    return EulerMovement;\r\n}());\r\nexport { EulerMovement };\r\n//# sourceMappingURL=EulerMovement.js.map","import { Vector } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\nvar CullingBox = /** @class */ (function () {\r\n    function CullingBox() {\r\n        this._topLeft = new Vector(0, 0);\r\n        this._topRight = new Vector(0, 0);\r\n        this._bottomLeft = new Vector(0, 0);\r\n        this._bottomRight = new Vector(0, 0);\r\n    }\r\n    CullingBox.prototype.isSpriteOffScreen = function (actor, engine) {\r\n        var drawingWidth = actor.currentDrawing.drawWidth;\r\n        var drawingHeight = actor.currentDrawing.drawHeight;\r\n        var rotation = actor.rotation;\r\n        var anchor = actor.getCenter();\r\n        var worldPos = actor.getWorldPos();\r\n        this._topLeft.x = worldPos.x - drawingWidth / 2;\r\n        this._topLeft.y = worldPos.y - drawingHeight / 2;\r\n        this._topLeft = this._topLeft.rotate(rotation, anchor);\r\n        this._topRight.x = worldPos.x + drawingWidth / 2;\r\n        this._topRight.y = worldPos.y - drawingHeight / 2;\r\n        this._topRight = this._topRight.rotate(rotation, anchor);\r\n        this._bottomLeft.x = worldPos.x - drawingWidth / 2;\r\n        this._bottomLeft.y = worldPos.y + drawingHeight / 2;\r\n        this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\r\n        this._bottomRight.x = worldPos.x + drawingWidth / 2;\r\n        this._bottomRight.y = worldPos.y + drawingHeight / 2;\r\n        this._bottomRight = this._bottomRight.rotate(rotation, anchor);\r\n        ///\r\n        var topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\r\n        var topRightScreen = engine.worldToScreenCoordinates(this._topRight);\r\n        var bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\r\n        var bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\r\n        this._xCoords = [];\r\n        this._yCoords = [];\r\n        this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\r\n        this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\r\n        this._xMin = Math.min.apply(null, this._xCoords);\r\n        this._yMin = Math.min.apply(null, this._yCoords);\r\n        this._xMax = Math.max.apply(null, this._xCoords);\r\n        this._yMax = Math.max.apply(null, this._yCoords);\r\n        var minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\r\n        var maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\r\n        this._xMinWorld = minWorld.x;\r\n        this._yMinWorld = minWorld.y;\r\n        this._xMaxWorld = maxWorld.x;\r\n        this._yMaxWorld = maxWorld.y;\r\n        var boundingPoints = [\r\n            new Vector(this._xMin, this._yMin),\r\n            new Vector(this._xMax, this._yMin),\r\n            new Vector(this._xMin, this._yMax),\r\n            new Vector(this._xMax, this._yMax)\r\n        ]; // bottomright\r\n        // sprite can be wider than canvas screen (and still visible within canvas)\r\n        // top or bottom of sprite must be within canvas\r\n        if (boundingPoints[0].x < 0 &&\r\n            boundingPoints[1].x > engine.canvas.clientWidth &&\r\n            (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)) {\r\n            return false;\r\n        }\r\n        // sprite can be taller than canvas screen (and still visible within canvas)\r\n        // left or right of sprite must be within canvas\r\n        if (boundingPoints[0].y < 0 &&\r\n            boundingPoints[2].y > engine.canvas.clientHeight &&\r\n            (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)) {\r\n            return false;\r\n        }\r\n        // otherwise if any corner is visible, we're not offscreen\r\n        for (var i = 0; i < boundingPoints.length; i++) {\r\n            if (boundingPoints[i].x > 0 &&\r\n                boundingPoints[i].y > 0 &&\r\n                boundingPoints[i].x < engine.canvas.clientWidth &&\r\n                boundingPoints[i].y < engine.canvas.clientHeight) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    CullingBox.prototype.debugDraw = function (ctx) {\r\n        // bounding rectangle\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = Color.White.toString();\r\n        ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\r\n        ctx.stroke();\r\n        ctx.fillStyle = Color.Red.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Green.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Blue.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Magenta.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    };\r\n    return CullingBox;\r\n}());\r\nexport { CullingBox };\r\n//# sourceMappingURL=CullingBox.js.map","import { CullingBox } from './../Util/CullingBox';\r\nimport { Vector } from '../Algebra';\r\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\r\nvar OffscreenCulling = /** @class */ (function () {\r\n    function OffscreenCulling() {\r\n        this.cullingBox = new CullingBox();\r\n    }\r\n    OffscreenCulling.prototype.update = function (actor, engine) {\r\n        var eventDispatcher = actor.eventDispatcher;\r\n        var anchor = actor.anchor;\r\n        var globalScale = actor.getGlobalScale();\r\n        var width = (globalScale.x * actor.getWidth()) / actor.scale.x;\r\n        var height = (globalScale.y * actor.getHeight()) / actor.scale.y;\r\n        var cameraPos = engine.currentScene.camera.pos;\r\n        var worldPos = actor.getWorldPos();\r\n        var actorScreenCoords = engine.worldToScreenCoordinates(new Vector(worldPos.x - anchor.x * width, worldPos.y - anchor.y * height));\r\n        var cameraScreenCoords = engine.worldToScreenCoordinates(cameraPos);\r\n        var zoom = 1.0;\r\n        if (actor.scene && actor.scene.camera) {\r\n            zoom = Math.abs(actor.scene.camera.getZoom());\r\n        }\r\n        var isSpriteOffScreen = true;\r\n        if (actor.currentDrawing != null) {\r\n            isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\r\n        }\r\n        if (!actor.isOffScreen) {\r\n            if ((actorScreenCoords.x + width * zoom < 0 ||\r\n                actorScreenCoords.y + height * zoom < 0 ||\r\n                actorScreenCoords.x > engine.halfDrawWidth + cameraScreenCoords.x ||\r\n                actorScreenCoords.y > engine.halfDrawHeight + cameraScreenCoords.y) &&\r\n                isSpriteOffScreen) {\r\n                eventDispatcher.emit('exitviewport', new ExitViewPortEvent(actor));\r\n                actor.isOffScreen = true;\r\n            }\r\n        }\r\n        else {\r\n            if ((actorScreenCoords.x + width * zoom > 0 &&\r\n                actorScreenCoords.y + height * zoom > 0 &&\r\n                actorScreenCoords.x < engine.halfDrawWidth + cameraScreenCoords.x &&\r\n                actorScreenCoords.y < engine.halfDrawHeight + cameraScreenCoords.y) ||\r\n                !isSpriteOffScreen) {\r\n                eventDispatcher.emit('enterviewport', new EnterViewPortEvent(actor));\r\n                actor.isOffScreen = false;\r\n            }\r\n        }\r\n    };\r\n    return OffscreenCulling;\r\n}());\r\nexport { OffscreenCulling };\r\n//# sourceMappingURL=OffscreenCulling.js.map","import { CollisionType } from '../Actor';\r\nimport { Side } from '../Collision/Side';\r\nimport { PreCollisionEvent, PostCollisionEvent } from '../Events';\r\nvar TileMapCollisionDetection = /** @class */ (function () {\r\n    function TileMapCollisionDetection() {\r\n    }\r\n    TileMapCollisionDetection.prototype.update = function (actor, engine) {\r\n        var eventDispatcher = actor.eventDispatcher;\r\n        if (actor.collisionType !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {\r\n            for (var j = 0; j < engine.currentScene.tileMaps.length; j++) {\r\n                var map = engine.currentScene.tileMaps[j];\r\n                var intersectMap;\r\n                var side = Side.None;\r\n                var max = 2;\r\n                while ((intersectMap = map.collides(actor))) {\r\n                    if (max-- < 0) {\r\n                        break;\r\n                    }\r\n                    side = actor.getSideFromIntersect(intersectMap);\r\n                    eventDispatcher.emit('precollision', new PreCollisionEvent(actor, null, side, intersectMap));\r\n                    if (actor.collisionType === CollisionType.Active) {\r\n                        actor.pos.y += intersectMap.y;\r\n                        actor.pos.x += intersectMap.x;\r\n                        eventDispatcher.emit('postcollision', new PostCollisionEvent(actor, null, side, intersectMap));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return TileMapCollisionDetection;\r\n}());\r\nexport { TileMapCollisionDetection };\r\n//# sourceMappingURL=TileMapCollisionDetection.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Vector } from './Algebra';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport * as Traits from './Traits/Index';\r\n/**\r\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\r\n * not participate in collisions. Drawn on top of all other actors.\r\n */\r\nvar UIActor = /** @class */ (function (_super) {\r\n    __extends(UIActor, _super);\r\n    /**\r\n     * @param x       The starting x coordinate of the actor\r\n     * @param y       The starting y coordinate of the actor\r\n     * @param width   The starting width of the actor\r\n     * @param height  The starting height of the actor\r\n     */\r\n    function UIActor(xOrConfig, y, width, height) {\r\n        var _this = this;\r\n        if (typeof (xOrConfig !== 'object')) {\r\n            _this = _super.call(this, xOrConfig, y, width, height) || this;\r\n        }\r\n        else {\r\n            _this = _super.call(this, xOrConfig) || this;\r\n        }\r\n        _this.traits = [];\r\n        _this.traits.push(new Traits.CapturePointer());\r\n        _this.anchor.setTo(0, 0);\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.enableCapturePointer = true;\r\n        return _this;\r\n    }\r\n    UIActor.prototype._initialize = function (engine) {\r\n        this._engine = engine;\r\n        _super.prototype._initialize.call(this, engine);\r\n    };\r\n    UIActor.prototype.contains = function (x, y, useWorld) {\r\n        if (useWorld === void 0) { useWorld = true; }\r\n        if (useWorld) {\r\n            return _super.prototype.contains.call(this, x, y);\r\n        }\r\n        var coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\r\n        return _super.prototype.contains.call(this, coords.x, coords.y);\r\n    };\r\n    return UIActor;\r\n}(Actor));\r\nexport { UIActor };\r\n//# sourceMappingURL=UIActor.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EasingFunctions } from './Util/EasingFunctions';\r\nimport { Promise, PromiseState } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { removeItemFromArray } from './Util/Util';\r\nimport { PreUpdateEvent, PostUpdateEvent, InitializeEvent } from './Events';\r\nimport { Class } from './Class';\r\n/**\r\n * Container to house convenience strategy methods\r\n * @internal\r\n */\r\nvar StrategyContainer = /** @class */ (function () {\r\n    function StrategyContainer(camera) {\r\n        this.camera = camera;\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\r\n     * @param actor The actor to lock the camera to\r\n     */\r\n    StrategyContainer.prototype.lockToActor = function (actor) {\r\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\r\n    };\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\r\n     * @param actor The actor to lock the camera to\r\n     * @param axis The axis to follow the actor on\r\n     */\r\n    StrategyContainer.prototype.lockToActorAxis = function (actor, axis) {\r\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\r\n    };\r\n    /**\r\n     * Creates and adds the [[ElasticToActorStrategy]] on the current camera\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillationg spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    StrategyContainer.prototype.elasticToActor = function (actor, cameraElasticity, cameraFriction) {\r\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\r\n    };\r\n    /**\r\n     * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    StrategyContainer.prototype.radiusAroundActor = function (actor, radius) {\r\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\r\n    };\r\n    return StrategyContainer;\r\n}());\r\nexport { StrategyContainer };\r\n/**\r\n * Camera axis enum\r\n */\r\nexport var Axis;\r\n(function (Axis) {\r\n    Axis[Axis[\"X\"] = 0] = \"X\";\r\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\r\n})(Axis || (Axis = {}));\r\n/**\r\n * Lock a camera to the exact x/y postition of an actor.\r\n */\r\nvar LockCameraToActorStrategy = /** @class */ (function () {\r\n    function LockCameraToActorStrategy(target) {\r\n        this.target = target;\r\n        this.action = function (target, _cam, _eng, _delta) {\r\n            var center = target.getCenter();\r\n            return center;\r\n        };\r\n    }\r\n    return LockCameraToActorStrategy;\r\n}());\r\nexport { LockCameraToActorStrategy };\r\n/**\r\n * Lock a camera to a specific axis around an actor.\r\n */\r\nvar LockCameraToActorAxisStrategy = /** @class */ (function () {\r\n    function LockCameraToActorAxisStrategy(target, axis) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.axis = axis;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var center = target.getCenter();\r\n            var currentFocus = cam.getFocus();\r\n            if (_this.axis === Axis.X) {\r\n                return new Vector(center.x, currentFocus.y);\r\n            }\r\n            else {\r\n                return new Vector(currentFocus.x, center.y);\r\n            }\r\n        };\r\n    }\r\n    return LockCameraToActorAxisStrategy;\r\n}());\r\nexport { LockCameraToActorAxisStrategy };\r\n/**\r\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\r\n */\r\nvar ElasticToActorStrategy = /** @class */ (function () {\r\n    /**\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillationg spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    function ElasticToActorStrategy(target, cameraElasticity, cameraFriction) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.cameraElasticity = cameraElasticity;\r\n        this.cameraFriction = cameraFriction;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var position = target.getCenter();\r\n            var focus = cam.getFocus();\r\n            var cameraVel = new Vector(cam.dx, cam.dy);\r\n            // Calculate the strech vector, using the spring equation\r\n            // F = kX\r\n            // https://en.wikipedia.org/wiki/Hooke's_law\r\n            // Apply to the current camera velocity\r\n            var stretch = position.sub(focus).scale(_this.cameraElasticity); // stretch is X\r\n            cameraVel = cameraVel.add(stretch);\r\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\r\n            // Apply to the current camera velocity\r\n            var friction = cameraVel.scale(-1).scale(_this.cameraFriction);\r\n            cameraVel = cameraVel.add(friction);\r\n            // Update position by velocity deltas\r\n            focus = focus.add(cameraVel);\r\n            return focus;\r\n        };\r\n    }\r\n    return ElasticToActorStrategy;\r\n}());\r\nexport { ElasticToActorStrategy };\r\nvar RadiusAroundActorStrategy = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    function RadiusAroundActorStrategy(target, radius) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.radius = radius;\r\n        this.action = function (target, cam, _eng, _delta) {\r\n            var position = target.getCenter();\r\n            var focus = cam.getFocus();\r\n            var direction = position.sub(focus);\r\n            var distance = direction.magnitude();\r\n            if (distance >= _this.radius) {\r\n                var offset = distance - _this.radius;\r\n                return focus.add(direction.normalize().scale(offset));\r\n            }\r\n            return focus;\r\n        };\r\n    }\r\n    return RadiusAroundActorStrategy;\r\n}());\r\nexport { RadiusAroundActorStrategy };\r\n/**\r\n * Cameras\r\n *\r\n * [[BaseCamera]] is the base class for all Excalibur cameras. Cameras are used\r\n * to move around your game and set focus. They are used to determine\r\n * what is \"off screen\" and can be used to scale the game.\r\n *\r\n * [[include:Cameras.md]]\r\n */\r\nvar BaseCamera = /** @class */ (function (_super) {\r\n    __extends(BaseCamera, _super);\r\n    function BaseCamera() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._cameraStrategies = [];\r\n        _this.strategy = new StrategyContainer(_this);\r\n        // camera physical quantities\r\n        _this.z = 1;\r\n        _this.dx = 0;\r\n        _this.dy = 0;\r\n        _this.dz = 0;\r\n        _this.ax = 0;\r\n        _this.ay = 0;\r\n        _this.az = 0;\r\n        _this.rotation = 0;\r\n        _this.rx = 0;\r\n        _this._x = 0;\r\n        _this._y = 0;\r\n        _this._cameraMoving = false;\r\n        _this._currentLerpTime = 0;\r\n        _this._lerpDuration = 1000; // 1 second\r\n        _this._lerpStart = null;\r\n        _this._lerpEnd = null;\r\n        //camera effects\r\n        _this._isShaking = false;\r\n        _this._shakeMagnitudeX = 0;\r\n        _this._shakeMagnitudeY = 0;\r\n        _this._shakeDuration = 0;\r\n        _this._elapsedShakeTime = 0;\r\n        _this._xShake = 0;\r\n        _this._yShake = 0;\r\n        _this._isZooming = false;\r\n        _this._zoomStart = 1;\r\n        _this._zoomEnd = 1;\r\n        _this._currentZoomTime = 0;\r\n        _this._zoomDuration = 0;\r\n        _this._zoomEasing = EasingFunctions.EaseInOutCubic;\r\n        _this._easing = EasingFunctions.EaseInOutCubic;\r\n        _this._isInitialized = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BaseCamera.prototype, \"x\", {\r\n        /**\r\n         * Get the camera's x position\r\n         */\r\n        get: function () {\r\n            return this._x;\r\n        },\r\n        /**\r\n         * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\r\n         */\r\n        set: function (value) {\r\n            if (!this._follow && !this._cameraMoving) {\r\n                this._x = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"y\", {\r\n        /**\r\n         * Get the camera's y position\r\n         */\r\n        get: function () {\r\n            return this._y;\r\n        },\r\n        /**\r\n         * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\r\n         */\r\n        set: function (value) {\r\n            if (!this._follow && !this._cameraMoving) {\r\n                this._y = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"pos\", {\r\n        /**\r\n         * Get the camera's position as a vector\r\n         */\r\n        get: function () {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        /**\r\n         * Set the cameras position\r\n         */\r\n        set: function (value) {\r\n            this.x = value.x;\r\n            this.y = value.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseCamera.prototype, \"vel\", {\r\n        /**\r\n         * Get the camera's velocity as a vector\r\n         */\r\n        get: function () {\r\n            return new Vector(this.dx, this.dy);\r\n        },\r\n        /**\r\n         * Set the camera's velocity\r\n         */\r\n        set: function (value) {\r\n            this.dx = value.x;\r\n            this.dy = value.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\r\n     */\r\n    BaseCamera.prototype.getFocus = function () {\r\n        return new Vector(this.x, this.y);\r\n    };\r\n    /**\r\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\r\n     *\r\n     * @param pos The target position to move to\r\n     * @param duration The duration in milliseconds the move should last\r\n     * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\r\n     * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\r\n     *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\r\n     */\r\n    BaseCamera.prototype.move = function (pos, duration, easingFn) {\r\n        if (easingFn === void 0) { easingFn = EasingFunctions.EaseInOutCubic; }\r\n        if (typeof easingFn !== 'function') {\r\n            throw 'Please specify an EasingFunction';\r\n        }\r\n        // cannot move when following an actor\r\n        if (this._follow) {\r\n            return new Promise().reject(pos);\r\n        }\r\n        // resolve existing promise, if any\r\n        if (this._lerpPromise && this._lerpPromise.state() === PromiseState.Pending) {\r\n            this._lerpPromise.resolve(pos);\r\n        }\r\n        this._lerpPromise = new Promise();\r\n        this._lerpStart = this.getFocus().clone();\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = pos;\r\n        this._currentLerpTime = 0;\r\n        this._cameraMoving = true;\r\n        this._easing = easingFn;\r\n        return this._lerpPromise;\r\n    };\r\n    /**\r\n     * Sets the camera to shake at the specified magnitudes for the specified duration\r\n     * @param magnitudeX  The x magnitude of the shake\r\n     * @param magnitudeY  The y magnitude of the shake\r\n     * @param duration    The duration of the shake in milliseconds\r\n     */\r\n    BaseCamera.prototype.shake = function (magnitudeX, magnitudeY, duration) {\r\n        this._isShaking = true;\r\n        this._shakeMagnitudeX = magnitudeX;\r\n        this._shakeMagnitudeY = magnitudeY;\r\n        this._shakeDuration = duration;\r\n    };\r\n    /**\r\n     * Zooms the camera in or out by the specified scale over the specified duration.\r\n     * If no duration is specified, it take effect immediately.\r\n     * @param scale    The scale of the zoom\r\n     * @param duration The duration of the zoom in milliseconds\r\n     */\r\n    BaseCamera.prototype.zoom = function (scale, duration, easingFn) {\r\n        if (duration === void 0) { duration = 0; }\r\n        if (easingFn === void 0) { easingFn = EasingFunctions.EaseInOutCubic; }\r\n        this._zoomPromise = new Promise();\r\n        if (duration) {\r\n            this._isZooming = true;\r\n            this._zoomEasing = easingFn;\r\n            this._currentZoomTime = 0;\r\n            this._zoomDuration = duration;\r\n            this._zoomStart = this.z;\r\n            this._zoomEnd = scale;\r\n        }\r\n        else {\r\n            this._isZooming = false;\r\n            this.z = scale;\r\n            this._zoomPromise.resolve(true);\r\n        }\r\n        return this._zoomPromise;\r\n    };\r\n    /**\r\n     * Gets the current zoom scale\r\n     */\r\n    BaseCamera.prototype.getZoom = function () {\r\n        return this.z;\r\n    };\r\n    /**\r\n     * Adds a new camera strategy to this camera\r\n     * @param cameraStrategy Instance of an [[ICameraStrategy]]\r\n     */\r\n    BaseCamera.prototype.addStrategy = function (cameraStrategy) {\r\n        this._cameraStrategies.push(cameraStrategy);\r\n    };\r\n    /**\r\n     * Removes a camera strategy by reference\r\n     * @param cameraStrategy Instance of an [[ICameraStrategy]]\r\n     */\r\n    BaseCamera.prototype.removeStrategy = function (cameraStrategy) {\r\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\r\n    };\r\n    /**\r\n     * Clears all camera strategies from the camera\r\n     */\r\n    BaseCamera.prototype.clearAllStrategies = function () {\r\n        this._cameraStrategies.length = 0;\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    BaseCamera.prototype._preupdate = function (engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Overridable\r\n    };\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    BaseCamera.prototype._postupdate = function (engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Overridable\r\n    };\r\n    Object.defineProperty(BaseCamera.prototype, \"isInitialized\", {\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BaseCamera.prototype._initialize = function (_engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(_engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(_engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    BaseCamera.prototype.onInitialize = function (_engine) {\r\n        // Overridable\r\n    };\r\n    BaseCamera.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    BaseCamera.prototype.update = function (_engine, delta) {\r\n        this._initialize(_engine);\r\n        this._preupdate(_engine, delta);\r\n        // Update placements based on linear algebra\r\n        this._x += (this.dx * delta) / 1000;\r\n        this._y += (this.dy * delta) / 1000;\r\n        this.z += (this.dz * delta) / 1000;\r\n        this.dx += (this.ax * delta) / 1000;\r\n        this.dy += (this.ay * delta) / 1000;\r\n        this.dz += (this.az * delta) / 1000;\r\n        this.rotation += (this.rx * delta) / 1000;\r\n        if (this._isZooming) {\r\n            if (this._currentZoomTime < this._zoomDuration) {\r\n                var zoomEasing = this._zoomEasing;\r\n                var newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\r\n                this.z = newZoom;\r\n                this._currentZoomTime += delta;\r\n            }\r\n            else {\r\n                this._isZooming = false;\r\n                this.z = this._zoomEnd;\r\n                this._currentZoomTime = 0;\r\n                this._zoomPromise.resolve(true);\r\n            }\r\n        }\r\n        if (this._cameraMoving) {\r\n            if (this._currentLerpTime < this._lerpDuration) {\r\n                var moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\r\n                var lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\r\n                this._x = lerpPoint.x;\r\n                this._y = lerpPoint.y;\r\n                this._currentLerpTime += delta;\r\n            }\r\n            else {\r\n                this._x = this._lerpEnd.x;\r\n                this._y = this._lerpEnd.y;\r\n                var end = this._lerpEnd.clone();\r\n                this._lerpStart = null;\r\n                this._lerpEnd = null;\r\n                this._currentLerpTime = 0;\r\n                this._cameraMoving = false;\r\n                // Order matters here, resolve should be last so any chain promises have a clean slate\r\n                this._lerpPromise.resolve(end);\r\n            }\r\n        }\r\n        if (this._isDoneShaking()) {\r\n            this._isShaking = false;\r\n            this._elapsedShakeTime = 0;\r\n            this._shakeMagnitudeX = 0;\r\n            this._shakeMagnitudeY = 0;\r\n            this._shakeDuration = 0;\r\n            this._xShake = 0;\r\n            this._yShake = 0;\r\n        }\r\n        else {\r\n            this._elapsedShakeTime += delta;\r\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\r\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\r\n        }\r\n        for (var _i = 0, _a = this._cameraStrategies; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            this.pos = s.action.call(s, s.target, this, _engine, delta);\r\n        }\r\n        this._postupdate(_engine, delta);\r\n    };\r\n    /**\r\n     * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\r\n     * @param ctx    Canvas context to apply transformations\r\n     * @param delta  The number of milliseconds since the last update\r\n     */\r\n    BaseCamera.prototype.draw = function (ctx) {\r\n        var focus = this.getFocus();\r\n        var canvasWidth = ctx.canvas.width;\r\n        var canvasHeight = ctx.canvas.height;\r\n        var pixelRatio = window.devicePixelRatio;\r\n        var zoom = this.getZoom();\r\n        var newCanvasWidth = canvasWidth / zoom / pixelRatio;\r\n        var newCanvasHeight = canvasHeight / zoom / pixelRatio;\r\n        ctx.scale(zoom, zoom);\r\n        ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\r\n    };\r\n    BaseCamera.prototype.debugDraw = function (ctx) {\r\n        var focus = this.getFocus();\r\n        ctx.fillStyle = 'red';\r\n        ctx.strokeStyle = 'white';\r\n        ctx.lineWidth = 3;\r\n        ctx.beginPath();\r\n        ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n    BaseCamera.prototype._isDoneShaking = function () {\r\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\r\n    };\r\n    return BaseCamera;\r\n}(Class));\r\nexport { BaseCamera };\r\n//# sourceMappingURL=Camera.js.map","/**\r\n * The Excalibur timer hooks into the internal timer and fires callbacks,\r\n * after a certain interval, optionally repeating.\r\n */\r\nvar Timer = /** @class */ (function () {\r\n    /**\r\n     * @param fcn        The callback to be fired after the interval is complete.\r\n     * @param interval   Interval length\r\n     * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.\r\n     * @param numberOfRepeats Specifies a maximum number of times that this timer will execute.\r\n     */\r\n    function Timer(fcn, interval, repeats, numberOfRepeats) {\r\n        this.id = 0;\r\n        this.interval = 10;\r\n        this.fcn = function () {\r\n            return;\r\n        };\r\n        this.repeats = false;\r\n        this.maxNumberOfRepeats = -1;\r\n        this._elapsedTime = 0;\r\n        this._totalTimeAlive = 0;\r\n        this._paused = false;\r\n        this._numberOfTicks = 0;\r\n        this.complete = false;\r\n        this.scene = null;\r\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = numberOfRepeats;\r\n            if (!repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.id = Timer.id++;\r\n        this.interval = interval || this.interval;\r\n        this.fcn = fcn || this.fcn;\r\n        this.repeats = repeats || this.repeats;\r\n    }\r\n    /**\r\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\r\n     * @param delta  Number of elapsed milliseconds since the last update.\r\n     */\r\n    Timer.prototype.update = function (delta) {\r\n        if (!this._paused) {\r\n            this._totalTimeAlive += delta;\r\n            this._elapsedTime += delta;\r\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\r\n                this.complete = true;\r\n            }\r\n            if (!this.complete && this._elapsedTime >= this.interval) {\r\n                this.fcn.call(this);\r\n                this._numberOfTicks++;\r\n                if (this.repeats) {\r\n                    this._elapsedTime = 0;\r\n                }\r\n                else {\r\n                    this.complete = true;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\r\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\r\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\r\n     */\r\n    Timer.prototype.reset = function (newInterval, newNumberOfRepeats) {\r\n        if (!!newInterval && newInterval >= 0) {\r\n            this.interval = newInterval;\r\n        }\r\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = newNumberOfRepeats;\r\n            if (!this.repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.complete = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n    };\r\n    Object.defineProperty(Timer.prototype, \"timesRepeated\", {\r\n        get: function () {\r\n            return this._numberOfTicks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Timer.prototype.getTimeRunning = function () {\r\n        return this._totalTimeAlive;\r\n    };\r\n    /**\r\n     * Pauses the timer so that no more time will be incremented towards the next call\r\n     */\r\n    Timer.prototype.pause = function () {\r\n        this._paused = true;\r\n    };\r\n    /**\r\n     * Unpauses the timer. Time will now increment towards the next call\r\n     */\r\n    Timer.prototype.unpause = function () {\r\n        this._paused = false;\r\n    };\r\n    /**\r\n     * Cancels the timer, preventing any further executions.\r\n     */\r\n    Timer.prototype.cancel = function () {\r\n        if (this.scene) {\r\n            this.scene.cancelTimer(this);\r\n        }\r\n    };\r\n    Timer.id = 0;\r\n    return Timer;\r\n}());\r\nexport { Timer };\r\n//# sourceMappingURL=Timer.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\nimport { Color } from './Drawing/Color';\r\nimport { Class } from './Class';\r\nimport { Vector } from './Algebra';\r\nimport { Logger } from './Util/Log';\r\nimport * as Events from './Events';\r\nimport { Configurable } from './Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar TileMapImpl = /** @class */ (function (_super) {\r\n    __extends(TileMapImpl, _super);\r\n    /**\r\n     * @param x             The x coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n     * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n     * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\r\n     * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\r\n     * @param rows          The number of rows in the TileMap (should not be changed once set)\r\n     * @param cols          The number of cols in the TileMap (should not be changed once set)\r\n     */\r\n    function TileMapImpl(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        var _this = _super.call(this) || this;\r\n        _this._collidingX = -1;\r\n        _this._collidingY = -1;\r\n        _this._onScreenXStart = 0;\r\n        _this._onScreenXEnd = 9999;\r\n        _this._onScreenYStart = 0;\r\n        _this._onScreenYEnd = 9999;\r\n        _this._spriteSheets = {};\r\n        _this.logger = Logger.getInstance();\r\n        _this.data = [];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            cellWidth = config.cellWidth;\r\n            cellHeight = config.cellHeight;\r\n            rows = config.rows;\r\n            cols = config.cols;\r\n        }\r\n        _this.x = xOrConfig;\r\n        _this.y = y;\r\n        _this.cellWidth = cellWidth;\r\n        _this.cellHeight = cellHeight;\r\n        _this.rows = rows;\r\n        _this.cols = cols;\r\n        _this.data = new Array(rows * cols);\r\n        for (var i = 0; i < cols; i++) {\r\n            for (var j = 0; j < rows; j++) {\r\n                (function () {\r\n                    var cd = new Cell(i * cellWidth + xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols);\r\n                    _this.data[i + j * cols] = cd;\r\n                })();\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    TileMapImpl.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    TileMapImpl.prototype.registerSpriteSheet = function (key, spriteSheet) {\r\n        this._spriteSheets[key] = spriteSheet;\r\n    };\r\n    /**\r\n     * Returns the intersection vector that can be used to resolve collisions with actors. If there\r\n     * is no collision null is returned.\r\n     */\r\n    TileMapImpl.prototype.collides = function (actor) {\r\n        var width = actor.pos.x + actor.getWidth();\r\n        var height = actor.pos.y + actor.getHeight();\r\n        var actorBounds = actor.getBounds();\r\n        var overlaps = [];\r\n        // trace points for overlap\r\n        for (var x = actorBounds.left; x <= width; x += Math.min(actor.getWidth() / 2, this.cellWidth / 2)) {\r\n            for (var y = actorBounds.top; y <= height; y += Math.min(actor.getHeight() / 2, this.cellHeight / 2)) {\r\n                var cell = this.getCellByPoint(x, y);\r\n                if (cell && cell.solid) {\r\n                    var overlap = actorBounds.collides(cell.getBounds());\r\n                    var dir = actor.getCenter().sub(cell.getCenter());\r\n                    if (overlap && overlap.dot(dir) > 0) {\r\n                        overlaps.push(overlap);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (overlaps.length === 0) {\r\n            return null;\r\n        }\r\n        // Return the smallest change other than zero\r\n        var result = overlaps.reduce(function (accum, next) {\r\n            var x = accum.x;\r\n            var y = accum.y;\r\n            if (Math.abs(accum.x) < Math.abs(next.x)) {\r\n                x = next.x;\r\n            }\r\n            if (Math.abs(accum.y) < Math.abs(next.y)) {\r\n                y = next.y;\r\n            }\r\n            return new Vector(x, y);\r\n        });\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by index (row major order)\r\n     */\r\n    TileMapImpl.prototype.getCellByIndex = function (index) {\r\n        return this.data[index];\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by its x and y coordinates\r\n     */\r\n    TileMapImpl.prototype.getCell = function (x, y) {\r\n        if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\r\n            return null;\r\n        }\r\n        return this.data[x + y * this.cols];\r\n    };\r\n    /**\r\n     * Returns the [[Cell]] by testing a point in global coordinates,\r\n     * returns `null` if no cell was found.\r\n     */\r\n    TileMapImpl.prototype.getCellByPoint = function (x, y) {\r\n        x = Math.floor((x - this.x) / this.cellWidth);\r\n        y = Math.floor((y - this.y) / this.cellHeight);\r\n        var cell = this.getCell(x, y);\r\n        if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\r\n            return cell;\r\n        }\r\n        return null;\r\n    };\r\n    TileMapImpl.prototype.update = function (engine, delta) {\r\n        this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\r\n        var worldCoordsUpperLeft = engine.screenToWorldCoordinates(new Vector(0, 0));\r\n        var worldCoordsLowerRight = engine.screenToWorldCoordinates(new Vector(engine.canvas.clientWidth, engine.canvas.clientHeight));\r\n        this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\r\n        this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\r\n        this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\r\n        this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\r\n        this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\r\n    };\r\n    /**\r\n     * Draws the tile map to the screen. Called by the [[Scene]].\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    TileMapImpl.prototype.draw = function (ctx, delta) {\r\n        this.emit('predraw', new Events.PreDrawEvent(ctx, delta, this));\r\n        ctx.save();\r\n        ctx.translate(this.x, this.y);\r\n        var x = this._onScreenXStart;\r\n        var xEnd = Math.min(this._onScreenXEnd, this.cols);\r\n        var y = this._onScreenYStart;\r\n        var yEnd = Math.min(this._onScreenYEnd, this.rows);\r\n        var cs, csi, cslen;\r\n        for (x; x < xEnd; x++) {\r\n            for (y; y < yEnd; y++) {\r\n                // get non-negative tile sprites\r\n                cs = this.getCell(x, y).sprites.filter(function (s) {\r\n                    return s.spriteId > -1;\r\n                });\r\n                for (csi = 0, cslen = cs.length; csi < cslen; csi++) {\r\n                    var ss = this._spriteSheets[cs[csi].spriteSheetKey];\r\n                    // draw sprite, warning if sprite doesn't exist\r\n                    if (ss) {\r\n                        var sprite = ss.getSprite(cs[csi].spriteId);\r\n                        if (sprite) {\r\n                            sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\r\n                        }\r\n                        else {\r\n                            this.logger.warn('Sprite does not exist for id', cs[csi].spriteId, 'in sprite sheet', cs[csi].spriteSheetKey, sprite, ss);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.logger.warn('Sprite sheet', cs[csi].spriteSheetKey, 'does not exist', ss);\r\n                    }\r\n                }\r\n            }\r\n            y = this._onScreenYStart;\r\n        }\r\n        ctx.restore();\r\n        this.emit('postdraw', new Events.PostDrawEvent(ctx, delta, this));\r\n    };\r\n    /**\r\n     * Draws all the tile map's debug info. Called by the [[Scene]].\r\n     * @param ctx  The current rendering context\r\n     */\r\n    TileMapImpl.prototype.debugDraw = function (ctx) {\r\n        var width = this.cols * this.cellWidth;\r\n        var height = this.rows * this.cellHeight;\r\n        ctx.save();\r\n        ctx.strokeStyle = Color.Red.toString();\r\n        for (var x = 0; x < this.cols + 1; x++) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.x + x * this.cellWidth, this.y);\r\n            ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\r\n            ctx.stroke();\r\n        }\r\n        for (var y = 0; y < this.rows + 1; y++) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.x, this.y + y * this.cellHeight);\r\n            ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\r\n            ctx.stroke();\r\n        }\r\n        var solid = Color.Red.clone();\r\n        solid.a = 0.3;\r\n        this.data\r\n            .filter(function (cell) {\r\n            return cell.solid;\r\n        })\r\n            .forEach(function (cell) {\r\n            ctx.fillStyle = solid.toString();\r\n            ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\r\n        });\r\n        if (this._collidingY > -1 && this._collidingX > -1) {\r\n            ctx.fillStyle = Color.Cyan.toString();\r\n            ctx.fillRect(this.x + this._collidingX * this.cellWidth, this.y + this._collidingY * this.cellHeight, this.cellWidth, this.cellHeight);\r\n        }\r\n        ctx.restore();\r\n    };\r\n    return TileMapImpl;\r\n}(Class));\r\nexport { TileMapImpl };\r\n/**\r\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\r\n * without the overhead of actors.\r\n *\r\n * [[include:TileMaps.md]]\r\n */\r\nvar TileMap = /** @class */ (function (_super) {\r\n    __extends(TileMap, _super);\r\n    function TileMap(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        return _super.call(this, xOrConfig, y, cellWidth, cellHeight, rows, cols) || this;\r\n    }\r\n    return TileMap;\r\n}(Configurable(TileMapImpl)));\r\nexport { TileMap };\r\n/**\r\n * Tile sprites are used to render a specific sprite from a [[TileMap]]'s spritesheet(s)\r\n */\r\nvar TileSprite = /** @class */ (function () {\r\n    /**\r\n     * @param spriteSheetKey  The key of the spritesheet to use\r\n     * @param spriteId        The index of the sprite in the [[SpriteSheet]]\r\n     */\r\n    function TileSprite(spriteSheetKey, spriteId) {\r\n        this.spriteSheetKey = spriteSheetKey;\r\n        this.spriteId = spriteId;\r\n    }\r\n    return TileSprite;\r\n}());\r\nexport { TileSprite };\r\n/**\r\n * @hidden\r\n */\r\nvar CellImpl = /** @class */ (function () {\r\n    /**\r\n     * @param x       Gets or sets x coordinate of the cell in world coordinates\r\n     * @param y       Gets or sets y coordinate of the cell in world coordinates\r\n     * @param width   Gets or sets the width of the cell\r\n     * @param height  Gets or sets the height of the cell\r\n     * @param index   The index of the cell in row major order\r\n     * @param solid   Gets or sets whether this cell is solid\r\n     * @param sprites The list of tile sprites to use to draw in this cell (in order)\r\n     */\r\n    function CellImpl(xOrConfig, y, width, height, index, solid, sprites) {\r\n        if (solid === void 0) { solid = false; }\r\n        if (sprites === void 0) { sprites = []; }\r\n        this.solid = false;\r\n        this.sprites = [];\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            var config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            width = config.width;\r\n            height = config.height;\r\n            index = config.index;\r\n            solid = config.solid;\r\n            sprites = config.sprites;\r\n        }\r\n        this.x = xOrConfig;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.index = index;\r\n        this.solid = solid;\r\n        this.sprites = sprites;\r\n        this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\r\n    }\r\n    /**\r\n     * Returns the bounding box for this cell\r\n     */\r\n    CellImpl.prototype.getBounds = function () {\r\n        return this._bounds;\r\n    };\r\n    /**\r\n     * Gets the center coordinate of this cell\r\n     */\r\n    CellImpl.prototype.getCenter = function () {\r\n        return new Vector(this.x + this.width / 2, this.y + this.height / 2);\r\n    };\r\n    /**\r\n     * Add another [[TileSprite]] to this cell\r\n     */\r\n    CellImpl.prototype.pushSprite = function (tileSprite) {\r\n        this.sprites.push(tileSprite);\r\n    };\r\n    /**\r\n     * Remove an instance of [[TileSprite]] from this cell\r\n     */\r\n    CellImpl.prototype.removeSprite = function (tileSprite) {\r\n        var index = -1;\r\n        if ((index = this.sprites.indexOf(tileSprite)) > -1) {\r\n            this.sprites.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Clear all sprites from this cell\r\n     */\r\n    CellImpl.prototype.clearSprites = function () {\r\n        this.sprites.length = 0;\r\n    };\r\n    return CellImpl;\r\n}());\r\nexport { CellImpl };\r\n/**\r\n * TileMap Cell\r\n *\r\n * A light-weight object that occupies a space in a collision map. Generally\r\n * created by a [[TileMap]].\r\n *\r\n * Cells can draw multiple sprites. Note that the order of drawing is the order\r\n * of the sprites in the array so the last one will be drawn on top. You can\r\n * use transparency to create layers this way.\r\n */\r\nvar Cell = /** @class */ (function (_super) {\r\n    __extends(Cell, _super);\r\n    function Cell(xOrConfig, y, width, height, index, solid, sprites) {\r\n        return _super.call(this, xOrConfig, y, width, height, index, solid, sprites) || this;\r\n    }\r\n    return Cell;\r\n}(Configurable(CellImpl)));\r\nexport { Cell };\r\n//# sourceMappingURL=TileMap.js.map","/**\r\n * Internal class used to build instances of AudioContext\r\n */\r\n/* istanbul ignore next */\r\nvar AudioContextFactory = /** @class */ (function () {\r\n    function AudioContextFactory() {\r\n    }\r\n    AudioContextFactory.create = function () {\r\n        if (!this._INSTANCE) {\r\n            if (window.AudioContext || window.webkitAudioContext) {\r\n                this._INSTANCE = new window.AudioContext() || new window.webkitAudioContext();\r\n            }\r\n        }\r\n        return this._INSTANCE;\r\n    };\r\n    AudioContextFactory._INSTANCE = null;\r\n    return AudioContextFactory;\r\n}());\r\nexport { AudioContextFactory };\r\n//# sourceMappingURL=AudioContext.js.map","import { AudioContextFactory } from '../Resources/Sound/AudioContext';\r\nvar WebAudio = /** @class */ (function () {\r\n    function WebAudio() {\r\n    }\r\n    /**\r\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\r\n     * right after a user interaction event. Typically used by [[PauseAfterLoader]]\r\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n     */\r\n    WebAudio.unlock = function () {\r\n        if (WebAudio._unlocked || !AudioContextFactory.create()) {\r\n            return;\r\n        }\r\n        var audioContext = AudioContextFactory.create();\r\n        // create empty buffer and play it\r\n        var buffer = audioContext.createBuffer(1, 1, 22050);\r\n        var source = audioContext.createBufferSource();\r\n        var ended = false;\r\n        source.buffer = buffer;\r\n        source.connect(audioContext.destination);\r\n        source.onended = function () { return (ended = true); };\r\n        if (source.noteOn) {\r\n            // deprecated\r\n            source.noteOn(0);\r\n        }\r\n        else {\r\n            source.start(0);\r\n        }\r\n        // by checking the play state after some time, we know if we're really unlocked\r\n        setTimeout(function () {\r\n            if (source.playbackState) {\r\n                var legacySource = source;\r\n                if (legacySource.playbackState === legacySource.PLAYING_STATE || legacySource.playbackState === legacySource.FINISHED_STATE) {\r\n                    WebAudio._unlocked = true;\r\n                }\r\n            }\r\n            else {\r\n                if (audioContext.currentTime > 0 || ended) {\r\n                    WebAudio._unlocked = true;\r\n                }\r\n            }\r\n        }, 0);\r\n    };\r\n    WebAudio.isUnlocked = function () {\r\n        return this._unlocked;\r\n    };\r\n    WebAudio._unlocked = false;\r\n    return WebAudio;\r\n}());\r\nexport { WebAudio };\r\n//# sourceMappingURL=WebAudio.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { WebAudio } from './Util/WebAudio';\r\nimport { Logger } from './Util/Log';\r\nimport { Promise, PromiseState } from './Promises';\r\nimport { Class } from './Class';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\n/**\r\n * Pre-loading assets\r\n *\r\n * The loader provides a mechanism to preload multiple resources at\r\n * one time. The loader must be passed to the engine in order to\r\n * trigger the loading progress bar.\r\n *\r\n * The [[Loader]] itself implements [[ILoadable]] so you can load loaders.\r\n *\r\n * ## Example: Pre-loading resources for a game\r\n *\r\n * ```js\r\n * // create a loader\r\n * var loader = new ex.Loader();\r\n *\r\n * // create a resource dictionary (best practice is to keep a separate file)\r\n * var resources = {\r\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\r\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\r\n * };\r\n *\r\n * // loop through dictionary and add to loader\r\n * for (var loadable in resources) {\r\n *   if (resources.hasOwnProperty(loadable)) {\r\n *     loader.addResource(resources[loadable]);\r\n *   }\r\n * }\r\n *\r\n * // start game\r\n * game.start(loader).then(function () {\r\n *   console.log(\"Game started!\");\r\n * });\r\n * ```\r\n */\r\nvar Loader = /** @class */ (function (_super) {\r\n    __extends(Loader, _super);\r\n    /**\r\n     * @param loadables  Optionally provide the list of resources you want to load at constructor time\r\n     */\r\n    function Loader(loadables) {\r\n        var _this = _super.call(this) || this;\r\n        _this._resourceList = [];\r\n        _this._index = 0;\r\n        _this._resourceCount = 0;\r\n        _this._numLoaded = 0;\r\n        _this._progressCounts = {};\r\n        _this._totalCounts = {};\r\n        // logo drawing stuff\r\n        /* tslint:disable:max-line-length */\r\n        // base64 string encoding of the excalibur logo (logo-white.png)\r\n        _this.logo = 'data:image/png;base64,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';\r\n        /* tslint:enable:max-line-length */\r\n        _this.logoWidth = 468;\r\n        _this.logoHeight = 118;\r\n        _this.backgroundColor = '#176BAA';\r\n        _this.getData = function () {\r\n            return;\r\n        };\r\n        _this.setData = function () {\r\n            return;\r\n        };\r\n        _this.processData = function () {\r\n            return;\r\n        };\r\n        _this.onprogress = function (e) {\r\n            Logger.getInstance().debug('[ex.Loader] Loading ' + ((100 * e.loaded) / e.total).toFixed(0));\r\n            return;\r\n        };\r\n        _this.oncomplete = function () {\r\n            return;\r\n        };\r\n        _this.onerror = function () {\r\n            return;\r\n        };\r\n        if (loadables) {\r\n            _this.addResources(loadables);\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Loader.prototype, \"_image\", {\r\n        get: function () {\r\n            if (!this._imageElement) {\r\n                this._imageElement = new Image();\r\n                this._imageElement.src = this.logo;\r\n            }\r\n            return this._imageElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Loader.prototype.wireEngine = function (engine) {\r\n        this._engine = engine;\r\n    };\r\n    /**\r\n     * Add a resource to the loader to load\r\n     * @param loadable  Resource to add\r\n     */\r\n    Loader.prototype.addResource = function (loadable) {\r\n        var key = this._index++;\r\n        this._resourceList.push(loadable);\r\n        this._progressCounts[key] = 0;\r\n        this._totalCounts[key] = 1;\r\n        this._resourceCount++;\r\n    };\r\n    /**\r\n     * Add a list of resources to the loader to load\r\n     * @param loadables  The list of resources to load\r\n     */\r\n    Loader.prototype.addResources = function (loadables) {\r\n        var i = 0, len = loadables.length;\r\n        for (i; i < len; i++) {\r\n            this.addResource(loadables[i]);\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if the loader has completely loaded all resources\r\n     */\r\n    Loader.prototype.isLoaded = function () {\r\n        return this._numLoaded === this._resourceCount;\r\n    };\r\n    /**\r\n     * Begin loading all of the supplied resources, returning a promise\r\n     * that resolves when loading of all is complete\r\n     */\r\n    Loader.prototype.load = function () {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        var me = this;\r\n        if (this._resourceList.length === 0) {\r\n            me.oncomplete.call(me);\r\n            return complete.resolve();\r\n        }\r\n        var progressArray = new Array(this._resourceList.length);\r\n        var progressChunks = this._resourceList.length;\r\n        this._resourceList.forEach(function (r, i) {\r\n            if (_this._engine) {\r\n                r.wireEngine(_this._engine);\r\n            }\r\n            r.onprogress = function (e) {\r\n                var total = e.total;\r\n                var loaded = e.loaded;\r\n                progressArray[i] = { loaded: (loaded / total) * (100 / progressChunks), total: 100 };\r\n                var progressResult = progressArray.reduce(function (accum, next) {\r\n                    return { loaded: accum.loaded + next.loaded, total: 100 };\r\n                }, { loaded: 0, total: 100 });\r\n                me.onprogress.call(me, progressResult);\r\n            };\r\n            r.oncomplete = r.onerror = function () {\r\n                me._numLoaded++;\r\n                if (me._numLoaded === me._resourceCount) {\r\n                    me.oncomplete.call(me);\r\n                    complete.resolve();\r\n                }\r\n            };\r\n        });\r\n        function loadNext(list, index) {\r\n            if (!list[index]) {\r\n                return;\r\n            }\r\n            list[index].load().then(function () {\r\n                loadNext(list, index + 1);\r\n            });\r\n        }\r\n        loadNext(this._resourceList, 0);\r\n        return complete;\r\n    };\r\n    /**\r\n     * Loader draw function. Draws the default Excalibur loading screen.\r\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\r\n     * to customize the drawing, or just override entire method.\r\n     */\r\n    Loader.prototype.draw = function (ctx) {\r\n        var canvasHeight = this._engine.canvasHeight / window.devicePixelRatio;\r\n        var canvasWidth = this._engine.canvasWidth / window.devicePixelRatio;\r\n        ctx.fillStyle = this.backgroundColor;\r\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        var y = canvasHeight / 2;\r\n        var width = Math.min(this.logoWidth, canvasWidth * 0.75);\r\n        var x = canvasWidth / 2 - width / 2;\r\n        var imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\r\n        var oldAntialias = this._engine.getAntialiasing();\r\n        this._engine.setAntialiasing(true);\r\n        ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, x, y - imageHeight - 20, width, imageHeight);\r\n        // loading box\r\n        ctx.lineWidth = 2;\r\n        DrawUtil.roundRect(ctx, x, y, width, 20, 10);\r\n        var progress = width * (this._numLoaded / this._resourceCount);\r\n        var margin = 5;\r\n        var progressWidth = progress - margin * 2;\r\n        var height = 20 - margin * 2;\r\n        DrawUtil.roundRect(ctx, x + margin, y + margin, progressWidth > 0 ? progressWidth : 0, height, 5, null, Color.White);\r\n        this._engine.setAntialiasing(oldAntialias);\r\n    };\r\n    /**\r\n     * Perform any calculations or logic in the `update` method. The default `Loader` does not\r\n     * do anything in this method so it is safe to override.\r\n     */\r\n    Loader.prototype.update = function (_engine, _delta) {\r\n        // overridable update\r\n    };\r\n    return Loader;\r\n}(Class));\r\nexport { Loader };\r\n/**\r\n * A [[Loader]] that pauses after loading to allow user\r\n * to proceed to play the game. Typically you will\r\n * want to use this loader for iOS to allow sounds\r\n * to play after loading (Apple Safari requires user\r\n * interaction to allow sounds, even for games)\r\n *\r\n * **Note:** Because Loader is not part of a Scene, you must\r\n * call `update` and `draw` manually on \"child\" objects.\r\n *\r\n * ## Implementing a Trigger\r\n *\r\n * The `PauseAfterLoader` requires an element to act as the trigger button\r\n * to start the game.\r\n *\r\n * For example, let's create an `<a>` tag to be our trigger and call it `tap-to-play`.\r\n *\r\n * ```html\r\n * <div id=\"wrapper\">\r\n *    <canvas id=\"game\"></canvas>\r\n *    <a id=\"tap-to-play\" href='javascript:void(0);'>Tap to Play</a>\r\n * </div>\r\n * ```\r\n *\r\n * We've put it inside a wrapper to position it properly over the game canvas.\r\n *\r\n * Now let's add some CSS to style it (insert into `<head>`):\r\n *\r\n * ```html\r\n * <style>\r\n *     #wrapper {\r\n *         position: relative;\r\n *         width: 500px;\r\n *         height: 500px;\r\n *     }\r\n *     #tap-to-play {\r\n *         display: none;\r\n *         font-size: 24px;\r\n *         font-family: sans-serif;\r\n *         text-align: center;\r\n *         border: 3px solid white;\r\n *         position: absolute;\r\n *         color: white;\r\n *         width: 200px;\r\n *         height: 50px;\r\n *         line-height: 50px;\r\n *         text-decoration: none;\r\n *         left: 147px;\r\n *         top: 80%;\r\n *     }\r\n * </style>\r\n * ```\r\n *\r\n * Now we can create a `PauseAfterLoader` with a reference to our trigger button:\r\n *\r\n * ```ts\r\n * var loader = new ex.PauseAfterLoader('tap-to-play', [...]);\r\n * ```\r\n *\r\n * ## Use PauseAfterLoader for iOS\r\n *\r\n * The primary use case for pausing before starting the game is to\r\n * pass Apple's requirement of user interaction. The Web Audio context\r\n * in Safari is disabled by default until user interaction.\r\n *\r\n * Therefore, you can use this snippet to only use PauseAfterLoader when\r\n * iOS is detected (see [this thread](http://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\r\n * for more techniques).\r\n *\r\n * ```ts\r\n * var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(<any>window).MSStream;\r\n * var loader: ex.Loader = iOS ? new ex.PauseAfterLoader('tap-to-play') : new ex.Loader();\r\n *\r\n * loader.addResource(...);\r\n * ```\r\n */\r\nvar PauseAfterLoader = /** @class */ (function (_super) {\r\n    __extends(PauseAfterLoader, _super);\r\n    function PauseAfterLoader(triggerElementId, loadables) {\r\n        var _this = _super.call(this, loadables) || this;\r\n        _this._handleOnTrigger = function () {\r\n            if (_this._waitPromise.state() !== PromiseState.Pending) {\r\n                return false;\r\n            }\r\n            // unlock Safari WebAudio context\r\n            WebAudio.unlock();\r\n            // continue to play game\r\n            _this._waitPromise.resolve(_this._loadedValue);\r\n            // hide DOM element\r\n            _this._playTrigger.style.display = 'none';\r\n            return false;\r\n        };\r\n        _this._playTrigger = document.getElementById(triggerElementId);\r\n        _this._playTrigger.addEventListener('click', _this._handleOnTrigger);\r\n        return _this;\r\n    }\r\n    PauseAfterLoader.prototype.load = function () {\r\n        var _this = this;\r\n        this._waitPromise = new Promise();\r\n        // wait until user indicates to proceed before finishing load\r\n        _super.prototype.load.call(this).then(function (value) {\r\n            _this._loadedValue = value;\r\n            // show element\r\n            _this._playTrigger.style.display = 'block';\r\n        }, function (value) {\r\n            _this._waitPromise.reject(value);\r\n        });\r\n        return this._waitPromise;\r\n    };\r\n    return PauseAfterLoader;\r\n}(Loader));\r\nexport { PauseAfterLoader };\r\n//# sourceMappingURL=Loader.js.map","import { Logger } from './Log';\r\n/**\r\n * This is the list of features that will be used to log the supported\r\n * features to the console when Detector.logBrowserFeatures() is called.\r\n */\r\nvar REPORTED_FEATURES = {\r\n    webgl: 'WebGL',\r\n    webaudio: 'WebAudio',\r\n    gamepadapi: 'Gamepad API'\r\n};\r\n/**\r\n * Excalibur internal feature detection helper class\r\n */\r\nvar Detector = /** @class */ (function () {\r\n    function Detector() {\r\n        this._features = null;\r\n        this.failedTests = [];\r\n        // critical browser features required for ex to run\r\n        this._criticalTests = {\r\n            // Test canvas/2d context support\r\n            canvasSupport: function () {\r\n                var elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('2d'));\r\n            },\r\n            // Test array buffer support ex uses for downloading binary data\r\n            arrayBufferSupport: function () {\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.open('GET', '/');\r\n                try {\r\n                    xhr.responseType = 'arraybuffer';\r\n                }\r\n                catch (e) {\r\n                    return false;\r\n                }\r\n                return xhr.responseType === 'arraybuffer';\r\n            },\r\n            // Test data urls ex uses for sprites\r\n            dataUrlSupport: function () {\r\n                var canvas = document.createElement('canvas');\r\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\r\n            },\r\n            // Test object url support for loading\r\n            objectUrlSupport: function () {\r\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\r\n            },\r\n            // RGBA support for colors\r\n            rgbaSupport: function () {\r\n                var style = document.createElement('a').style;\r\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\r\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\r\n            }\r\n        };\r\n        // warnings excalibur performance will be degraded\r\n        this._warningTest = {\r\n            webAudioSupport: function () {\r\n                return !!(window.AudioContext ||\r\n                    window.webkitAudioContext ||\r\n                    window.mozAudioContext ||\r\n                    window.msAudioContext ||\r\n                    window.oAudioContext);\r\n            },\r\n            webglSupport: function () {\r\n                var elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('webgl'));\r\n            }\r\n        };\r\n        this._features = this._loadBrowserFeatures();\r\n    }\r\n    /**\r\n     * Returns a map of currently supported browser features. This method\r\n     * treats the features as a singleton and will only calculate feature\r\n     * support if it has not previously been done.\r\n     */\r\n    Detector.prototype.getBrowserFeatures = function () {\r\n        if (this._features === null) {\r\n            this._features = this._loadBrowserFeatures();\r\n        }\r\n        return this._features;\r\n    };\r\n    /**\r\n     * Report on non-critical browser support for debugging purposes.\r\n     * Use native browser console colors for visibility.\r\n     */\r\n    Detector.prototype.logBrowserFeatures = function () {\r\n        var msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\r\n        var args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\r\n        var supported = this.getBrowserFeatures();\r\n        for (var _i = 0, _a = Object.keys(REPORTED_FEATURES); _i < _a.length; _i++) {\r\n            var feature = _a[_i];\r\n            if (supported[feature]) {\r\n                msg += '(%c\\u2713%c)'; // ()\r\n                args.push('font-weight: bold; color: green');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            else {\r\n                msg += '(%c\\u2717%c)'; // ()\r\n                args.push('font-weight: bold; color: red');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\r\n        }\r\n        args.unshift(msg);\r\n        console.log.apply(console, args);\r\n    };\r\n    /**\r\n     * Executes several IIFE's to get a constant reference to supported\r\n     * features within the current execution context.\r\n     */\r\n    Detector.prototype._loadBrowserFeatures = function () {\r\n        var _this = this;\r\n        return {\r\n            // IIFE to check canvas support\r\n            canvas: (function () {\r\n                return _this._criticalTests.canvasSupport();\r\n            })(),\r\n            // IIFE to check arraybuffer support\r\n            arraybuffer: (function () {\r\n                return _this._criticalTests.arrayBufferSupport();\r\n            })(),\r\n            // IIFE to check dataurl support\r\n            dataurl: (function () {\r\n                return _this._criticalTests.dataUrlSupport();\r\n            })(),\r\n            // IIFE to check objecturl support\r\n            objecturl: (function () {\r\n                return _this._criticalTests.objectUrlSupport();\r\n            })(),\r\n            // IIFE to check rgba support\r\n            rgba: (function () {\r\n                return _this._criticalTests.rgbaSupport();\r\n            })(),\r\n            // IIFE to check webaudio support\r\n            webaudio: (function () {\r\n                return _this._warningTest.webAudioSupport();\r\n            })(),\r\n            // IIFE to check webgl support\r\n            webgl: (function () {\r\n                return _this._warningTest.webglSupport();\r\n            })(),\r\n            // IIFE to check gamepadapi support\r\n            gamepadapi: (function () {\r\n                return !!navigator.getGamepads;\r\n            })()\r\n        };\r\n    };\r\n    Detector.prototype.test = function () {\r\n        // Critical test will for ex not to run\r\n        var failedCritical = false;\r\n        for (var test in this._criticalTests) {\r\n            if (!this._criticalTests[test].call(this)) {\r\n                this.failedTests.push(test);\r\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\r\n                failedCritical = true;\r\n            }\r\n        }\r\n        if (failedCritical) {\r\n            return false;\r\n        }\r\n        // Warning tests do not for ex to return false to compatibility\r\n        for (var warning in this._warningTest) {\r\n            if (!this._warningTest[warning]()) {\r\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    return Detector;\r\n}());\r\nexport { Detector };\r\n//# sourceMappingURL=Detector.js.map","import { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { Logger } from '../Util/Log';\r\n/**\r\n * Dynamic Tree Node used for tracking bounds within the tree\r\n */\r\nvar TreeNode = /** @class */ (function () {\r\n    function TreeNode(parent) {\r\n        this.parent = parent;\r\n        this.parent = parent || null;\r\n        this.body = null;\r\n        this.bounds = new BoundingBox();\r\n        this.left = null;\r\n        this.right = null;\r\n        this.height = 0;\r\n    }\r\n    TreeNode.prototype.isLeaf = function () {\r\n        return !this.left && !this.right;\r\n    };\r\n    return TreeNode;\r\n}());\r\nexport { TreeNode };\r\n/**\r\n * The DynamicTrees provides a spatial partiioning data structure for quickly querying for overlapping bounding boxes for\r\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\r\n *\r\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\r\n * Every non-leaf node is a bounding box that contains child bounding boxes.\r\n */\r\nvar DynamicTree = /** @class */ (function () {\r\n    function DynamicTree(worldBounds) {\r\n        if (worldBounds === void 0) { worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE); }\r\n        this.worldBounds = worldBounds;\r\n        this.root = null;\r\n        this.nodes = {};\r\n    }\r\n    /**\r\n     * Inserts a node into the dynamic tree\r\n     */\r\n    DynamicTree.prototype._insert = function (leaf) {\r\n        // If there are no nodes in the tree, make this the root leaf\r\n        if (this.root === null) {\r\n            this.root = leaf;\r\n            this.root.parent = null;\r\n            return;\r\n        }\r\n        // Search the tree for a node that is not a leaf and find the best place to insert\r\n        var leafAABB = leaf.bounds;\r\n        var currentRoot = this.root;\r\n        while (!currentRoot.isLeaf()) {\r\n            var left = currentRoot.left;\r\n            var right = currentRoot.right;\r\n            var area = currentRoot.bounds.getPerimeter();\r\n            var combinedAABB = currentRoot.bounds.combine(leafAABB);\r\n            var combinedArea = combinedAABB.getPerimeter();\r\n            // Calculate cost heuristic for creating a new parent and leaf\r\n            var cost = 2 * combinedArea;\r\n            // Minimum cost of pushing the leaf down the tree\r\n            var inheritanceCost = 2 * (combinedArea - area);\r\n            // Cost of descending\r\n            var leftCost = 0;\r\n            var leftCombined = leafAABB.combine(left.bounds);\r\n            var newArea;\r\n            var oldArea;\r\n            if (left.isLeaf()) {\r\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = left.bounds.getPerimeter();\r\n                newArea = leftCombined.getPerimeter();\r\n                leftCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            var rightCost = 0;\r\n            var rightCombined = leafAABB.combine(right.bounds);\r\n            if (right.isLeaf()) {\r\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = right.bounds.getPerimeter();\r\n                newArea = rightCombined.getPerimeter();\r\n                rightCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            // cost is acceptable\r\n            if (cost < leftCost && cost < rightCost) {\r\n                break;\r\n            }\r\n            // Descend to the depths\r\n            if (leftCost < rightCost) {\r\n                currentRoot = left;\r\n            }\r\n            else {\r\n                currentRoot = right;\r\n            }\r\n        }\r\n        // Create the new parent node and insert into the tree\r\n        var oldParent = currentRoot.parent;\r\n        var newParent = new TreeNode(oldParent);\r\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\r\n        newParent.height = currentRoot.height + 1;\r\n        if (oldParent !== null) {\r\n            // The sibling node was not the root\r\n            if (oldParent.left === currentRoot) {\r\n                oldParent.left = newParent;\r\n            }\r\n            else {\r\n                oldParent.right = newParent;\r\n            }\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n        }\r\n        else {\r\n            // The sibling node was the root\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n            this.root = newParent;\r\n        }\r\n        // Walk up the tree fixing heights and AABBs\r\n        var currentNode = leaf.parent;\r\n        while (currentNode) {\r\n            currentNode = this._balance(currentNode);\r\n            if (!currentNode.left) {\r\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\r\n            }\r\n            if (!currentNode.right) {\r\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\r\n            }\r\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n            currentNode = currentNode.parent;\r\n        }\r\n    };\r\n    /**\r\n     * Removes a node from the dynamic tree\r\n     */\r\n    DynamicTree.prototype._remove = function (leaf) {\r\n        if (leaf === this.root) {\r\n            this.root = null;\r\n            return;\r\n        }\r\n        var parent = leaf.parent;\r\n        var grandParent = parent.parent;\r\n        var sibling;\r\n        if (parent.left === leaf) {\r\n            sibling = parent.right;\r\n        }\r\n        else {\r\n            sibling = parent.left;\r\n        }\r\n        if (grandParent) {\r\n            if (grandParent.left === parent) {\r\n                grandParent.left = sibling;\r\n            }\r\n            else {\r\n                grandParent.right = sibling;\r\n            }\r\n            sibling.parent = grandParent;\r\n            var currentNode = grandParent;\r\n            while (currentNode) {\r\n                currentNode = this._balance(currentNode);\r\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n                currentNode = currentNode.parent;\r\n            }\r\n        }\r\n        else {\r\n            this.root = sibling;\r\n            sibling.parent = null;\r\n        }\r\n    };\r\n    /**\r\n     * Tracks a body in the dynamic tree\r\n     */\r\n    DynamicTree.prototype.trackBody = function (body) {\r\n        var node = new TreeNode();\r\n        node.body = body;\r\n        node.bounds = body.getBounds();\r\n        node.bounds.left -= 2;\r\n        node.bounds.top -= 2;\r\n        node.bounds.right += 2;\r\n        node.bounds.bottom += 2;\r\n        this.nodes[body.actor.id] = node;\r\n        this._insert(node);\r\n    };\r\n    /**\r\n     * Updates the dynamic tree given the current bounds of each body being tracked\r\n     */\r\n    DynamicTree.prototype.updateBody = function (body) {\r\n        var node = this.nodes[body.actor.id];\r\n        if (!node) {\r\n            return false;\r\n        }\r\n        var b = body.getBounds();\r\n        // if the body is outside the world no longer update it\r\n        if (!this.worldBounds.contains(b)) {\r\n            Logger.getInstance().warn('Actor with id ' + body.actor.id + ' is outside the world bounds and will no longer be tracked for physics');\r\n            this.untrackBody(body);\r\n            return false;\r\n        }\r\n        if (node.bounds.contains(b)) {\r\n            return false;\r\n        }\r\n        this._remove(node);\r\n        b.left -= Physics.boundsPadding;\r\n        b.top -= Physics.boundsPadding;\r\n        b.right += Physics.boundsPadding;\r\n        b.bottom += Physics.boundsPadding;\r\n        var multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplyer;\r\n        var multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplyer;\r\n        if (multdx < 0) {\r\n            b.left += multdx;\r\n        }\r\n        else {\r\n            b.right += multdx;\r\n        }\r\n        if (multdy < 0) {\r\n            b.top += multdy;\r\n        }\r\n        else {\r\n            b.bottom += multdy;\r\n        }\r\n        node.bounds = b;\r\n        this._insert(node);\r\n        return true;\r\n    };\r\n    /**\r\n     * Untracks a body from the dynamic tree\r\n     */\r\n    DynamicTree.prototype.untrackBody = function (body) {\r\n        var node = this.nodes[body.actor.id];\r\n        if (!node) {\r\n            return;\r\n        }\r\n        this._remove(node);\r\n        this.nodes[body.actor.id] = null;\r\n        delete this.nodes[body.actor.id];\r\n    };\r\n    /**\r\n     * Balances the tree about a node\r\n     */\r\n    DynamicTree.prototype._balance = function (node) {\r\n        if (node === null) {\r\n            throw new Error('Cannot balance at null node');\r\n        }\r\n        if (node.isLeaf() || node.height < 2) {\r\n            return node;\r\n        }\r\n        var left = node.left;\r\n        var right = node.right;\r\n        var a = node;\r\n        var b = left;\r\n        var c = right;\r\n        var d = left.left;\r\n        var e = left.right;\r\n        var f = right.left;\r\n        var g = right.right;\r\n        var balance = c.height - b.height;\r\n        // Rotate c node up\r\n        if (balance > 1) {\r\n            // Swap the right node with it's parent\r\n            c.left = a;\r\n            c.parent = a.parent;\r\n            a.parent = c;\r\n            // The original node's old parent should point to the right node\r\n            // this is mega confusing\r\n            if (c.parent) {\r\n                if (c.parent.left === a) {\r\n                    c.parent.left = c;\r\n                }\r\n                else {\r\n                    c.parent.right = c;\r\n                }\r\n            }\r\n            else {\r\n                this.root = c;\r\n            }\r\n            // Rotate\r\n            if (f.height > g.height) {\r\n                c.right = f;\r\n                a.right = g;\r\n                g.parent = a;\r\n                a.bounds = b.bounds.combine(g.bounds);\r\n                c.bounds = a.bounds.combine(f.bounds);\r\n                a.height = 1 + Math.max(b.height, g.height);\r\n                c.height = 1 + Math.max(a.height, f.height);\r\n            }\r\n            else {\r\n                c.right = g;\r\n                a.right = f;\r\n                f.parent = a;\r\n                a.bounds = b.bounds.combine(f.bounds);\r\n                c.bounds = a.bounds.combine(g.bounds);\r\n                a.height = 1 + Math.max(b.height, f.height);\r\n                c.height = 1 + Math.max(a.height, g.height);\r\n            }\r\n            return c;\r\n        }\r\n        // Rotate left node up\r\n        if (balance < -1) {\r\n            // swap\r\n            b.left = a;\r\n            b.parent = a.parent;\r\n            a.parent = b;\r\n            // node's old parent should point to b\r\n            if (b.parent) {\r\n                if (b.parent.left === a) {\r\n                    b.parent.left = b;\r\n                }\r\n                else {\r\n                    if (b.parent.right !== a) {\r\n                        throw 'Error rotating Dynamic Tree';\r\n                    }\r\n                    b.parent.right = b;\r\n                }\r\n            }\r\n            else {\r\n                this.root = b;\r\n            }\r\n            // rotate\r\n            if (d.height > e.height) {\r\n                b.right = d;\r\n                a.left = e;\r\n                e.parent = a;\r\n                a.bounds = c.bounds.combine(e.bounds);\r\n                b.bounds = a.bounds.combine(d.bounds);\r\n                a.height = 1 + Math.max(c.height, e.height);\r\n                b.height = 1 + Math.max(a.height, d.height);\r\n            }\r\n            else {\r\n                b.right = e;\r\n                a.left = d;\r\n                d.parent = a;\r\n                a.bounds = c.bounds.combine(d.bounds);\r\n                b.bounds = a.bounds.combine(e.bounds);\r\n                a.height = 1 + Math.max(c.height, d.height);\r\n                b.height = 1 + Math.max(a.height, e.height);\r\n            }\r\n            return b;\r\n        }\r\n        return node;\r\n    };\r\n    /**\r\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\r\n     */\r\n    DynamicTree.prototype.getHeight = function () {\r\n        if (this.root === null) {\r\n            return 0;\r\n        }\r\n        return this.root.height;\r\n    };\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\r\n     *\r\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\r\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\r\n     * the tree until all possible colliders have been returned.\r\n     */\r\n    DynamicTree.prototype.query = function (body, callback) {\r\n        var bounds = body.getBounds();\r\n        var helper = function (currentNode) {\r\n            if (currentNode && currentNode.bounds.collides(bounds)) {\r\n                if (currentNode.isLeaf() && currentNode.body !== body) {\r\n                    if (callback.call(body, currentNode.body)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        helper(this.root);\r\n    };\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\r\n     * long ray to test the tree specified by `max`.\r\n     *\r\n     * In the query callback, it will be passed a potential body that intersects with the racast. Returning true from this\r\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\r\n     * the tree until all possible bodies that would intersect with the ray have been returned.\r\n     */\r\n    DynamicTree.prototype.rayCastQuery = function (ray, max, callback) {\r\n        if (max === void 0) { max = Infinity; }\r\n        var helper = function (currentNode) {\r\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\r\n                if (currentNode.isLeaf()) {\r\n                    if (callback.call(ray, currentNode.body)) {\r\n                        // ray hit a leaf! return the body\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    // ray hit but not at a leaf, recurse deeper\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false; // ray missed\r\n        };\r\n        helper(this.root);\r\n    };\r\n    DynamicTree.prototype.getNodes = function () {\r\n        var helper = function (currentNode) {\r\n            if (currentNode) {\r\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        return helper(this.root);\r\n    };\r\n    DynamicTree.prototype.debugDraw = function (ctx) {\r\n        // draw all the nodes in the Dynamic Tree\r\n        var helper = function (currentNode) {\r\n            if (currentNode) {\r\n                if (currentNode.isLeaf()) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = 'green';\r\n                }\r\n                else {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = 'white';\r\n                }\r\n                currentNode.bounds.debugDraw(ctx);\r\n                if (currentNode.left) {\r\n                    helper(currentNode.left);\r\n                }\r\n                if (currentNode.right) {\r\n                    helper(currentNode.right);\r\n                }\r\n            }\r\n        };\r\n        helper(this.root);\r\n    };\r\n    return DynamicTree;\r\n}());\r\nexport { DynamicTree };\r\n//# sourceMappingURL=DynamicTree.js.map","import { Physics } from './../Physics';\r\nimport { DynamicTree } from './DynamicTree';\r\nimport { Pair } from './Pair';\r\nimport { Vector, Ray } from '../Algebra';\r\nimport { CollisionType } from '../Actor';\r\nimport { Logger } from '../Util/Log';\r\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\r\nvar DynamicTreeCollisionBroadphase = /** @class */ (function () {\r\n    function DynamicTreeCollisionBroadphase() {\r\n        this._dynamicCollisionTree = new DynamicTree();\r\n        this._collisionHash = {};\r\n        this._collisionPairCache = [];\r\n        this._lastFramePairs = [];\r\n        this._lastFramePairsHash = {};\r\n    }\r\n    /**\r\n     * Tracks a physics body for collisions\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.track = function (target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot track null physics body');\r\n            return;\r\n        }\r\n        this._dynamicCollisionTree.trackBody(target);\r\n    };\r\n    /**\r\n     * Untracks a physics body\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.untrack = function (target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot untrack a null physics body');\r\n            return;\r\n        }\r\n        this._dynamicCollisionTree.untrackBody(target);\r\n    };\r\n    DynamicTreeCollisionBroadphase.prototype._canCollide = function (actorA, actorB) {\r\n        // if the collision pair has been calculated already short circuit\r\n        var hash = Pair.calculatePairHash(actorA.body, actorB.body);\r\n        if (this._collisionHash[hash]) {\r\n            return false; // pair exists easy exit return false\r\n        }\r\n        // if both are fixed short circuit\r\n        if (actorA.collisionType === CollisionType.Fixed && actorB.collisionType === CollisionType.Fixed) {\r\n            return false;\r\n        }\r\n        // if the other is prevent collision or is dead short circuit\r\n        if (actorB.collisionType === CollisionType.PreventCollision || actorB.isKilled()) {\r\n            return false;\r\n        }\r\n        // they can collide\r\n        return true;\r\n    };\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.broadphase = function (targets, delta, stats) {\r\n        var _this = this;\r\n        var seconds = delta / 1000;\r\n        // TODO optimization use only the actors that are moving to start\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        var potentialColliders = targets.filter(function (other) {\r\n            return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        // clear old list of collision pairs\r\n        this._collisionPairCache = [];\r\n        this._collisionHash = {};\r\n        // check for normal collision pairs\r\n        var actor;\r\n        for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n            actor = potentialColliders[j];\r\n            // Query the collision tree for potential colliders\r\n            this._dynamicCollisionTree.query(actor.body, function (other) {\r\n                if (_this._canCollide(actor, other.actor)) {\r\n                    var pair = new Pair(actor.body, other);\r\n                    _this._collisionHash[pair.id] = true;\r\n                    _this._collisionPairCache.push(pair);\r\n                }\r\n                // Always return false, to query whole tree. Returning true in the query method stops searching\r\n                return false;\r\n            });\r\n        }\r\n        if (stats) {\r\n            stats.physics.pairs = this._collisionPairCache.length;\r\n        }\r\n        // Check dynamic tree for fast moving objects\r\n        // Fast moving objects are those moving at least there smallest bound per frame\r\n        if (Physics.checkForFastBodies) {\r\n            for (var _i = 0, potentialColliders_1 = potentialColliders; _i < potentialColliders_1.length; _i++) {\r\n                var actor = potentialColliders_1[_i];\r\n                // Skip non-active objects. Does not make sense on other collison types\r\n                if (actor.collisionType !== CollisionType.Active) {\r\n                    continue;\r\n                }\r\n                // Maximum travel distance next frame\r\n                var updateDistance = actor.vel.magnitude() * seconds + // velocity term\r\n                    actor.acc.magnitude() * 0.5 * seconds * seconds; // acc term\r\n                // Find the minimum dimension\r\n                var minDimension = Math.min(actor.body.getBounds().getHeight(), actor.body.getBounds().getWidth());\r\n                if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\r\n                    if (stats) {\r\n                        stats.physics.fastBodies++;\r\n                    }\r\n                    // start with the oldPos because the integration for actors has already happened\r\n                    // objects resting on a surface may be slightly penatrating in the current position\r\n                    var updateVec = actor.pos.sub(actor.oldPos);\r\n                    var centerPoint = actor.body.collisionArea.getCenter();\r\n                    var furthestPoint = actor.body.collisionArea.getFurthestPoint(actor.vel);\r\n                    var origin = furthestPoint.sub(updateVec);\r\n                    var ray = new Ray(origin, actor.vel);\r\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\r\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\r\n                    var minBody;\r\n                    var minTranslate = new Vector(Infinity, Infinity);\r\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, function (other) {\r\n                        if (actor.body !== other && other.collisionArea) {\r\n                            var hitPoint = other.collisionArea.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\r\n                            if (hitPoint) {\r\n                                var translate = hitPoint.sub(origin);\r\n                                if (translate.magnitude() < minTranslate.magnitude()) {\r\n                                    minTranslate = translate;\r\n                                    minBody = other;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    });\r\n                    if (minBody && Vector.isValid(minTranslate)) {\r\n                        var pair = new Pair(actor.body, minBody);\r\n                        if (!this._collisionHash[pair.id]) {\r\n                            this._collisionHash[pair.id] = true;\r\n                            this._collisionPairCache.push(pair);\r\n                        }\r\n                        // move the fast moving object to the other body\r\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\r\n                        var shift = centerPoint.sub(furthestPoint);\r\n                        actor.pos = origin\r\n                            .add(shift)\r\n                            .add(minTranslate)\r\n                            .add(ray.dir.scale(2 * Physics.surfaceEpsilon));\r\n                        actor.body.collisionArea.recalc();\r\n                        if (stats) {\r\n                            stats.physics.fastBodyCollisions++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // return cache\r\n        return this._collisionPairCache;\r\n    };\r\n    /**\r\n     * Applies narrow phase on collision pairs to find actual area intersections\r\n     * Adds actual colliding pairs to stats' Frame data\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.narrowphase = function (pairs, stats) {\r\n        for (var i = 0; i < pairs.length; i++) {\r\n            pairs[i].collide();\r\n            if (stats && pairs[i].collision) {\r\n                stats.physics.collisions++;\r\n                stats.physics.collidersHash[pairs[i].id] = pairs[i];\r\n            }\r\n        }\r\n        return pairs.filter(function (p) { return p.collision; });\r\n    };\r\n    /**\r\n     * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect.\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.resolve = function (pairs, delta, strategy) {\r\n        for (var _i = 0, pairs_1 = pairs; _i < pairs_1.length; _i++) {\r\n            var pair = pairs_1[_i];\r\n            pair.resolve(strategy);\r\n            if (pair.collision) {\r\n                pair.bodyA.applyMtv();\r\n                pair.bodyB.applyMtv();\r\n                // todo still don't like this, this is a small integration step to resolve narrowphase collisions\r\n                pair.bodyA.actor.integrate(delta * Physics.collisionShift);\r\n                pair.bodyB.actor.integrate(delta * Physics.collisionShift);\r\n            }\r\n        }\r\n        return pairs.filter(function (p) { return p.canCollide; });\r\n    };\r\n    DynamicTreeCollisionBroadphase.prototype.runCollisionStartEnd = function (pairs) {\r\n        var currentFrameHash = {};\r\n        for (var _i = 0, pairs_2 = pairs; _i < pairs_2.length; _i++) {\r\n            var p = pairs_2[_i];\r\n            // load currentFrameHash\r\n            currentFrameHash[p.id] = p;\r\n            // find all new collisions\r\n            if (!this._lastFramePairsHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\r\n                actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\r\n            }\r\n        }\r\n        // find all old collisions\r\n        for (var _a = 0, _b = this._lastFramePairs; _a < _b.length; _a++) {\r\n            var p = _b[_a];\r\n            if (!currentFrameHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\r\n                actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\r\n            }\r\n        }\r\n        // reset the last frame cache\r\n        this._lastFramePairs = pairs;\r\n        this._lastFramePairsHash = currentFrameHash;\r\n    };\r\n    /**\r\n     * Update the dynamic tree positions\r\n     */\r\n    DynamicTreeCollisionBroadphase.prototype.update = function (targets) {\r\n        var updated = 0, i = 0, len = targets.length;\r\n        for (i; i < len; i++) {\r\n            if (this._dynamicCollisionTree.updateBody(targets[i].body)) {\r\n                updated++;\r\n            }\r\n        }\r\n        return updated;\r\n    };\r\n    /* istanbul ignore next */\r\n    DynamicTreeCollisionBroadphase.prototype.debugDraw = function (ctx) {\r\n        if (Physics.broadphaseDebug) {\r\n            this._dynamicCollisionTree.debugDraw(ctx);\r\n        }\r\n        if (Physics.showContacts || Physics.showCollisionNormals) {\r\n            for (var _i = 0, _a = this._collisionPairCache; _i < _a.length; _i++) {\r\n                var pair = _a[_i];\r\n                pair.debugDraw(ctx);\r\n            }\r\n        }\r\n    };\r\n    return DynamicTreeCollisionBroadphase;\r\n}());\r\nexport { DynamicTreeCollisionBroadphase };\r\n//# sourceMappingURL=DynamicTreeCollisionBroadphase.js.map","/**\r\n * A sorted list implementation. NOTE: this implementation is not self-balancing\r\n */\r\nvar SortedList = /** @class */ (function () {\r\n    function SortedList(getComparable) {\r\n        this._getComparable = getComparable;\r\n    }\r\n    SortedList.prototype.find = function (element) {\r\n        return this._find(this._root, element);\r\n    };\r\n    SortedList.prototype._find = function (node, element) {\r\n        if (node == null) {\r\n            return false;\r\n        }\r\n        else if (this._getComparable.call(element) === node.getKey()) {\r\n            if (node.getData().indexOf(element) > -1) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            return this._find(node.getLeft(), element);\r\n        }\r\n        else {\r\n            return this._find(node.getRight(), element);\r\n        }\r\n    };\r\n    // returns the array of elements at a specific key value\r\n    SortedList.prototype.get = function (key) {\r\n        return this._get(this._root, key);\r\n    };\r\n    SortedList.prototype._get = function (node, key) {\r\n        if (node == null) {\r\n            return [];\r\n        }\r\n        else if (key === node.getKey()) {\r\n            return node.getData();\r\n        }\r\n        else if (key < node.getKey()) {\r\n            return this._get(node.getLeft(), key);\r\n        }\r\n        else {\r\n            return this._get(node.getRight(), key);\r\n        }\r\n    };\r\n    SortedList.prototype.add = function (element) {\r\n        if (this._root == null) {\r\n            this._root = new BinaryTreeNode(this._getComparable.call(element), [element], null, null);\r\n            return true;\r\n        }\r\n        else {\r\n            return this._insert(this._root, element);\r\n        }\r\n    };\r\n    SortedList.prototype._insert = function (node, element) {\r\n        if (node != null) {\r\n            if (this._getComparable.call(element) === node.getKey()) {\r\n                if (node.getData().indexOf(element) > -1) {\r\n                    return false; // the element we're trying to insert already exists\r\n                }\r\n                else {\r\n                    node.getData().push(element);\r\n                    return true;\r\n                }\r\n            }\r\n            else if (this._getComparable.call(element) < node.getKey()) {\r\n                if (node.getLeft() == null) {\r\n                    node.setLeft(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getLeft(), element);\r\n                }\r\n            }\r\n            else {\r\n                if (node.getRight() == null) {\r\n                    node.setRight(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getRight(), element);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    SortedList.prototype.removeByComparable = function (element) {\r\n        this._root = this._remove(this._root, element);\r\n    };\r\n    SortedList.prototype._remove = function (node, element) {\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (this._getComparable.call(element) === node.getKey()) {\r\n            var elementIndex = node.getData().indexOf(element);\r\n            // if the node contains the element, remove the element\r\n            if (elementIndex > -1) {\r\n                node.getData().splice(elementIndex, 1);\r\n                // if we have removed the last element at this node, remove the node\r\n                if (node.getData().length === 0) {\r\n                    // if the node is a leaf\r\n                    if (node.getLeft() == null && node.getRight() == null) {\r\n                        return null;\r\n                    }\r\n                    else if (node.getLeft() == null) {\r\n                        return node.getRight();\r\n                    }\r\n                    else if (node.getRight() == null) {\r\n                        return node.getLeft();\r\n                    }\r\n                    // if node has 2 children\r\n                    var temp = this._findMinNode(node.getRight());\r\n                    node.setKey(temp.getKey());\r\n                    node.setData(temp.getData());\r\n                    node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\r\n                    return node;\r\n                }\r\n                else {\r\n                    // this prevents the node from being removed since it still contains elements\r\n                    return node;\r\n                }\r\n            }\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            node.setLeft(this._remove(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._remove(node.getRight(), element));\r\n            return node;\r\n        }\r\n        return null;\r\n    };\r\n    // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\r\n    SortedList.prototype._cleanup = function (node, element) {\r\n        var comparable = element.getKey();\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (comparable === node.getKey()) {\r\n            // if the node is a leaf\r\n            if (node.getLeft() == null && node.getRight() == null) {\r\n                return null;\r\n            }\r\n            else if (node.getLeft() == null) {\r\n                return node.getRight();\r\n            }\r\n            else if (node.getRight() == null) {\r\n                return node.getLeft();\r\n            }\r\n            // if node has 2 children\r\n            var temp = this._findMinNode(node.getRight());\r\n            node.setKey(temp.getKey());\r\n            node.setData(temp.getData());\r\n            node.setRight(this._cleanup(node.getRight(), temp));\r\n            return node;\r\n        }\r\n        else if (this._getComparable.call(element) < node.getKey()) {\r\n            node.setLeft(this._cleanup(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._cleanup(node.getRight(), element));\r\n            return node;\r\n        }\r\n    };\r\n    SortedList.prototype._findMinNode = function (node) {\r\n        var current = node;\r\n        while (current.getLeft() != null) {\r\n            current = current.getLeft();\r\n        }\r\n        return current;\r\n    };\r\n    SortedList.prototype.list = function () {\r\n        var results = new Array();\r\n        this._list(this._root, results);\r\n        return results;\r\n    };\r\n    SortedList.prototype._list = function (treeNode, results) {\r\n        if (treeNode != null) {\r\n            this._list(treeNode.getLeft(), results);\r\n            treeNode.getData().forEach(function (element) {\r\n                results.push(element);\r\n            });\r\n            this._list(treeNode.getRight(), results);\r\n        }\r\n    };\r\n    return SortedList;\r\n}());\r\nexport { SortedList };\r\n/**\r\n * A tree node part of [[SortedList]]\r\n */\r\nvar BinaryTreeNode = /** @class */ (function () {\r\n    function BinaryTreeNode(key, data, left, right) {\r\n        this._key = key;\r\n        this._data = data;\r\n        this._left = left;\r\n        this._right = right;\r\n    }\r\n    BinaryTreeNode.prototype.getKey = function () {\r\n        return this._key;\r\n    };\r\n    BinaryTreeNode.prototype.setKey = function (key) {\r\n        this._key = key;\r\n    };\r\n    BinaryTreeNode.prototype.getData = function () {\r\n        return this._data;\r\n    };\r\n    BinaryTreeNode.prototype.setData = function (data) {\r\n        this._data = data;\r\n    };\r\n    BinaryTreeNode.prototype.getLeft = function () {\r\n        return this._left;\r\n    };\r\n    BinaryTreeNode.prototype.setLeft = function (left) {\r\n        this._left = left;\r\n    };\r\n    BinaryTreeNode.prototype.getRight = function () {\r\n        return this._right;\r\n    };\r\n    BinaryTreeNode.prototype.setRight = function (right) {\r\n        this._right = right;\r\n    };\r\n    return BinaryTreeNode;\r\n}());\r\nexport { BinaryTreeNode };\r\n/**\r\n * Mock element for testing\r\n *\r\n * @internal\r\n */\r\nvar MockedElement = /** @class */ (function () {\r\n    function MockedElement(key) {\r\n        this._key = 0;\r\n        this._key = key;\r\n    }\r\n    MockedElement.prototype.getTheKey = function () {\r\n        return this._key;\r\n    };\r\n    MockedElement.prototype.setKey = function (key) {\r\n        this._key = key;\r\n    };\r\n    return MockedElement;\r\n}());\r\nexport { MockedElement };\r\n//# sourceMappingURL=SortedList.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Vector } from './Algebra';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { Actor } from './Actor';\r\nimport { Logger } from './Util/Log';\r\nimport { Class } from './Class';\r\n/**\r\n * Groups are used for logically grouping Actors so they can be acted upon\r\n * in bulk.\r\n *\r\n * [[include:Groups.md]]\r\n */\r\nvar Group = /** @class */ (function (_super) {\r\n    __extends(Group, _super);\r\n    function Group(name, scene) {\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.scene = scene;\r\n        _this._logger = Logger.getInstance();\r\n        _this._members = [];\r\n        _this.actions = new ActionContext();\r\n        if (scene == null) {\r\n            _this._logger.error('Invalid constructor arguments passed to Group: ', name, ', scene must not be null!');\r\n        }\r\n        else {\r\n            var existingGroup = scene.groups[name];\r\n            if (existingGroup) {\r\n                _this._logger.warn('Group with name', name, 'already exists. This new group will replace it.');\r\n            }\r\n            scene.groups[name] = _this;\r\n        }\r\n        return _this;\r\n    }\r\n    Group.prototype.add = function (actorOrActors) {\r\n        if (actorOrActors instanceof Actor) {\r\n            actorOrActors = [].concat(actorOrActors);\r\n        }\r\n        var i = 0, len = actorOrActors.length, groupIdx;\r\n        for (i; i < len; i++) {\r\n            groupIdx = this.getMembers().indexOf(actorOrActors[i]);\r\n            if (groupIdx === -1) {\r\n                this._members.push(actorOrActors[i]);\r\n                this.scene.add(actorOrActors[i]);\r\n                this.actions.addActorToContext(actorOrActors[i]);\r\n                this.eventDispatcher.wire(actorOrActors[i].eventDispatcher);\r\n            }\r\n        }\r\n    };\r\n    Group.prototype.remove = function (actor) {\r\n        var index = this._members.indexOf(actor);\r\n        if (index > -1) {\r\n            this._members.splice(index, 1);\r\n            this.actions.removeActorFromContext(actor);\r\n            this.eventDispatcher.unwire(actor.eventDispatcher);\r\n        }\r\n    };\r\n    Group.prototype.move = function (args) {\r\n        var i = 0, members = this.getMembers(), len = members.length;\r\n        if (arguments.length === 1 && args instanceof Vector) {\r\n            for (i; i < len; i++) {\r\n                members[i].pos.x += args.x;\r\n                members[i].pos.y += args.y;\r\n            }\r\n        }\r\n        else if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            var x = arguments[0];\r\n            var y = arguments[1];\r\n            for (i; i < len; i++) {\r\n                members[i].pos.x += x;\r\n                members[i].pos.y += y;\r\n            }\r\n        }\r\n        else {\r\n            this._logger.error('Invalid arguments passed to group move', this.name, 'args:', arguments);\r\n        }\r\n    };\r\n    Group.prototype.rotate = function (angle) {\r\n        if (typeof angle !== 'number') {\r\n            this._logger.error('Invalid arguments passed to group rotate', this.name, 'args:', arguments);\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.getMembers(); _i < _a.length; _i++) {\r\n            var member = _a[_i];\r\n            member.rotation += angle;\r\n        }\r\n    };\r\n    Group.prototype.on = function (eventName, handler) {\r\n        this.eventDispatcher.on(eventName, handler);\r\n    };\r\n    Group.prototype.off = function (eventName, handler) {\r\n        this.eventDispatcher.off(eventName, handler);\r\n    };\r\n    Group.prototype.emit = function (topic, event) {\r\n        this.eventDispatcher.emit(topic, event);\r\n    };\r\n    Group.prototype.contains = function (actor) {\r\n        return this.getMembers().indexOf(actor) > -1;\r\n    };\r\n    Group.prototype.getMembers = function () {\r\n        return this._members;\r\n    };\r\n    Group.prototype.getRandomMember = function () {\r\n        return this._members[Math.floor(Math.random() * this._members.length)];\r\n    };\r\n    Group.prototype.getBounds = function () {\r\n        return this.getMembers()\r\n            .map(function (a) { return a.getBounds(); })\r\n            .reduce(function (prev, curr) {\r\n            return prev.combine(curr);\r\n        });\r\n    };\r\n    return Group;\r\n}(Class));\r\nexport { Group };\r\n//# sourceMappingURL=Group.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Configurable } from './Configurable';\r\n/**\r\n * Enum representing the different font size units\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\r\n */\r\nexport var FontUnit;\r\n(function (FontUnit) {\r\n    /**\r\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\r\n     */\r\n    FontUnit[FontUnit[\"Em\"] = 0] = \"Em\";\r\n    /**\r\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is eqaul to the font size of the root element\r\n     */\r\n    FontUnit[FontUnit[\"Rem\"] = 1] = \"Rem\";\r\n    /**\r\n     * Pixel is a unit of length in screen pixels\r\n     */\r\n    FontUnit[FontUnit[\"Px\"] = 2] = \"Px\";\r\n    /**\r\n     * Point is a physical unit length (1/72 of an inch)\r\n     */\r\n    FontUnit[FontUnit[\"Pt\"] = 3] = \"Pt\";\r\n    /**\r\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\r\n     */\r\n    FontUnit[FontUnit[\"Percent\"] = 4] = \"Percent\";\r\n})(FontUnit || (FontUnit = {}));\r\n/**\r\n * Enum representing the different horizontal text alignments\r\n */\r\nexport var TextAlign;\r\n(function (TextAlign) {\r\n    /**\r\n     * The text is left-aligned.\r\n     */\r\n    TextAlign[TextAlign[\"Left\"] = 0] = \"Left\";\r\n    /**\r\n     * The text is right-aligned.\r\n     */\r\n    TextAlign[TextAlign[\"Right\"] = 1] = \"Right\";\r\n    /**\r\n     * The text is centered.\r\n     */\r\n    TextAlign[TextAlign[\"Center\"] = 2] = \"Center\";\r\n    /**\r\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\r\n     * right-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[TextAlign[\"Start\"] = 3] = \"Start\";\r\n    /**\r\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\r\n     * left-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[TextAlign[\"End\"] = 4] = \"End\";\r\n})(TextAlign || (TextAlign = {}));\r\n/**\r\n * Enum representing the different baseline text alignments\r\n */\r\nexport var BaseAlign;\r\n(function (BaseAlign) {\r\n    /**\r\n     * The text baseline is the top of the em square.\r\n     */\r\n    BaseAlign[BaseAlign[\"Top\"] = 0] = \"Top\";\r\n    /**\r\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\r\n     * alphabetic.\r\n     */\r\n    BaseAlign[BaseAlign[\"Hanging\"] = 1] = \"Hanging\";\r\n    /**\r\n     * The text baseline is the middle of the em square.\r\n     */\r\n    BaseAlign[BaseAlign[\"Middle\"] = 2] = \"Middle\";\r\n    /**\r\n     * The text baseline is the normal alphabetic baseline.\r\n     */\r\n    BaseAlign[BaseAlign[\"Alphabetic\"] = 3] = \"Alphabetic\";\r\n    /**\r\n     * The text baseline is the ideographic baseline; this is the bottom of\r\n     * the body of the characters, if the main body of characters protrudes\r\n     * beneath the alphabetic baseline.  Currently unsupported; this will\r\n     * act like alphabetic.\r\n     */\r\n    BaseAlign[BaseAlign[\"Ideographic\"] = 4] = \"Ideographic\";\r\n    /**\r\n     * The text baseline is the bottom of the bounding box.  This differs\r\n     * from the ideographic baseline in that the ideographic baseline\r\n     * doesn't consider descenders.\r\n     */\r\n    BaseAlign[BaseAlign[\"Bottom\"] = 5] = \"Bottom\";\r\n})(BaseAlign || (BaseAlign = {}));\r\n/**\r\n * Enum representing the different possible font styles\r\n */\r\nexport var FontStyle;\r\n(function (FontStyle) {\r\n    FontStyle[FontStyle[\"Normal\"] = 0] = \"Normal\";\r\n    FontStyle[FontStyle[\"Italic\"] = 1] = \"Italic\";\r\n    FontStyle[FontStyle[\"Oblique\"] = 2] = \"Oblique\";\r\n})(FontStyle || (FontStyle = {}));\r\n/**\r\n * @hidden\r\n */\r\nvar LabelImpl = /** @class */ (function (_super) {\r\n    __extends(LabelImpl, _super);\r\n    /**\r\n     * @param text        The text of the label\r\n     * @param x           The x position of the label\r\n     * @param y           The y position of the label\r\n     * @param fontFamily  Use any valid CSS font string for the label's font. Web fonts are supported. Default is `10px sans-serif`.\r\n     * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence\r\n     * over a css font.\r\n     */\r\n    function LabelImpl(textOrConfig, x, y, fontFamily, spriteFont) {\r\n        var _this = _super.call(this, textOrConfig && typeof textOrConfig === 'object'\r\n            ? {\r\n                x: textOrConfig.x,\r\n                y: textOrConfig.y\r\n            }\r\n            : { x: x, y: y }) || this;\r\n        /**\r\n         * Sets or gets the bold property of the label's text, by default it's false\r\n         */\r\n        _this.bold = false;\r\n        /**\r\n         * The font size in the selected units, default is 10 (default units is pixel)\r\n         */\r\n        _this.fontSize = 10;\r\n        /**\r\n         * The font style for this label, the default is [[FontStyle.Normal]]\r\n         */\r\n        _this.fontStyle = FontStyle.Normal;\r\n        /**\r\n         * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\r\n         */\r\n        _this.fontUnit = FontUnit.Px;\r\n        /**\r\n         * Gets or sets the horizontal text alignment property for the label.\r\n         */\r\n        _this.textAlign = TextAlign.Left;\r\n        /**\r\n         * Gets or sets the baseline alignment property for the label.\r\n         */\r\n        _this.baseAlign = BaseAlign.Bottom;\r\n        /**\r\n         * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\r\n         */\r\n        _this.letterSpacing = 0; //px\r\n        /**\r\n         * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\r\n         */\r\n        _this.caseInsensitive = true;\r\n        var text = '';\r\n        if (textOrConfig && typeof textOrConfig === 'object') {\r\n            fontFamily = textOrConfig.fontFamily;\r\n            spriteFont = textOrConfig.spriteFont;\r\n            text = textOrConfig.text;\r\n        }\r\n        else {\r\n            text = textOrConfig;\r\n        }\r\n        _this.text = text || '';\r\n        _this.color = Color.Black.clone();\r\n        _this.spriteFont = spriteFont;\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.fontFamily = fontFamily || 'sans-serif'; // coalesce to default canvas font\r\n        _this._textShadowOn = false;\r\n        _this._shadowOffsetX = 0;\r\n        _this._shadowOffsetY = 0;\r\n        if (spriteFont) {\r\n            //this._textSprites = spriteFont.getTextSprites();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns the width of the text in the label (in pixels);\r\n     * @param ctx  Rendering context to measure the string with\r\n     */\r\n    LabelImpl.prototype.getTextWidth = function (ctx) {\r\n        var oldFont = ctx.font;\r\n        ctx.font = this._fontString;\r\n        var width = ctx.measureText(this.text).width;\r\n        ctx.font = oldFont;\r\n        return width;\r\n    };\r\n    // TypeScript doesn't support string enums :(\r\n    LabelImpl.prototype._lookupFontUnit = function (fontUnit) {\r\n        switch (fontUnit) {\r\n            case FontUnit.Em:\r\n                return 'em';\r\n            case FontUnit.Rem:\r\n                return 'rem';\r\n            case FontUnit.Pt:\r\n                return 'pt';\r\n            case FontUnit.Px:\r\n                return 'px';\r\n            case FontUnit.Percent:\r\n                return '%';\r\n            default:\r\n                return 'px';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupTextAlign = function (textAlign) {\r\n        switch (textAlign) {\r\n            case TextAlign.Left:\r\n                return 'left';\r\n            case TextAlign.Right:\r\n                return 'right';\r\n            case TextAlign.Center:\r\n                return 'center';\r\n            case TextAlign.End:\r\n                return 'end';\r\n            case TextAlign.Start:\r\n                return 'start';\r\n            default:\r\n                return 'start';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupBaseAlign = function (baseAlign) {\r\n        switch (baseAlign) {\r\n            case BaseAlign.Alphabetic:\r\n                return 'alphabetic';\r\n            case BaseAlign.Bottom:\r\n                return 'bottom';\r\n            case BaseAlign.Hanging:\r\n                return 'hangin';\r\n            case BaseAlign.Ideographic:\r\n                return 'ideographic';\r\n            case BaseAlign.Middle:\r\n                return 'middle';\r\n            case BaseAlign.Top:\r\n                return 'top';\r\n            default:\r\n                return 'alphabetic';\r\n        }\r\n    };\r\n    LabelImpl.prototype._lookupFontStyle = function (fontStyle) {\r\n        var boldstring = this.bold ? ' bold' : '';\r\n        switch (fontStyle) {\r\n            case FontStyle.Italic:\r\n                return 'italic' + boldstring;\r\n            case FontStyle.Normal:\r\n                return 'normal' + boldstring;\r\n            case FontStyle.Oblique:\r\n                return 'oblique' + boldstring;\r\n            default:\r\n                return 'normal' + boldstring;\r\n        }\r\n    };\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     */\r\n    LabelImpl.prototype.setTextShadow = function (offsetX, offsetY, shadowColor) {\r\n        this.spriteFont.setTextShadow(offsetX, offsetY, shadowColor);\r\n    };\r\n    /**\r\n     * Toggles text shadows on or off, only applies when using sprite fonts\r\n     */\r\n    LabelImpl.prototype.useTextShadow = function (on) {\r\n        this.spriteFont.useTextShadow(on);\r\n    };\r\n    /**\r\n     * Clears the current text shadow\r\n     */\r\n    LabelImpl.prototype.clearTextShadow = function () {\r\n        this._textShadowOn = false;\r\n        this._shadowOffsetX = 0;\r\n        this._shadowOffsetY = 0;\r\n    };\r\n    LabelImpl.prototype.update = function (engine, delta) {\r\n        _super.prototype.update.call(this, engine, delta);\r\n    };\r\n    LabelImpl.prototype.draw = function (ctx, delta) {\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        ctx.rotate(this.rotation);\r\n        if (this._textShadowOn) {\r\n            ctx.save();\r\n            ctx.translate(this._shadowOffsetX, this._shadowOffsetY);\r\n            this._fontDraw(ctx);\r\n            ctx.restore();\r\n        }\r\n        this._fontDraw(ctx);\r\n        _super.prototype.draw.call(this, ctx, delta);\r\n        ctx.restore();\r\n    };\r\n    LabelImpl.prototype._fontDraw = function (ctx) {\r\n        if (this.spriteFont) {\r\n            this.spriteFont.draw(ctx, this.text, 0, 0, {\r\n                color: this.color.clone(),\r\n                baseAlign: this.baseAlign,\r\n                textAlign: this.textAlign,\r\n                fontSize: this.fontSize,\r\n                letterSpacing: this.letterSpacing,\r\n                opacity: this.opacity\r\n            });\r\n        }\r\n        else {\r\n            var oldAlign = ctx.textAlign;\r\n            var oldTextBaseline = ctx.textBaseline;\r\n            ctx.textAlign = this._lookupTextAlign(this.textAlign);\r\n            ctx.textBaseline = this._lookupBaseAlign(this.baseAlign);\r\n            if (this.color) {\r\n                this.color.a = this.opacity;\r\n            }\r\n            ctx.fillStyle = this.color.toString();\r\n            ctx.font = this._fontString;\r\n            if (this.maxWidth) {\r\n                ctx.fillText(this.text, 0, 0, this.maxWidth);\r\n            }\r\n            else {\r\n                ctx.fillText(this.text, 0, 0);\r\n            }\r\n            ctx.textAlign = oldAlign;\r\n            ctx.textBaseline = oldTextBaseline;\r\n        }\r\n    };\r\n    Object.defineProperty(LabelImpl.prototype, \"_fontString\", {\r\n        get: function () {\r\n            return this._lookupFontStyle(this.fontStyle) + \" \" + this.fontSize + this._lookupFontUnit(this.fontUnit) + \" \" + this.fontFamily;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LabelImpl.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n    };\r\n    return LabelImpl;\r\n}(Actor));\r\nexport { LabelImpl };\r\n/**\r\n * Labels are the way to draw small amounts of text to the screen. They are\r\n * actors and inherit all of the benefits and capabilities.\r\n *\r\n * [[include:Labels.md]]\r\n */\r\nvar Label = /** @class */ (function (_super) {\r\n    __extends(Label, _super);\r\n    function Label(textOrConfig, x, y, fontFamily, spriteFont) {\r\n        return _super.call(this, textOrConfig, x, y, fontFamily, spriteFont) || this;\r\n    }\r\n    return Label;\r\n}(Configurable(LabelImpl)));\r\nexport { Label };\r\n//# sourceMappingURL=Label.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Color } from './Drawing/Color';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { EventDispatcher } from './EventDispatcher';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Vector } from './Algebra';\r\nimport { ExitTriggerEvent, EnterTriggerEvent } from './Events';\r\nimport * as Util from './Util/Util';\r\nvar triggerDefaults = {\r\n    pos: Vector.Zero.clone(),\r\n    width: 10,\r\n    height: 10,\r\n    visible: false,\r\n    action: function () {\r\n        return;\r\n    },\r\n    filter: function () { return true; },\r\n    repeat: -1\r\n};\r\n/**\r\n * Triggers are a method of firing arbitrary code on collision. These are useful\r\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\r\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\r\n *\r\n * [[include:Triggers.md]]\r\n */\r\nvar Trigger = /** @class */ (function (_super) {\r\n    __extends(Trigger, _super);\r\n    /**\r\n     *\r\n     * @param opts Trigger options\r\n     */\r\n    function Trigger(opts) {\r\n        var _this = _super.call(this, opts.pos.x, opts.pos.y, opts.width, opts.height) || this;\r\n        /**\r\n         * Action to fire when triggered by collision\r\n         */\r\n        _this.action = function () {\r\n            return;\r\n        };\r\n        /**\r\n         * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\r\n         * filter return true for the collided actor.\r\n         */\r\n        _this.filter = function () { return true; };\r\n        /**\r\n         * Number of times to repeat before killing the trigger,\r\n         */\r\n        _this.repeat = -1;\r\n        opts = Util.extend({}, triggerDefaults, opts);\r\n        _this.filter = opts.filter || _this.filter;\r\n        _this.repeat = opts.repeat || _this.repeat;\r\n        _this.action = opts.action || _this.action;\r\n        if (opts.target) {\r\n            _this.target = opts.target;\r\n        }\r\n        _this.visible = opts.visible;\r\n        _this.collisionType = CollisionType.Passive;\r\n        _this.eventDispatcher = new EventDispatcher(_this);\r\n        _this.actionQueue = new ActionQueue(_this);\r\n        _this.on('collisionstart', function (evt) {\r\n            if (_this.filter(evt.other)) {\r\n                _this.emit('enter', new EnterTriggerEvent(_this, evt.other));\r\n                _this._dispatchAction();\r\n                // remove trigger if its done, -1 repeat forever\r\n                if (_this.repeat === 0) {\r\n                    _this.kill();\r\n                }\r\n            }\r\n        });\r\n        _this.on('collisionend', function (evt) {\r\n            if (_this.filter(evt.other)) {\r\n                _this.emit('exit', new ExitTriggerEvent(_this, evt.other));\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Trigger.prototype, \"target\", {\r\n        get: function () {\r\n            return this._target;\r\n        },\r\n        set: function (target) {\r\n            this._target = target;\r\n            this.filter = function (actor) { return actor === target; };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Trigger.prototype._initialize = function (engine) {\r\n        _super.prototype._initialize.call(this, engine);\r\n    };\r\n    Trigger.prototype._dispatchAction = function () {\r\n        this.action.call(this);\r\n        this.repeat--;\r\n    };\r\n    /* istanbul ignore next */\r\n    Trigger.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n        // Meant to draw debug information about actors\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        var bb = this.getBounds();\r\n        var wp = this.getWorldPos();\r\n        bb.left = bb.left - wp.x;\r\n        bb.right = bb.right - wp.x;\r\n        bb.top = bb.top - wp.y;\r\n        bb.bottom = bb.bottom - wp.y;\r\n        // Currently collision primitives cannot rotate\r\n        // ctx.rotate(this.rotation);\r\n        ctx.fillStyle = Color.Violet.toString();\r\n        ctx.strokeStyle = Color.Violet.toString();\r\n        ctx.fillText('Trigger', 10, 10);\r\n        bb.debugDraw(ctx);\r\n        ctx.restore();\r\n    };\r\n    return Trigger;\r\n}(Actor));\r\nexport { Trigger };\r\n//# sourceMappingURL=Trigger.js.map","import { UIActor } from '../UIActor';\r\nimport { Label } from '../Label';\r\nimport { Trigger } from '../Trigger';\r\nexport function isVanillaActor(actor) {\r\n    return !(actor instanceof UIActor) && !(actor instanceof Trigger) && !(actor instanceof Label);\r\n}\r\nexport function isUIActor(actor) {\r\n    return actor instanceof UIActor;\r\n}\r\n//# sourceMappingURL=Actors.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { UIActor } from './UIActor';\r\nimport { Physics } from './Physics';\r\nimport { InitializeEvent, PreUpdateEvent, PostUpdateEvent, PreDrawEvent, PostDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent } from './Events';\r\nimport { Logger } from './Util/Log';\r\nimport { Timer } from './Timer';\r\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\r\nimport { SortedList } from './Util/SortedList';\r\nimport { Group } from './Group';\r\nimport { TileMap } from './TileMap';\r\nimport { BaseCamera } from './Camera';\r\nimport { Actor } from './Actor';\r\nimport { Class } from './Class';\r\nimport * as Util from './Util/Util';\r\nimport * as ActorUtils from './Util/Actors';\r\nimport { Trigger } from './Trigger';\r\n/**\r\n * [[Actor|Actors]] are composed together into groupings called Scenes in\r\n * Excalibur. The metaphor models the same idea behind real world\r\n * actors in a scene. Only actors in scenes will be updated and drawn.\r\n *\r\n * Typical usages of a scene include: levels, menus, loading screens, etc.\r\n *\r\n * [[include:Scenes.md]]\r\n */\r\nvar Scene = /** @class */ (function (_super) {\r\n    __extends(Scene, _super);\r\n    function Scene(engine) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * The actors in the current scene\r\n         */\r\n        _this.actors = [];\r\n        /**\r\n         * The triggers in the current scene\r\n         */\r\n        _this.triggers = [];\r\n        /**\r\n         * The [[TileMap]]s in the scene, if any\r\n         */\r\n        _this.tileMaps = [];\r\n        /**\r\n         * The [[Group]]s in the scene, if any\r\n         */\r\n        _this.groups = {};\r\n        /**\r\n         * The [[UIActor]]s in a scene, if any; these are drawn last\r\n         */\r\n        _this.uiActors = [];\r\n        _this._isInitialized = false;\r\n        _this._sortedDrawingTree = new SortedList(Actor.prototype.getZIndex);\r\n        _this._broadphase = new DynamicTreeCollisionBroadphase();\r\n        _this._killQueue = [];\r\n        _this._triggerKillQueue = [];\r\n        _this._timers = [];\r\n        _this._cancelQueue = [];\r\n        _this._logger = Logger.getInstance();\r\n        _this.camera = new BaseCamera();\r\n        if (engine) {\r\n            _this.camera.x = engine.halfDrawWidth;\r\n            _this.camera.y = engine.halfDrawHeight;\r\n        }\r\n        return _this;\r\n    }\r\n    Scene.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Scene.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    Scene.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     */\r\n    Scene.prototype.onInitialize = function (_engine) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * This is called when the scene is made active and started. It is meant to be overriden,\r\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    Scene.prototype.onActivate = function (_oldScene, _newScene) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overriden,\r\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    Scene.prototype.onDeactivate = function (_oldScene, _newScene) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    Scene.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    Scene.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before a scene is drawn.\r\n     */\r\n    Scene.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after a scene is drawn.\r\n     */\r\n    Scene.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // will be overridden\r\n    };\r\n    /**\r\n     * Initializes actors in the scene\r\n     */\r\n    Scene.prototype._initializeChildren = function () {\r\n        for (var _i = 0, _a = this.actors; _i < _a.length; _i++) {\r\n            var child = _a[_i];\r\n            child._initialize(this.engine);\r\n        }\r\n    };\r\n    Object.defineProperty(Scene.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets whether or not the [[Scene]] has been initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Initializes the scene before the first update, meant to be called by engine not by users of\r\n     * Excalibur\r\n     * @internal\r\n     */\r\n    Scene.prototype._initialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            if (this.camera) {\r\n                this.camera.x = engine.halfDrawWidth;\r\n                this.camera.y = engine.halfDrawHeight;\r\n            }\r\n            this._initializeChildren();\r\n            this._logger.debug('Scene.onInitialize', this, engine);\r\n            this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\r\n            this.onInitialize.call(this, engine);\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\r\n     * @internal\r\n     */\r\n    Scene.prototype._activate = function (oldScene, newScene) {\r\n        this._logger.debug('Scene.onActivate', this);\r\n        this.onActivate(oldScene, newScene);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\r\n     * @internal\r\n     */\r\n    Scene.prototype._deactivate = function (oldScene, newScene) {\r\n        this._logger.debug('Scene.onDectivate', this);\r\n        this.onDeactivate(oldScene, newScene);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    Scene.prototype._preupdate = function (_engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\r\n        this.onPreUpdate(_engine, delta);\r\n    };\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    Scene.prototype._postupdate = function (_engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\r\n        this.onPostUpdate(_engine, delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    Scene.prototype._predraw = function (_ctx, _delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\r\n        this.onPreDraw(_ctx, _delta);\r\n    };\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     *\r\n     * @internal\r\n     */\r\n    Scene.prototype._postdraw = function (_ctx, _delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\r\n        this.onPostDraw(_ctx, _delta);\r\n    };\r\n    /**\r\n     * Updates all the actors and timers in the scene. Called by the [[Engine]].\r\n     * @param engine  Reference to the current Engine\r\n     * @param delta   The number of milliseconds since the last update\r\n     */\r\n    Scene.prototype.update = function (engine, delta) {\r\n        this._preupdate(engine, delta);\r\n        var i, len;\r\n        // Remove timers in the cancel queue before updating them\r\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\r\n            this.removeTimer(this._cancelQueue[i]);\r\n        }\r\n        this._cancelQueue.length = 0;\r\n        // Cycle through timers updating timers\r\n        for (var _i = 0, _a = this._timers; _i < _a.length; _i++) {\r\n            var timer = _a[_i];\r\n            timer.update(delta);\r\n        }\r\n        // Cycle through actors updating UI actors\r\n        for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n            this.uiActors[i].update(engine, delta);\r\n        }\r\n        // Cycle through actors updating tile maps\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].update(engine, delta);\r\n        }\r\n        // Cycle through actors updating actors\r\n        for (i = 0, len = this.actors.length; i < len; i++) {\r\n            this.actors[i].update(engine, delta);\r\n        }\r\n        // Cycle through triggers updating\r\n        for (i = 0, len = this.triggers.length; i < len; i++) {\r\n            this.triggers[i].update(engine, delta);\r\n        }\r\n        this._collectActorStats(engine);\r\n        // propagates all events through their paths assigned\r\n        engine.input.pointers.propagate();\r\n        // Run the broadphase and narrowphase\r\n        if (this._broadphase && Physics.enabled) {\r\n            var beforeBroadphase = Date.now();\r\n            this._broadphase.update(this.actors, delta);\r\n            var pairs = this._broadphase.broadphase(this.actors, delta, engine.stats.currFrame);\r\n            var afterBroadphase = Date.now();\r\n            var beforeNarrowphase = Date.now();\r\n            var iter = Physics.collisionPasses;\r\n            var collisionDelta = delta / iter;\r\n            while (iter > 0) {\r\n                // Run the narrowphase\r\n                pairs = this._broadphase.narrowphase(pairs, engine.stats.currFrame);\r\n                // Run collision resolution strategy\r\n                pairs = this._broadphase.resolve(pairs, collisionDelta, Physics.collisionResolutionStrategy);\r\n                this._broadphase.runCollisionStartEnd(pairs);\r\n                iter--;\r\n            }\r\n            var afterNarrowphase = Date.now();\r\n            engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\r\n            engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\r\n        }\r\n        engine.stats.currFrame.actors.killed = this._killQueue.length + this._triggerKillQueue.length;\r\n        this._processKillQueue(this._killQueue, this.actors);\r\n        this._processKillQueue(this._triggerKillQueue, this.triggers);\r\n        if (this.camera) {\r\n            this.camera.update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    };\r\n    Scene.prototype._processKillQueue = function (killQueue, collection) {\r\n        // Remove actors from scene graph after being killed\r\n        var actorIndex;\r\n        for (var _i = 0, killQueue_1 = killQueue; _i < killQueue_1.length; _i++) {\r\n            var killed = killQueue_1[_i];\r\n            //don't remove actors that were readded during the same frame they were killed\r\n            if (killed.isKilled()) {\r\n                actorIndex = collection.indexOf(killed);\r\n                if (actorIndex > -1) {\r\n                    this._sortedDrawingTree.removeByComparable(killed);\r\n                    collection.splice(actorIndex, 1);\r\n                }\r\n            }\r\n        }\r\n        killQueue.length = 0;\r\n    };\r\n    /**\r\n     * Draws all the actors in the Scene. Called by the [[Engine]].\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    Scene.prototype.draw = function (ctx, delta) {\r\n        this._predraw(ctx, delta);\r\n        ctx.save();\r\n        if (this.camera) {\r\n            this.camera.draw(ctx);\r\n        }\r\n        var i, len;\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].draw(ctx, delta);\r\n        }\r\n        var sortedChildren = this._sortedDrawingTree.list();\r\n        for (i = 0, len = sortedChildren.length; i < len; i++) {\r\n            // only draw actors that are visible and on screen\r\n            if (sortedChildren[i].visible && !sortedChildren[i].isOffScreen) {\r\n                sortedChildren[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        if (this.engine && this.engine.isDebug) {\r\n            ctx.strokeStyle = 'yellow';\r\n            this.debugDraw(ctx);\r\n        }\r\n        ctx.restore();\r\n        for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n            // only draw ui actors that are visible and on screen\r\n            if (this.uiActors[i].visible) {\r\n                this.uiActors[i].draw(ctx, delta);\r\n            }\r\n        }\r\n        if (this.engine && this.engine.isDebug) {\r\n            for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n                this.uiActors[i].debugDraw(ctx);\r\n            }\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    };\r\n    /**\r\n     * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\r\n     * @param ctx  The current rendering context\r\n     */\r\n    /* istanbul ignore next */\r\n    Scene.prototype.debugDraw = function (ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        var i, len;\r\n        for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n            this.tileMaps[i].debugDraw(ctx);\r\n        }\r\n        for (i = 0, len = this.actors.length; i < len; i++) {\r\n            this.actors[i].debugDraw(ctx);\r\n        }\r\n        for (i = 0, len = this.triggers.length; i < len; i++) {\r\n            this.triggers[i].debugDraw(ctx);\r\n        }\r\n        this._broadphase.debugDraw(ctx, 20);\r\n        this.camera.debugDraw(ctx);\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    };\r\n    /**\r\n     * Checks whether an actor is contained in this scene or not\r\n     */\r\n    Scene.prototype.contains = function (actor) {\r\n        return this.actors.indexOf(actor) > -1;\r\n    };\r\n    Scene.prototype.add = function (entity) {\r\n        if (entity instanceof Actor) {\r\n            entity.unkill();\r\n        }\r\n        if (entity instanceof UIActor) {\r\n            if (!Util.contains(this.uiActors, entity)) {\r\n                this.addUIActor(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            if (!Util.contains(this.actors, entity)) {\r\n                this._addChild(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof Timer) {\r\n            if (!Util.contains(this._timers, entity)) {\r\n                this.addTimer(entity);\r\n            }\r\n            return;\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            if (!Util.contains(this.tileMaps, entity)) {\r\n                this.addTileMap(entity);\r\n            }\r\n        }\r\n    };\r\n    Scene.prototype.remove = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.removeUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._removeChild(entity);\r\n            if (!entity.isKilled()) {\r\n                entity.kill();\r\n            }\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.removeTileMap(entity);\r\n        }\r\n    };\r\n    /**\r\n     * Adds (any) actor to act as a piece of UI, meaning it is always positioned\r\n     * in screen coordinates. UI actors do not participate in collisions.\r\n     * @todo Should this be `UIActor` only?\r\n     */\r\n    Scene.prototype.addUIActor = function (actor) {\r\n        this.uiActors.push(actor);\r\n        actor.scene = this;\r\n    };\r\n    /**\r\n     * Removes an actor as a piece of UI\r\n     */\r\n    Scene.prototype.removeUIActor = function (actor) {\r\n        var index = this.uiActors.indexOf(actor);\r\n        if (index > -1) {\r\n            this.uiActors.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an actor to the scene, once this is done the actor will be drawn and updated.\r\n     */\r\n    Scene.prototype._addChild = function (actor) {\r\n        this._broadphase.track(actor.body);\r\n        actor.scene = this;\r\n        if (actor instanceof Trigger) {\r\n            this.triggers.push(actor);\r\n        }\r\n        else {\r\n            this.actors.push(actor);\r\n        }\r\n        this._sortedDrawingTree.add(actor);\r\n    };\r\n    /**\r\n     * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\r\n     */\r\n    Scene.prototype.addTileMap = function (tileMap) {\r\n        this.tileMaps.push(tileMap);\r\n    };\r\n    /**\r\n     * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\r\n     */\r\n    Scene.prototype.removeTileMap = function (tileMap) {\r\n        var index = this.tileMaps.indexOf(tileMap);\r\n        if (index > -1) {\r\n            this.tileMaps.splice(index, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Removes an actor from the scene, it will no longer be drawn or updated.\r\n     */\r\n    Scene.prototype._removeChild = function (actor) {\r\n        this._broadphase.untrack(actor.body);\r\n        if (actor instanceof Trigger) {\r\n            this._triggerKillQueue.push(actor);\r\n        }\r\n        else {\r\n            this._killQueue.push(actor);\r\n        }\r\n        actor.parent = null;\r\n    };\r\n    /**\r\n     * Adds a [[Timer]] to the scene\r\n     * @param timer  The timer to add\r\n     */\r\n    Scene.prototype.addTimer = function (timer) {\r\n        this._timers.push(timer);\r\n        timer.scene = this;\r\n        return timer;\r\n    };\r\n    /**\r\n     * Removes a [[Timer]] from the scene.\r\n     * @warning Can be dangerous, use [[cancelTimer]] instead\r\n     * @param timer  The timer to remove\r\n     */\r\n    Scene.prototype.removeTimer = function (timer) {\r\n        var i = this._timers.indexOf(timer);\r\n        if (i !== -1) {\r\n            this._timers.splice(i, 1);\r\n        }\r\n        return timer;\r\n    };\r\n    /**\r\n     * Cancels a [[Timer]], removing it from the scene nicely\r\n     * @param timer  The timer to cancel\r\n     */\r\n    Scene.prototype.cancelTimer = function (timer) {\r\n        this._cancelQueue.push(timer);\r\n        return timer;\r\n    };\r\n    /**\r\n     * Tests whether a [[Timer]] is active in the scene\r\n     */\r\n    Scene.prototype.isTimerActive = function (timer) {\r\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\r\n    };\r\n    /**\r\n     * Creates and adds a [[Group]] to the scene with a name\r\n     */\r\n    Scene.prototype.createGroup = function (name) {\r\n        return new Group(name, this);\r\n    };\r\n    /**\r\n     * Returns a [[Group]] by name\r\n     */\r\n    Scene.prototype.getGroup = function (name) {\r\n        return this.groups[name];\r\n    };\r\n    Scene.prototype.removeGroup = function (group) {\r\n        if (typeof group === 'string') {\r\n            delete this.groups[group];\r\n        }\r\n        else if (group instanceof Group) {\r\n            delete this.groups[group.name];\r\n        }\r\n        else {\r\n            this._logger.error('Invalid arguments to removeGroup', group);\r\n        }\r\n    };\r\n    /**\r\n     * Removes the given actor from the sorted drawing tree\r\n     */\r\n    Scene.prototype.cleanupDrawTree = function (actor) {\r\n        this._sortedDrawingTree.removeByComparable(actor);\r\n    };\r\n    /**\r\n     * Updates the given actor's position in the sorted drawing tree\r\n     */\r\n    Scene.prototype.updateDrawTree = function (actor) {\r\n        this._sortedDrawingTree.add(actor);\r\n    };\r\n    /**\r\n     * Checks if an actor is in this scene's sorted draw tree\r\n     */\r\n    Scene.prototype.isActorInDrawTree = function (actor) {\r\n        return this._sortedDrawingTree.find(actor);\r\n    };\r\n    Scene.prototype.isCurrentScene = function () {\r\n        if (this.engine) {\r\n            return this.engine.currentScene === this;\r\n        }\r\n        return false;\r\n    };\r\n    Scene.prototype._collectActorStats = function (engine) {\r\n        for (var _i = 0, _a = this.uiActors; _i < _a.length; _i++) {\r\n            var _ui = _a[_i];\r\n            engine.stats.currFrame.actors.ui++;\r\n        }\r\n        for (var _b = 0, _c = this.actors; _b < _c.length; _b++) {\r\n            var actor = _c[_b];\r\n            engine.stats.currFrame.actors.alive++;\r\n            for (var _d = 0, _e = actor.children; _d < _e.length; _d++) {\r\n                var child = _e[_d];\r\n                if (ActorUtils.isUIActor(child)) {\r\n                    engine.stats.currFrame.actors.ui++;\r\n                }\r\n                else {\r\n                    engine.stats.currFrame.actors.alive++;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Scene;\r\n}(Class));\r\nexport { Scene };\r\n//# sourceMappingURL=Scene.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from './../Class';\r\nimport { GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\r\n/**\r\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\r\n * to provide controller support for your games.\r\n *\r\n * [[include:Gamepads.md]]\r\n */\r\nvar Gamepads = /** @class */ (function (_super) {\r\n    __extends(Gamepads, _super);\r\n    function Gamepads() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Whether or not to poll for Gamepad input (default: `false`)\r\n         */\r\n        _this.enabled = false;\r\n        /**\r\n         * Whether or not Gamepad API is supported\r\n         */\r\n        _this.supported = !!navigator.getGamepads;\r\n        _this._gamePadTimeStamps = [0, 0, 0, 0];\r\n        _this._oldPads = [];\r\n        _this._pads = [];\r\n        _this._initSuccess = false;\r\n        _this._navigator = navigator;\r\n        _this._minimumConfiguration = null;\r\n        return _this;\r\n    }\r\n    Gamepads.prototype.init = function () {\r\n        if (!this.supported) {\r\n            return;\r\n        }\r\n        if (this._initSuccess) {\r\n            return;\r\n        }\r\n        // In Chrome, this will return 4 undefined items until a button is pressed\r\n        // In FF, this will not return any items until a button is pressed\r\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\r\n        if (this._oldPads.length && this._oldPads[0]) {\r\n            this._initSuccess = true;\r\n        }\r\n    };\r\n    /**\r\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\r\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\r\n     * all other controllers with more axis or buttons are valid as well. If no minimum\r\n     * configuration is set all pads are valid.\r\n     */\r\n    Gamepads.prototype.setMinimumGamepadConfiguration = function (config) {\r\n        this._enableAndUpdate(); // if config is used, implicitly enable\r\n        this._minimumConfiguration = config;\r\n    };\r\n    /**\r\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\r\n     */\r\n    Gamepads.prototype._enableAndUpdate = function () {\r\n        if (!this.enabled) {\r\n            this.enabled = true;\r\n            this.update();\r\n        }\r\n    };\r\n    /**\r\n     * Checks a navigator gamepad against the minimum configuration if present.\r\n     */\r\n    Gamepads.prototype._isGamepadValid = function (pad) {\r\n        if (!this._minimumConfiguration) {\r\n            return true;\r\n        }\r\n        if (!pad) {\r\n            return false;\r\n        }\r\n        var axesLength = pad.axes.filter(function (value) {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        var buttonLength = pad.buttons.filter(function (value) {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\r\n    };\r\n    Gamepads.prototype.on = function (eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Gamepads.prototype.off = function (eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Updates Gamepad state and publishes Gamepad events\r\n     */\r\n    Gamepads.prototype.update = function () {\r\n        if (!this.enabled || !this.supported) {\r\n            return;\r\n        }\r\n        this.init();\r\n        var gamepads = this._navigator.getGamepads();\r\n        for (var i = 0; i < gamepads.length; i++) {\r\n            if (!gamepads[i]) {\r\n                var gamepad = this.at(i);\r\n                // If was connected, but now isn't emit the disconnect event\r\n                if (gamepad.connected) {\r\n                    this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\r\n                }\r\n                // Reset connection status\r\n                gamepad.connected = false;\r\n                continue;\r\n            }\r\n            else {\r\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\r\n                    this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\r\n                }\r\n                // Set connection status\r\n                this.at(i).connected = true;\r\n            }\r\n            // Only supported in Chrome\r\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\r\n                continue;\r\n            }\r\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\r\n            // Add reference to navigator gamepad\r\n            this.at(i).navigatorGamepad = gamepads[i];\r\n            // Buttons\r\n            var b, bi, a, ai, value;\r\n            for (b in Buttons) {\r\n                bi = Buttons[b];\r\n                if (typeof bi === 'number') {\r\n                    if (gamepads[i].buttons[bi]) {\r\n                        value = gamepads[i].buttons[bi].value;\r\n                        if (value !== this._oldPads[i].getButton(bi)) {\r\n                            if (gamepads[i].buttons[bi].pressed) {\r\n                                this.at(i).updateButton(bi, value);\r\n                                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\r\n                            }\r\n                            else {\r\n                                this.at(i).updateButton(bi, 0);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Axes\r\n            for (a in Axes) {\r\n                ai = Axes[a];\r\n                if (typeof ai === 'number') {\r\n                    value = gamepads[i].axes[ai];\r\n                    if (value !== this._oldPads[i].getAxes(ai)) {\r\n                        this.at(i).updateAxes(ai, value);\r\n                        this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\r\n                    }\r\n                }\r\n            }\r\n            this._oldPads[i] = this._clonePad(gamepads[i]);\r\n        }\r\n    };\r\n    /**\r\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\r\n     */\r\n    Gamepads.prototype.at = function (index) {\r\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\r\n        if (index >= this._pads.length) {\r\n            // Ensure there is a pad to retrieve\r\n            for (var i = this._pads.length - 1, max = index; i < max; i++) {\r\n                this._pads.push(new Gamepad());\r\n                this._oldPads.push(new Gamepad());\r\n            }\r\n        }\r\n        return this._pads[index];\r\n    };\r\n    /**\r\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\r\n     */\r\n    Gamepads.prototype.getValidGamepads = function () {\r\n        this._enableAndUpdate();\r\n        var result = [];\r\n        for (var i = 0; i < this._pads.length; i++) {\r\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\r\n                result.push(this.at(i));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Gets the number of connected gamepads\r\n     */\r\n    Gamepads.prototype.count = function () {\r\n        return this._pads.filter(function (p) { return p.connected; }).length;\r\n    };\r\n    Gamepads.prototype._clonePads = function (pads) {\r\n        var arr = [];\r\n        for (var i = 0, len = pads.length; i < len; i++) {\r\n            arr.push(this._clonePad(pads[i]));\r\n        }\r\n        return arr;\r\n    };\r\n    /**\r\n     * Fastest way to clone a known object is to do it yourself\r\n     */\r\n    Gamepads.prototype._clonePad = function (pad) {\r\n        var i, len;\r\n        var clonedPad = new Gamepad();\r\n        if (!pad) {\r\n            return clonedPad;\r\n        }\r\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\r\n            if (pad.buttons[i]) {\r\n                clonedPad.updateButton(i, pad.buttons[i].value);\r\n            }\r\n        }\r\n        for (i = 0, len = pad.axes.length; i < len; i++) {\r\n            clonedPad.updateAxes(i, pad.axes[i]);\r\n        }\r\n        return clonedPad;\r\n    };\r\n    /**\r\n     * The minimum value an axis has to move before considering it a change\r\n     */\r\n    Gamepads.MinAxisMoveThreshold = 0.05;\r\n    return Gamepads;\r\n}(Class));\r\nexport { Gamepads };\r\n/**\r\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\r\n * for more information on handling controller input.\r\n */\r\nvar Gamepad = /** @class */ (function (_super) {\r\n    __extends(Gamepad, _super);\r\n    function Gamepad() {\r\n        var _this = _super.call(this) || this;\r\n        _this.connected = false;\r\n        _this._buttons = new Array(16);\r\n        _this._axes = new Array(4);\r\n        var i;\r\n        for (i = 0; i < _this._buttons.length; i++) {\r\n            _this._buttons[i] = 0;\r\n        }\r\n        for (i = 0; i < _this._axes.length; i++) {\r\n            _this._axes[i] = 0;\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Whether or not the given button is pressed\r\n     * @param button     The button to query\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    Gamepad.prototype.isButtonPressed = function (button, threshold) {\r\n        if (threshold === void 0) { threshold = 1; }\r\n        return this._buttons[button] >= threshold;\r\n    };\r\n    /**\r\n     * Gets the given button value between 0 and 1\r\n     */\r\n    Gamepad.prototype.getButton = function (button) {\r\n        return this._buttons[button];\r\n    };\r\n    /**\r\n     * Gets the given axis value between -1 and 1. Values below\r\n     * [[MinAxisMoveThreshold]] are considered 0.\r\n     */\r\n    Gamepad.prototype.getAxes = function (axes) {\r\n        var value = this._axes[axes];\r\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    };\r\n    Gamepad.prototype.updateButton = function (buttonIndex, value) {\r\n        this._buttons[buttonIndex] = value;\r\n    };\r\n    Gamepad.prototype.updateAxes = function (axesIndex, value) {\r\n        this._axes[axesIndex] = value;\r\n    };\r\n    return Gamepad;\r\n}(Class));\r\nexport { Gamepad };\r\n/**\r\n * Gamepad Buttons enumeration\r\n */\r\nexport var Buttons;\r\n(function (Buttons) {\r\n    /**\r\n     * Face 1 button (e.g. A)\r\n     */\r\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\r\n    /**\r\n     * Face 2 button (e.g. B)\r\n     */\r\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\r\n    /**\r\n     * Face 3 button (e.g. X)\r\n     */\r\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\r\n    /**\r\n     * Face 4 button (e.g. Y)\r\n     */\r\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\r\n    /**\r\n     * Left bumper button\r\n     */\r\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\r\n    /**\r\n     * Right bumper button\r\n     */\r\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\r\n    /**\r\n     * Left trigger button\r\n     */\r\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\r\n    /**\r\n     * Right trigger button\r\n     */\r\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\r\n    /**\r\n     * Select button\r\n     */\r\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\r\n    /**\r\n     * Start button\r\n     */\r\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\r\n    /**\r\n     * Left analog stick press (e.g. L3)\r\n     */\r\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\r\n    /**\r\n     * Right analog stick press (e.g. R3)\r\n     */\r\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\r\n    /**\r\n     * D-pad up\r\n     */\r\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\r\n    /**\r\n     * D-pad down\r\n     */\r\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\r\n    /**\r\n     * D-pad left\r\n     */\r\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\r\n    /**\r\n     * D-pad right\r\n     */\r\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\r\n})(Buttons || (Buttons = {}));\r\n/**\r\n * Gamepad Axes enumeration\r\n */\r\nexport var Axes;\r\n(function (Axes) {\r\n    /**\r\n     * Left analogue stick X direction\r\n     */\r\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\r\n    /**\r\n     * Left analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\r\n    /**\r\n     * Right analogue stick X direction\r\n     */\r\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\r\n    /**\r\n     * Right analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\r\n})(Axes || (Axes = {}));\r\n//# sourceMappingURL=Gamepad.js.map","/**\r\n * Debug statistics and flags for Excalibur. If polling these values, it would be\r\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\r\n * updated during a frame.\r\n */\r\nvar Debug = /** @class */ (function () {\r\n    function Debug() {\r\n        /**\r\n         * Performance statistics\r\n         */\r\n        this.stats = {\r\n            /**\r\n             * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[postframe]] event. See [[IFrameStats]]\r\n             */\r\n            currFrame: new FrameStats(),\r\n            /**\r\n             * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[IFrameStats]]\r\n             */\r\n            prevFrame: new FrameStats()\r\n        };\r\n    }\r\n    return Debug;\r\n}());\r\nexport { Debug };\r\n/**\r\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\r\n * creating instances of this every frame.\r\n */\r\nvar FrameStats = /** @class */ (function () {\r\n    function FrameStats() {\r\n        this._id = 0;\r\n        this._delta = 0;\r\n        this._fps = 0;\r\n        this._actorStats = {\r\n            alive: 0,\r\n            killed: 0,\r\n            ui: 0,\r\n            get remaining() {\r\n                return this.alive - this.killed;\r\n            },\r\n            get total() {\r\n                return this.remaining + this.ui;\r\n            }\r\n        };\r\n        this._durationStats = {\r\n            update: 0,\r\n            draw: 0,\r\n            get total() {\r\n                return this.update + this.draw;\r\n            }\r\n        };\r\n        this._physicsStats = new PhysicsStats();\r\n    }\r\n    /**\r\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    FrameStats.prototype.reset = function (otherStats) {\r\n        if (otherStats) {\r\n            this.id = otherStats.id;\r\n            this.delta = otherStats.delta;\r\n            this.fps = otherStats.fps;\r\n            this.actors.alive = otherStats.actors.alive;\r\n            this.actors.killed = otherStats.actors.killed;\r\n            this.actors.ui = otherStats.actors.ui;\r\n            this.duration.update = otherStats.duration.update;\r\n            this.duration.draw = otherStats.duration.draw;\r\n            this._physicsStats.reset(otherStats.physics);\r\n        }\r\n        else {\r\n            this.id = this.delta = this.fps = 0;\r\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\r\n            this.duration.update = this.duration.draw = 0;\r\n            this._physicsStats.reset();\r\n        }\r\n    };\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    FrameStats.prototype.clone = function () {\r\n        var fs = new FrameStats();\r\n        fs.reset(this);\r\n        return fs;\r\n    };\r\n    Object.defineProperty(FrameStats.prototype, \"id\", {\r\n        /**\r\n         * Gets the frame's id\r\n         */\r\n        get: function () {\r\n            return this._id;\r\n        },\r\n        /**\r\n         * Sets the frame's id\r\n         */\r\n        set: function (value) {\r\n            this._id = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"delta\", {\r\n        /**\r\n         * Gets the frame's delta (time since last frame)\r\n         */\r\n        get: function () {\r\n            return this._delta;\r\n        },\r\n        /**\r\n         * Sets the frame's delta (time since last frame). Internal use only.\r\n         * @internal\r\n         */\r\n        set: function (value) {\r\n            this._delta = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"fps\", {\r\n        /**\r\n         * Gets the frame's frames-per-second (FPS)\r\n         */\r\n        get: function () {\r\n            return this._fps;\r\n        },\r\n        /**\r\n         * Sets the frame's frames-per-second (FPS). Internal use only.\r\n         * @internal\r\n         */\r\n        set: function (value) {\r\n            this._fps = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"actors\", {\r\n        /**\r\n         * Gets the frame's actor statistics\r\n         */\r\n        get: function () {\r\n            return this._actorStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"duration\", {\r\n        /**\r\n         * Gets the frame's duration statistics\r\n         */\r\n        get: function () {\r\n            return this._durationStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FrameStats.prototype, \"physics\", {\r\n        /**\r\n         * Gets the frame's physics statistics\r\n         */\r\n        get: function () {\r\n            return this._physicsStats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FrameStats;\r\n}());\r\nexport { FrameStats };\r\nvar PhysicsStats = /** @class */ (function () {\r\n    function PhysicsStats() {\r\n        this._pairs = 0;\r\n        this._collisions = 0;\r\n        this._collidersHash = {};\r\n        this._fastBodies = 0;\r\n        this._fastBodyCollisions = 0;\r\n        this._broadphase = 0;\r\n        this._narrowphase = 0;\r\n    }\r\n    /**\r\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    PhysicsStats.prototype.reset = function (otherStats) {\r\n        if (otherStats) {\r\n            this.pairs = otherStats.pairs;\r\n            this.collisions = otherStats.collisions;\r\n            this.collidersHash = otherStats.collidersHash;\r\n            this.fastBodies = otherStats.fastBodies;\r\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\r\n            this.broadphase = otherStats.broadphase;\r\n            this.narrowphase = otherStats.narrowphase;\r\n        }\r\n        else {\r\n            this.pairs = this.collisions = this.fastBodies = 0;\r\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\r\n            this.collidersHash = {};\r\n        }\r\n    };\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    PhysicsStats.prototype.clone = function () {\r\n        var ps = new PhysicsStats();\r\n        ps.reset(this);\r\n        return ps;\r\n    };\r\n    Object.defineProperty(PhysicsStats.prototype, \"pairs\", {\r\n        get: function () {\r\n            return this._pairs;\r\n        },\r\n        set: function (value) {\r\n            this._pairs = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"collisions\", {\r\n        get: function () {\r\n            return this._collisions;\r\n        },\r\n        set: function (value) {\r\n            this._collisions = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"collidersHash\", {\r\n        get: function () {\r\n            return this._collidersHash;\r\n        },\r\n        set: function (colliders) {\r\n            this._collidersHash = colliders;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"fastBodies\", {\r\n        get: function () {\r\n            return this._fastBodies;\r\n        },\r\n        set: function (value) {\r\n            this._fastBodies = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"fastBodyCollisions\", {\r\n        get: function () {\r\n            return this._fastBodyCollisions;\r\n        },\r\n        set: function (value) {\r\n            this._fastBodyCollisions = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"broadphase\", {\r\n        get: function () {\r\n            return this._broadphase;\r\n        },\r\n        set: function (value) {\r\n            this._broadphase = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PhysicsStats.prototype, \"narrowphase\", {\r\n        get: function () {\r\n            return this._narrowphase;\r\n        },\r\n        set: function (value) {\r\n            this._narrowphase = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PhysicsStats;\r\n}());\r\nexport { PhysicsStats };\r\n//# sourceMappingURL=Debug.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { ScrollPreventionMode } from './../Engine';\r\nimport { GameEvent } from '../Events';\r\nimport { Vector, GlobalCoordinates } from '../Algebra';\r\nimport { Class } from '../Class';\r\nimport * as Actors from '../Util/Actors';\r\nimport * as Util from '../Util/Util';\r\n/**\r\n * The type of pointer for a [[PointerEvent]].\r\n */\r\nexport var PointerType;\r\n(function (PointerType) {\r\n    PointerType[PointerType[\"Touch\"] = 0] = \"Touch\";\r\n    PointerType[PointerType[\"Mouse\"] = 1] = \"Mouse\";\r\n    PointerType[PointerType[\"Pen\"] = 2] = \"Pen\";\r\n    PointerType[PointerType[\"Unknown\"] = 3] = \"Unknown\";\r\n})(PointerType || (PointerType = {}));\r\n/**\r\n * The mouse button being pressed.\r\n */\r\nexport var PointerButton;\r\n(function (PointerButton) {\r\n    PointerButton[PointerButton[\"Left\"] = 0] = \"Left\";\r\n    PointerButton[PointerButton[\"Middle\"] = 1] = \"Middle\";\r\n    PointerButton[PointerButton[\"Right\"] = 2] = \"Right\";\r\n    PointerButton[PointerButton[\"Unknown\"] = 3] = \"Unknown\";\r\n})(PointerButton || (PointerButton = {}));\r\nexport var WheelDeltaMode;\r\n(function (WheelDeltaMode) {\r\n    WheelDeltaMode[WheelDeltaMode[\"Pixel\"] = 0] = \"Pixel\";\r\n    WheelDeltaMode[WheelDeltaMode[\"Line\"] = 1] = \"Line\";\r\n    WheelDeltaMode[WheelDeltaMode[\"Page\"] = 2] = \"Page\";\r\n})(WheelDeltaMode || (WheelDeltaMode = {}));\r\n/**\r\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\r\n */\r\nexport var PointerScope;\r\n(function (PointerScope) {\r\n    /**\r\n     * Handle events on the `canvas` element only. Events originating outside the\r\n     * `canvas` will not be handled.\r\n     */\r\n    PointerScope[PointerScope[\"Canvas\"] = 0] = \"Canvas\";\r\n    /**\r\n     * Handles events on the entire document. All events will be handled by Excalibur.\r\n     */\r\n    PointerScope[PointerScope[\"Document\"] = 1] = \"Document\";\r\n})(PointerScope || (PointerScope = {}));\r\n/**\r\n * A constant used to normalize wheel events across different browsers\r\n *\r\n * This normalization factor is pulled from https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\r\n */\r\nvar ScrollWheelNormalizationFactor = -1 / 40;\r\n/**\r\n * Pointer events\r\n *\r\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\r\n * handling pointer input.\r\n *\r\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\r\n */\r\nvar PointerEvent = /** @class */ (function (_super) {\r\n    __extends(PointerEvent, _super);\r\n    /**\r\n     * @param coordinates         The [[GlobalCoordinates]] of the event\r\n     * @param pointer             The [[Pointer]] of the event\r\n     * @param index               The index of the pointer (zero-based)\r\n     * @param pointerType         The type of pointer\r\n     * @param button              The button pressed (if [[PointerType.Mouse]])\r\n     * @param ev                  The raw DOM event being handled\r\n     * @param pos                 (Will be added to signature in 0.14.0 release) The position of the event (in world coordinates)\r\n     */\r\n    function PointerEvent(coordinates, pointer, index, pointerType, button, ev) {\r\n        var _this = _super.call(this) || this;\r\n        _this.coordinates = coordinates;\r\n        _this.pointer = pointer;\r\n        _this.index = index;\r\n        _this.pointerType = pointerType;\r\n        _this.button = button;\r\n        _this.ev = ev;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PointerEvent.prototype, \"worldPos\", {\r\n        /** The world coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.worldPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"pagePos\", {\r\n        /** The page coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.pagePos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"screenPos\", {\r\n        /** The screen coordinates of the event. */\r\n        get: function () {\r\n            return this.coordinates.screenPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PointerEvent.prototype, \"pos\", {\r\n        get: function () {\r\n            return this.coordinates.worldPos.clone();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets event path to actor, depending on actor provided.\r\n     * If actor is lower in hierarchy tree, previous path'll be kept.\r\n     * @param actor Actor, to lay path form.\r\n     */\r\n    PointerEvent.prototype.layPath = function (actor) {\r\n        if (!this.pointer.isActorUnderPointer(actor)) {\r\n            return;\r\n        }\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    return PointerEvent;\r\n}(GameEvent));\r\nexport { PointerEvent };\r\nvar PointerEventFactory = /** @class */ (function () {\r\n    function PointerEventFactory(_pointerEventType) {\r\n        this._pointerEventType = _pointerEventType;\r\n    }\r\n    /**\r\n     * Create specific PointerEvent\r\n     */\r\n    PointerEventFactory.prototype.create = function (coordinates, pointer, index, pointerType, button, ev) {\r\n        return new this._pointerEventType(coordinates, pointer, index, pointerType, button, ev);\r\n    };\r\n    return PointerEventFactory;\r\n}());\r\nexport { PointerEventFactory };\r\nvar PointerDragEvent = /** @class */ (function (_super) {\r\n    __extends(PointerDragEvent, _super);\r\n    function PointerDragEvent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return PointerDragEvent;\r\n}(PointerEvent));\r\nexport { PointerDragEvent };\r\nvar PointerUpEvent = /** @class */ (function (_super) {\r\n    __extends(PointerUpEvent, _super);\r\n    function PointerUpEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerup';\r\n        return _this;\r\n    }\r\n    PointerUpEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragEnd && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragend', this);\r\n        }\r\n    };\r\n    return PointerUpEvent;\r\n}(PointerEvent));\r\nexport { PointerUpEvent };\r\nvar PointerDownEvent = /** @class */ (function (_super) {\r\n    __extends(PointerDownEvent, _super);\r\n    function PointerDownEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerdown';\r\n        return _this;\r\n    }\r\n    PointerDownEvent.prototype._onActionEnd = function (actor) {\r\n        if (this.pointer.isDragStart && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragstart', this);\r\n        }\r\n    };\r\n    return PointerDownEvent;\r\n}(PointerEvent));\r\nexport { PointerDownEvent };\r\nvar PointerMoveEvent = /** @class */ (function (_super) {\r\n    __extends(PointerMoveEvent, _super);\r\n    function PointerMoveEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointermove';\r\n        return _this;\r\n    }\r\n    PointerMoveEvent.prototype.propagate = function () {\r\n        var _this = this;\r\n        if (!this.eventPath.length) {\r\n            if (this.pointer.hasActorsUnderPointer) {\r\n                var actors = this.pointer.getActorsUnderPointer();\r\n                actors.forEach(function (actor) {\r\n                    if (!_this.pointer.isActorUnderPointer(actor)) {\r\n                        _this._onActorLeave(actor);\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        this.action();\r\n        if (this.bubbles) {\r\n            this.propagate();\r\n        }\r\n    };\r\n    /**\r\n     * Sets event path to actor, depending on actor provided.\r\n     * If actor is in a dragging state, current dragging target would be used.\r\n     * @param actor Actor, to lay path form.\r\n     */\r\n    PointerMoveEvent.prototype.layPath = function (actor) {\r\n        /**\r\n         *  double-check is preformed, because user could move pointer too fast and\r\n         *  in that case, pointer can appear out of boundings of the dragging element\r\n         */\r\n        if (this.pointer.isDragging) {\r\n            actor = this.pointer.dragTarget || actor;\r\n        }\r\n        else if (!this.pointer.isActorUnderPointer(actor)) {\r\n            return;\r\n        }\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    PointerMoveEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n        if (this.pointer.isActorUnderPointer(actor) && !this.pointer.hasActorUnderPointerInList(actor)) {\r\n            this._onActorEnter(actor);\r\n        }\r\n        if (this.pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragmove', this);\r\n        }\r\n    };\r\n    PointerMoveEvent.prototype._onActorEnter = function (actor) {\r\n        var pe = createPointerEventByName('enter', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\r\n        pe.layPath(actor);\r\n        pe.propagate();\r\n        this.pointer.addActorUnderPointer(actor);\r\n        if (this.pointer.isDragging) {\r\n            this.pointer.dragTarget = actor;\r\n        }\r\n    };\r\n    PointerMoveEvent.prototype._onActorLeave = function (actor) {\r\n        var pe = createPointerEventByName('leave', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\r\n        pe.layPath(actor);\r\n        pe.propagate();\r\n        this.pointer.removeActorUnderPointer(actor);\r\n    };\r\n    return PointerMoveEvent;\r\n}(PointerEvent));\r\nexport { PointerMoveEvent };\r\nvar PointerEnterEvent = /** @class */ (function (_super) {\r\n    __extends(PointerEnterEvent, _super);\r\n    function PointerEnterEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerenter';\r\n        return _this;\r\n    }\r\n    PointerEnterEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n    };\r\n    PointerEnterEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragenter', this);\r\n        }\r\n    };\r\n    return PointerEnterEvent;\r\n}(PointerEvent));\r\nexport { PointerEnterEvent };\r\nvar PointerLeaveEvent = /** @class */ (function (_super) {\r\n    __extends(PointerLeaveEvent, _super);\r\n    function PointerLeaveEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointerleave';\r\n        return _this;\r\n    }\r\n    PointerLeaveEvent.prototype.layPath = function (actor) {\r\n        var actorPath = actor.getAncestors();\r\n        this._path = actorPath.length > this._path.length ? actorPath : this._path;\r\n    };\r\n    PointerLeaveEvent.prototype._onActionStart = function (actor) {\r\n        if (!actor.capturePointer.captureMoveEvents) {\r\n            return;\r\n        }\r\n    };\r\n    PointerLeaveEvent.prototype._onActionEnd = function (actor) {\r\n        var pointer = this.pointer;\r\n        if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\r\n            actor.eventDispatcher.emit('pointerdragleave', this);\r\n        }\r\n    };\r\n    return PointerLeaveEvent;\r\n}(PointerEvent));\r\nexport { PointerLeaveEvent };\r\nvar PointerCancelEvent = /** @class */ (function (_super) {\r\n    __extends(PointerCancelEvent, _super);\r\n    function PointerCancelEvent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._name = 'pointercancel';\r\n        return _this;\r\n    }\r\n    return PointerCancelEvent;\r\n}(PointerEvent));\r\nexport { PointerCancelEvent };\r\n/**\r\n * Wheel Events\r\n *\r\n * Represents a mouse wheel event. See [[Pointers]] for more information on\r\n * handling point input.\r\n */\r\nvar WheelEvent = /** @class */ (function (_super) {\r\n    __extends(WheelEvent, _super);\r\n    /**\r\n     * @param x            The `x` coordinate of the event (in world coordinates)\r\n     * @param y            The `y` coordinate of the event (in world coordinates)\r\n     * @param pageX        The `x` coordinate of the event (in document coordinates)\r\n     * @param pageY        The `y` coordinate of the event (in document coordinates)\r\n     * @param screenX      The `x` coordinate of the event (in screen coordinates)\r\n     * @param screenY      The `y` coordinate of the event (in screen coordinates)\r\n     * @param index        The index of the pointer (zero-based)\r\n     * @param deltaX       The type of pointer\r\n     * @param deltaY       The type of pointer\r\n     * @param deltaZ       The type of pointer\r\n     * @param deltaMode    The type of movement [[WheelDeltaMode]]\r\n     * @param ev           The raw DOM event being handled\r\n     */\r\n    function WheelEvent(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\r\n        var _this = _super.call(this) || this;\r\n        _this.x = x;\r\n        _this.y = y;\r\n        _this.pageX = pageX;\r\n        _this.pageY = pageY;\r\n        _this.screenX = screenX;\r\n        _this.screenY = screenY;\r\n        _this.index = index;\r\n        _this.deltaX = deltaX;\r\n        _this.deltaY = deltaY;\r\n        _this.deltaZ = deltaZ;\r\n        _this.deltaMode = deltaMode;\r\n        _this.ev = ev;\r\n        return _this;\r\n    }\r\n    return WheelEvent;\r\n}(GameEvent));\r\nexport { WheelEvent };\r\nfunction createPointerEventByName(eventName, coordinates, pointer, index, pointerType, button, ev) {\r\n    var factory;\r\n    switch (eventName) {\r\n        case 'up':\r\n            factory = new PointerEventFactory(PointerUpEvent);\r\n            break;\r\n        case 'down':\r\n            factory = new PointerEventFactory(PointerDownEvent);\r\n            break;\r\n        case 'move':\r\n            factory = new PointerEventFactory(PointerMoveEvent);\r\n            break;\r\n        case 'cancel':\r\n            factory = new PointerEventFactory(PointerCancelEvent);\r\n            break;\r\n        case 'enter':\r\n            factory = new PointerEventFactory(PointerEnterEvent);\r\n            break;\r\n        case 'leave':\r\n            factory = new PointerEventFactory(PointerLeaveEvent);\r\n            break;\r\n    }\r\n    return factory.create(coordinates, pointer, index, pointerType, button, ev);\r\n}\r\n/**\r\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to\r\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\r\n *\r\n * [[include:Pointers.md]]\r\n */\r\nvar Pointers = /** @class */ (function (_super) {\r\n    __extends(Pointers, _super);\r\n    function Pointers(engine) {\r\n        var _this = _super.call(this) || this;\r\n        _this._pointerDown = [];\r\n        _this._pointerUp = [];\r\n        _this._pointerMove = [];\r\n        _this._pointerCancel = [];\r\n        _this._wheel = [];\r\n        _this._pointers = [];\r\n        _this._activePointers = [];\r\n        _this._engine = engine;\r\n        _this._pointers.push(new Pointer());\r\n        _this._activePointers = [-1];\r\n        _this.primary = _this._pointers[0];\r\n        return _this;\r\n    }\r\n    Pointers.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Initializes pointer event listeners\r\n     */\r\n    Pointers.prototype.init = function (target) {\r\n        target = target || this._engine.canvas;\r\n        // Touch Events\r\n        target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\r\n        target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\r\n        target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\r\n        target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\r\n        // W3C Pointer Events\r\n        // Current: IE11, IE10\r\n        if (window.PointerEvent) {\r\n            // IE11\r\n            this._engine.canvas.style.touchAction = 'none';\r\n            target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\r\n            target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\r\n            target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\r\n            target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerCancel));\r\n        }\r\n        else if (window.MSPointerEvent) {\r\n            // IE10\r\n            this._engine.canvas.style.msTouchAction = 'none';\r\n            target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\r\n            target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\r\n            target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\r\n            target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerCancel));\r\n        }\r\n        else {\r\n            // Mouse Events\r\n            target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\r\n            target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\r\n            target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\r\n        }\r\n        // MDN MouseWheelEvent\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            target.addEventListener('wheel', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            target.addEventListener('mousewheel', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            target.addEventListener('MozMousePixelScroll', this._handleWheelEvent('wheel', this._wheel));\r\n        }\r\n    };\r\n    Pointers.prototype.update = function () {\r\n        this._pointerUp.length = 0;\r\n        this._pointerDown.length = 0;\r\n        this._pointerMove.length = 0;\r\n        this._pointerCancel.length = 0;\r\n        this._wheel.length = 0;\r\n        for (var i = 0; i < this._pointers.length; i++) {\r\n            this._pointers[i].update();\r\n        }\r\n    };\r\n    /**\r\n     * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\r\n     * @param index  The pointer index to retrieve\r\n     */\r\n    Pointers.prototype.at = function (index) {\r\n        if (index >= this._pointers.length) {\r\n            // Ensure there is a pointer to retrieve\r\n            for (var i = this._pointers.length - 1, max = index; i < max; i++) {\r\n                this._pointers.push(new Pointer());\r\n                this._activePointers.push(-1);\r\n            }\r\n        }\r\n        return this._pointers[index];\r\n    };\r\n    /**\r\n     * Get number of pointers being watched\r\n     */\r\n    Pointers.prototype.count = function () {\r\n        return this._pointers.length;\r\n    };\r\n    /**\r\n     * Propogates events through ancestors chain if necessary\r\n     */\r\n    Pointers.prototype.propagate = function () {\r\n        this._propagatePointerEvent(this._pointerDown);\r\n        this._propagatePointerEvent(this._pointerUp);\r\n        this._propagatePointerEvent(this._pointerMove);\r\n        this._propagatePointerEvent(this._pointerCancel);\r\n        this._propagateWheelEvent('pointerwheel', this._wheel);\r\n    };\r\n    /**\r\n     * Revises pointer events paths accordingly to actor provided\r\n     * @param actor  Actor to be revised\r\n     */\r\n    Pointers.prototype.revisePointerEventsPaths = function (actor) {\r\n        this._revisePointerEventPath(actor, this._pointerDown);\r\n        this._revisePointerEventPath(actor, this._pointerUp);\r\n        this._revisePointerEventPath(actor, this._pointerMove);\r\n        this._revisePointerEventPath(actor, this._pointerCancel);\r\n        this._validateWheelEventPath(this._wheel, actor);\r\n    };\r\n    Pointers.prototype._propagatePointerEvent = function (pointers) {\r\n        var len = pointers.length;\r\n        for (var i = 0; i < len; i++) {\r\n            pointers[i].propagate();\r\n        }\r\n    };\r\n    Pointers.prototype._revisePointerEventPath = function (actor, pointers) {\r\n        var len = pointers.length;\r\n        for (var i = 0; i < len; i++) {\r\n            var pointerEvent = pointers[i];\r\n            pointerEvent.layPath(actor);\r\n        }\r\n    };\r\n    Pointers.prototype._validateWheelEventPath = function (pointers, actor) {\r\n        for (var i = 0; i < pointers.length; i++) {\r\n            var wheelEvent = pointers[i];\r\n            var isNotUIActor = !Actors.isUIActor(actor);\r\n            if (actor.contains(wheelEvent.x, wheelEvent.y, isNotUIActor)) {\r\n                wheelEvent.layPath(actor);\r\n            }\r\n        }\r\n    };\r\n    Pointers.prototype._propagateWheelEvent = function (eventName, pointers) {\r\n        var len = pointers.length;\r\n        var wheelEvent;\r\n        for (var i = 0; i < len; i++) {\r\n            wheelEvent = pointers[i];\r\n            switch (eventName) {\r\n                case 'pointerwheel':\r\n                    this._propagateWheelPointerEvent(wheelEvent);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Pointers.prototype._propagateWheelPointerEvent = function (wheelEvent) {\r\n        if (!wheelEvent.eventPath.length) {\r\n            return;\r\n        }\r\n        var actor = wheelEvent.eventPath.pop();\r\n        actor.eventDispatcher.emit('pointerwheel', wheelEvent);\r\n        if (wheelEvent.bubbles) {\r\n            this._propagateWheelPointerEvent(wheelEvent);\r\n        }\r\n    };\r\n    Pointers.prototype._handleMouseEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            var pointer = _this.at(0);\r\n            var coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, _this._engine);\r\n            var pe = createPointerEventByName(eventName, coordinates, pointer, 0, PointerType.Mouse, e.button, e);\r\n            eventArr.push(pe);\r\n            pointer.eventDispatcher.emit(eventName, pe);\r\n        };\r\n    };\r\n    Pointers.prototype._handleTouchEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            for (var i = 0, len = e.changedTouches.length; i < len; i++) {\r\n                var index = _this._pointers.length > 1 ? _this._getPointerIndex(e.changedTouches[i].identifier) : 0;\r\n                if (index === -1) {\r\n                    continue;\r\n                }\r\n                var pointer = _this.at(index);\r\n                var coordinates = GlobalCoordinates.fromPagePosition(e.changedTouches[i].pageX, e.changedTouches[i].pageY, _this._engine);\r\n                var pe = createPointerEventByName(eventName, coordinates, pointer, index, PointerType.Touch, PointerButton.Unknown, e);\r\n                eventArr.push(pe);\r\n                pointer.eventDispatcher.emit(eventName, pe);\r\n                // only with multi-pointer\r\n                if (_this._pointers.length > 1) {\r\n                    if (eventName === 'up') {\r\n                        // remove pointer ID from pool when pointer is lifted\r\n                        _this._activePointers[index] = -1;\r\n                    }\r\n                    else if (eventName === 'down') {\r\n                        // set pointer ID to given index\r\n                        _this._activePointers[index] = e.changedTouches[i].identifier;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    };\r\n    Pointers.prototype._handlePointerEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            e.preventDefault();\r\n            // get the index for this pointer ID if multi-pointer is asked for\r\n            var index = _this._pointers.length > 1 ? _this._getPointerIndex(e.pointerId) : 0;\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n            var pointer = _this.at(index);\r\n            var coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, _this._engine);\r\n            var pe = createPointerEventByName(eventName, coordinates, pointer, index, _this._stringToPointerType(e.pointerType), e.button, e);\r\n            eventArr.push(pe);\r\n            pointer.eventDispatcher.emit(eventName, pe);\r\n            // only with multi-pointer\r\n            if (_this._pointers.length > 1) {\r\n                if (eventName === 'up') {\r\n                    // remove pointer ID from pool when pointer is lifted\r\n                    _this._activePointers[index] = -1;\r\n                }\r\n                else if (eventName === 'down') {\r\n                    // set pointer ID to given index\r\n                    _this._activePointers[index] = e.pointerId;\r\n                }\r\n            }\r\n        };\r\n    };\r\n    Pointers.prototype._handleWheelEvent = function (eventName, eventArr) {\r\n        var _this = this;\r\n        return function (e) {\r\n            // Should we prevent page scroll because of this event\r\n            if (_this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n                (_this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && e.target === _this._engine.canvas)) {\r\n                e.preventDefault();\r\n            }\r\n            var x = e.pageX - Util.getPosition(_this._engine.canvas).x;\r\n            var y = e.pageY - Util.getPosition(_this._engine.canvas).y;\r\n            var transformedPoint = _this._engine.screenToWorldCoordinates(new Vector(x, y));\r\n            // deltaX, deltaY, and deltaZ are the standard modern properties\r\n            // wheelDeltaX, wheelDeltaY, are legacy properties in webkit browsers and older IE\r\n            // e.detail is only used in opera\r\n            var deltaX = e.deltaX || e.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\r\n            var deltaY = e.deltaY || e.wheelDeltaY * ScrollWheelNormalizationFactor || e.wheelDelta * ScrollWheelNormalizationFactor || e.detail || 0;\r\n            var deltaZ = e.deltaZ || 0;\r\n            var deltaMode = WheelDeltaMode.Pixel;\r\n            if (e.deltaMode) {\r\n                if (e.deltaMode === 1) {\r\n                    deltaMode = WheelDeltaMode.Line;\r\n                }\r\n                else if (e.deltaMode === 2) {\r\n                    deltaMode = WheelDeltaMode.Page;\r\n                }\r\n            }\r\n            var we = new WheelEvent(transformedPoint.x, transformedPoint.y, e.pageX, e.pageY, x, y, 0, deltaX, deltaY, deltaZ, deltaMode, e);\r\n            eventArr.push(we);\r\n            _this.at(0).eventDispatcher.emit(eventName, we);\r\n        };\r\n    };\r\n    /**\r\n     * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\r\n     * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\r\n     */\r\n    Pointers.prototype._getPointerIndex = function (pointerId) {\r\n        var idx;\r\n        if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\r\n            return idx;\r\n        }\r\n        for (var i = 0; i < this._activePointers.length; i++) {\r\n            if (this._activePointers[i] === -1) {\r\n                return i;\r\n            }\r\n        }\r\n        // ignore pointer because game isn't watching\r\n        return -1;\r\n    };\r\n    Pointers.prototype._stringToPointerType = function (s) {\r\n        switch (s) {\r\n            case 'touch':\r\n                return PointerType.Touch;\r\n            case 'mouse':\r\n                return PointerType.Mouse;\r\n            case 'pen':\r\n                return PointerType.Pen;\r\n            default:\r\n                return PointerType.Unknown;\r\n        }\r\n    };\r\n    return Pointers;\r\n}(Class));\r\nexport { Pointers };\r\n/**\r\n * Captures and dispatches PointerEvents\r\n */\r\nvar Pointer = /** @class */ (function (_super) {\r\n    __extends(Pointer, _super);\r\n    function Pointer() {\r\n        var _this = _super.call(this) || this;\r\n        _this._isDown = false;\r\n        _this._wasDown = false;\r\n        _this._actorsUnderPointer = { length: 0 };\r\n        /**\r\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastPagePos = null;\r\n        /**\r\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastScreenPos = null;\r\n        /**\r\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        _this.lastWorldPos = null;\r\n        /**\r\n         * Returns the currently dragging target or null if it isn't exist\r\n         */\r\n        _this.dragTarget = null;\r\n        _this.on('move', _this._onPointerMove);\r\n        _this.on('down', _this._onPointerDown);\r\n        _this.on('up', _this._onPointerUp);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Pointer.prototype, \"isDragging\", {\r\n        /**\r\n         * Whether the Pointer is currently dragging.\r\n         */\r\n        get: function () {\r\n            return this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"isDragStart\", {\r\n        /**\r\n         * Whether the Pointer just started dragging.\r\n         */\r\n        get: function () {\r\n            return !this._wasDown && this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"isDragEnd\", {\r\n        /**\r\n         * Whether the Pointer just ended dragging.\r\n         */\r\n        get: function () {\r\n            return this._wasDown && !this._isDown;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pointer.prototype, \"hasActorsUnderPointer\", {\r\n        /**\r\n         * Returns true if pointer has any actors under\r\n         */\r\n        get: function () {\r\n            return !!this._actorsUnderPointer.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Pointer.prototype.update = function () {\r\n        if (this._wasDown && !this._isDown) {\r\n            this._wasDown = false;\r\n        }\r\n        else if (!this._wasDown && this._isDown) {\r\n            this._wasDown = true;\r\n        }\r\n    };\r\n    /**\r\n     * Adds an Actor to actorsUnderPointer object.\r\n     * @param actor An Actor to be added;\r\n     */\r\n    Pointer.prototype.addActorUnderPointer = function (actor) {\r\n        if (!this.hasActorUnderPointerInList(actor)) {\r\n            this._actorsUnderPointer[actor.id] = actor;\r\n            this._actorsUnderPointer.length += 1;\r\n        }\r\n    };\r\n    /**\r\n     * Removes an Actor from actorsUnderPointer object.\r\n     * @param actor An Actor to be removed;\r\n     */\r\n    Pointer.prototype.removeActorUnderPointer = function (actor) {\r\n        if (this.hasActorUnderPointerInList(actor)) {\r\n            delete this._actorsUnderPointer[actor.id];\r\n            this._actorsUnderPointer.length -= 1;\r\n        }\r\n    };\r\n    /**\r\n     * Returns an Actor from actorsUnderPointer object.\r\n     * @param actor An Actor to be ;\r\n     */\r\n    Pointer.prototype.getActorsUnderPointer = function () {\r\n        var actors = [];\r\n        for (var id in this._actorsUnderPointer) {\r\n            if (id === 'length') {\r\n                continue;\r\n            }\r\n            var actor = this._actorsUnderPointer[id];\r\n            actors.push(actor);\r\n        }\r\n        return actors;\r\n    };\r\n    /**\r\n     * Checks if Pointer has a specific Actor under.\r\n     * @param actor An Actor for check;\r\n     */\r\n    Pointer.prototype.isActorUnderPointer = function (actor) {\r\n        return actor.contains(this.lastWorldPos.x, this.lastWorldPos.y, !Actors.isUIActor(actor));\r\n    };\r\n    /**\r\n     * Checks if Pointer has a specific Actor in ActrorsUnderPointer list.\r\n     * @param actor An Actor for check;\r\n     */\r\n    Pointer.prototype.hasActorUnderPointerInList = function (actor) {\r\n        return this._actorsUnderPointer.hasOwnProperty(actor.id.toString());\r\n    };\r\n    Pointer.prototype._onPointerMove = function (ev) {\r\n        this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n        this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n        this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n    };\r\n    Pointer.prototype._onPointerDown = function () {\r\n        this._isDown = true;\r\n    };\r\n    Pointer.prototype._onPointerUp = function () {\r\n        this._isDown = false;\r\n        this.dragTarget = null;\r\n    };\r\n    return Pointer;\r\n}(Class));\r\nexport { Pointer };\r\n//# sourceMappingURL=Pointer.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Class } from './../Class';\r\nimport { GameEvent } from '../Events';\r\n/**\r\n * Enum representing input key codes\r\n */\r\nexport var Keys;\r\n(function (Keys) {\r\n    Keys[Keys[\"Num1\"] = 97] = \"Num1\";\r\n    Keys[Keys[\"Num2\"] = 98] = \"Num2\";\r\n    Keys[Keys[\"Num3\"] = 99] = \"Num3\";\r\n    Keys[Keys[\"Num4\"] = 100] = \"Num4\";\r\n    Keys[Keys[\"Num5\"] = 101] = \"Num5\";\r\n    Keys[Keys[\"Num6\"] = 102] = \"Num6\";\r\n    Keys[Keys[\"Num7\"] = 103] = \"Num7\";\r\n    Keys[Keys[\"Num8\"] = 104] = \"Num8\";\r\n    Keys[Keys[\"Num9\"] = 105] = \"Num9\";\r\n    Keys[Keys[\"Num0\"] = 96] = \"Num0\";\r\n    Keys[Keys[\"Numlock\"] = 144] = \"Numlock\";\r\n    Keys[Keys[\"Semicolon\"] = 186] = \"Semicolon\";\r\n    Keys[Keys[\"A\"] = 65] = \"A\";\r\n    Keys[Keys[\"B\"] = 66] = \"B\";\r\n    Keys[Keys[\"C\"] = 67] = \"C\";\r\n    Keys[Keys[\"D\"] = 68] = \"D\";\r\n    Keys[Keys[\"E\"] = 69] = \"E\";\r\n    Keys[Keys[\"F\"] = 70] = \"F\";\r\n    Keys[Keys[\"G\"] = 71] = \"G\";\r\n    Keys[Keys[\"H\"] = 72] = \"H\";\r\n    Keys[Keys[\"I\"] = 73] = \"I\";\r\n    Keys[Keys[\"J\"] = 74] = \"J\";\r\n    Keys[Keys[\"K\"] = 75] = \"K\";\r\n    Keys[Keys[\"L\"] = 76] = \"L\";\r\n    Keys[Keys[\"M\"] = 77] = \"M\";\r\n    Keys[Keys[\"N\"] = 78] = \"N\";\r\n    Keys[Keys[\"O\"] = 79] = \"O\";\r\n    Keys[Keys[\"P\"] = 80] = \"P\";\r\n    Keys[Keys[\"Q\"] = 81] = \"Q\";\r\n    Keys[Keys[\"R\"] = 82] = \"R\";\r\n    Keys[Keys[\"S\"] = 83] = \"S\";\r\n    Keys[Keys[\"T\"] = 84] = \"T\";\r\n    Keys[Keys[\"U\"] = 85] = \"U\";\r\n    Keys[Keys[\"V\"] = 86] = \"V\";\r\n    Keys[Keys[\"W\"] = 87] = \"W\";\r\n    Keys[Keys[\"X\"] = 88] = \"X\";\r\n    Keys[Keys[\"Y\"] = 89] = \"Y\";\r\n    Keys[Keys[\"Z\"] = 90] = \"Z\";\r\n    Keys[Keys[\"Shift\"] = 16] = \"Shift\";\r\n    Keys[Keys[\"Alt\"] = 18] = \"Alt\";\r\n    Keys[Keys[\"Up\"] = 38] = \"Up\";\r\n    Keys[Keys[\"Down\"] = 40] = \"Down\";\r\n    Keys[Keys[\"Left\"] = 37] = \"Left\";\r\n    Keys[Keys[\"Right\"] = 39] = \"Right\";\r\n    Keys[Keys[\"Space\"] = 32] = \"Space\";\r\n    Keys[Keys[\"Esc\"] = 27] = \"Esc\";\r\n})(Keys || (Keys = {}));\r\n/**\r\n * Event thrown on a game object for a key event\r\n */\r\nvar KeyEvent = /** @class */ (function (_super) {\r\n    __extends(KeyEvent, _super);\r\n    /**\r\n     * @param key  The key responsible for throwing the event\r\n     */\r\n    function KeyEvent(key) {\r\n        var _this = _super.call(this) || this;\r\n        _this.key = key;\r\n        return _this;\r\n    }\r\n    return KeyEvent;\r\n}(GameEvent));\r\nexport { KeyEvent };\r\n/**\r\n * Provides keyboard support for Excalibur.\r\n *\r\n * [[include:Keyboard.md]]\r\n */\r\nvar Keyboard = /** @class */ (function (_super) {\r\n    __extends(Keyboard, _super);\r\n    function Keyboard() {\r\n        var _this = _super.call(this) || this;\r\n        _this._keys = [];\r\n        _this._keysUp = [];\r\n        _this._keysDown = [];\r\n        return _this;\r\n    }\r\n    Keyboard.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Initialize Keyboard event listeners\r\n     */\r\n    Keyboard.prototype.init = function (global) {\r\n        var _this = this;\r\n        global = global || window;\r\n        global.addEventListener('blur', function () {\r\n            _this._keys.length = 0; // empties array efficiently\r\n        });\r\n        // key up is on window because canvas cannot have focus\r\n        global.addEventListener('keyup', function (ev) {\r\n            var code = _this._normalizeKeyCode(ev.keyCode);\r\n            var key = _this._keys.indexOf(code);\r\n            _this._keys.splice(key, 1);\r\n            _this._keysUp.push(code);\r\n            var keyEvent = new KeyEvent(code);\r\n            // alias the old api, we may want to deprecate this in the future\r\n            _this.eventDispatcher.emit('up', keyEvent);\r\n            _this.eventDispatcher.emit('release', keyEvent);\r\n        });\r\n        // key down is on window because canvas cannot have focus\r\n        global.addEventListener('keydown', function (ev) {\r\n            var code = _this._normalizeKeyCode(ev.keyCode);\r\n            if (_this._keys.indexOf(code) === -1) {\r\n                _this._keys.push(code);\r\n                _this._keysDown.push(code);\r\n                var keyEvent = new KeyEvent(code);\r\n                _this.eventDispatcher.emit('down', keyEvent);\r\n                _this.eventDispatcher.emit('press', keyEvent);\r\n            }\r\n        });\r\n    };\r\n    Keyboard.prototype.update = function () {\r\n        // Reset keysDown and keysUp after update is complete\r\n        this._keysDown.length = 0;\r\n        this._keysUp.length = 0;\r\n        // Emit synthetic \"hold\" event\r\n        for (var i = 0; i < this._keys.length; i++) {\r\n            this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\r\n        }\r\n    };\r\n    /**\r\n     * Gets list of keys being pressed down\r\n     */\r\n    Keyboard.prototype.getKeys = function () {\r\n        return this._keys;\r\n    };\r\n    /**\r\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\r\n     * @param key Test whether a key was just pressed\r\n     */\r\n    Keyboard.prototype.wasPressed = function (key) {\r\n        return this._keysDown.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Tests if a certain key is held down. This is persisted between frames.\r\n     * @param key  Test whether a key is held down\r\n     */\r\n    Keyboard.prototype.isHeld = function (key) {\r\n        return this._keys.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\r\n     * @param key  Test whether a key was just released\r\n     */\r\n    Keyboard.prototype.wasReleased = function (key) {\r\n        return this._keysUp.indexOf(key) > -1;\r\n    };\r\n    /**\r\n     * Normalizes some browser event key codes to map to standard Excalibur key codes\r\n     * @param code Event keyCode\r\n     * @see http://unixpapa.com/js/key.html\r\n     */\r\n    Keyboard.prototype._normalizeKeyCode = function (code) {\r\n        switch (code) {\r\n            case 59: // : ; in Firefox, Opera\r\n                return Keys.Semicolon;\r\n            default:\r\n                return code;\r\n        }\r\n    };\r\n    return Keyboard;\r\n}(Class));\r\nexport { Keyboard };\r\n//# sourceMappingURL=Keyboard.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EX_VERSION } from './';\r\nimport { Promise } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { UIActor } from './UIActor';\r\nimport { Actor } from './Actor';\r\nimport { Timer } from './Timer';\r\nimport { TileMap } from './TileMap';\r\nimport { Loader } from './Loader';\r\nimport { Detector } from './Util/Detector';\r\nimport { VisibleEvent, HiddenEvent, GameStartEvent, GameStopEvent, PreUpdateEvent, PostUpdateEvent, PreFrameEvent, PostFrameEvent, DeactivateEvent, ActivateEvent, PreDrawEvent, PostDrawEvent, InitializeEvent } from './Events';\r\nimport { Logger, LogLevel } from './Util/Log';\r\nimport { Color } from './Drawing/Color';\r\nimport { Scene } from './Scene';\r\nimport { Debug } from './Debug';\r\nimport { Class } from './Class';\r\nimport * as Input from './Input/Index';\r\nimport * as Util from './Util/Util';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\n/**\r\n * Enum representing the different display modes available to Excalibur\r\n */\r\nexport var DisplayMode;\r\n(function (DisplayMode) {\r\n    /**\r\n     * Show the game as full screen\r\n     */\r\n    DisplayMode[DisplayMode[\"FullScreen\"] = 0] = \"FullScreen\";\r\n    /**\r\n     * Scale the game to the parent DOM container\r\n     */\r\n    DisplayMode[DisplayMode[\"Container\"] = 1] = \"Container\";\r\n    /**\r\n     * Show the game as a fixed size\r\n     */\r\n    DisplayMode[DisplayMode[\"Fixed\"] = 2] = \"Fixed\";\r\n    /**\r\n     * Allow the game to be positioned with the [[IEngineOptions.position]] option\r\n     */\r\n    DisplayMode[DisplayMode[\"Position\"] = 3] = \"Position\";\r\n})(DisplayMode || (DisplayMode = {}));\r\n/**\r\n * Enum representing the different mousewheel event bubble prevention\r\n */\r\nexport var ScrollPreventionMode;\r\n(function (ScrollPreventionMode) {\r\n    /**\r\n     * Do not prevent any page scrolling\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Prevent page scroll if mouse is over the game canvas\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\r\n    /**\r\n     * Prevent all page scrolling via mouse wheel\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\r\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\r\n/**\r\n * The Excalibur Engine\r\n *\r\n * The [[Engine]] is the main driver for a game. It is responsible for\r\n * starting/stopping the game, maintaining state, transmitting events,\r\n * loading resources, and managing the scene.\r\n *\r\n * [[include:Engine.md]]\r\n */\r\nvar Engine = /** @class */ (function (_super) {\r\n    __extends(Engine, _super);\r\n    /**\r\n     * Creates a new game using the given [[IEngineOptions]]. By default, if no options are provided,\r\n     * the game will be rendered full screen (taking up all available browser window space).\r\n     * You can customize the game rendering through [[IEngineOptions]].\r\n     *\r\n     * Example:\r\n     *\r\n     * ```js\r\n     * var game = new ex.Engine({\r\n     *   width: 0, // the width of the canvas\r\n     *   height: 0, // the height of the canvas\r\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\r\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\r\n     *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\r\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\r\n     * });\r\n     *\r\n     * // call game.start, which is a Promise\r\n     * game.start().then(function () {\r\n     *   // ready, set, go!\r\n     * });\r\n     * ```\r\n     */\r\n    function Engine(options) {\r\n        var _this = _super.call(this) || this;\r\n        _this._hasStarted = false;\r\n        /**\r\n         * Access Excalibur debugging functionality.\r\n         */\r\n        _this.debug = new Debug();\r\n        /**\r\n         * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\r\n         */\r\n        _this.postProcessors = [];\r\n        /**\r\n         * Contains all the scenes currently registered with Excalibur\r\n         */\r\n        _this.scenes = {};\r\n        _this._animations = [];\r\n        /**\r\n         * Indicates whether the engine is set to fullscreen or not\r\n         */\r\n        _this.isFullscreen = false;\r\n        /**\r\n         * Indicates the current [[DisplayMode]] of the engine.\r\n         */\r\n        _this.displayMode = DisplayMode.FullScreen;\r\n        _this._suppressHiDPIScaling = false;\r\n        /**\r\n         * Indicates whether audio should be paused when the game is no longer visible.\r\n         */\r\n        _this.pauseAudioWhenHidden = true;\r\n        /**\r\n         * Indicates whether the engine should draw with debug information\r\n         */\r\n        _this.isDebug = false;\r\n        _this.debugColor = new Color(255, 255, 255);\r\n        /**\r\n         * The action to take when a fatal exception is thrown\r\n         */\r\n        _this.onFatalException = function (e) {\r\n            Logger.getInstance().fatal(e);\r\n        };\r\n        _this._isSmoothingEnabled = true;\r\n        _this._timescale = 1.0;\r\n        _this._isLoading = false;\r\n        _this._isInitialized = false;\r\n        options = Util.extend({}, Engine._DefaultEngineOptions, options);\r\n        // Check compatibility\r\n        var detector = new Detector();\r\n        if (!options.suppressMinimumBrowserFeatureDetection && !(_this._compatible = detector.test())) {\r\n            var message = document.createElement('div');\r\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\r\n            document.body.appendChild(message);\r\n            detector.failedTests.forEach(function (test) {\r\n                var testMessage = document.createElement('div');\r\n                testMessage.innerText = 'Browser feature missing ' + test;\r\n                document.body.appendChild(testMessage);\r\n            });\r\n            if (options.canvasElementId) {\r\n                var canvas = document.getElementById(options.canvasElementId);\r\n                if (canvas) {\r\n                    canvas.parentElement.removeChild(canvas);\r\n                }\r\n            }\r\n            return _this;\r\n        }\r\n        else {\r\n            _this._compatible = true;\r\n        }\r\n        // Use native console API for color fun\r\n        if (console.log && !options.suppressConsoleBootMessage) {\r\n            console.log(\"%cPowered by Excalibur.js (v\" + EX_VERSION + \")\", 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\r\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\r\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\r\n        }\r\n        _this._logger = Logger.getInstance();\r\n        // If debug is enabled, let's log browser features to the console.\r\n        if (_this._logger.defaultLevel === LogLevel.Debug) {\r\n            detector.logBrowserFeatures();\r\n        }\r\n        _this._logger.debug('Building engine...');\r\n        _this.canvasElementId = options.canvasElementId;\r\n        if (options.canvasElementId) {\r\n            _this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\r\n            _this.canvas = document.getElementById(options.canvasElementId);\r\n        }\r\n        else {\r\n            _this._logger.debug('Using generated canvas element');\r\n            _this.canvas = document.createElement('canvas');\r\n        }\r\n        if (options.width && options.height) {\r\n            if (options.displayMode === undefined) {\r\n                _this.displayMode = DisplayMode.Fixed;\r\n            }\r\n            _this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\r\n            _this.canvas.width = options.width;\r\n            _this.canvas.height = options.height;\r\n        }\r\n        else if (!options.displayMode) {\r\n            _this._logger.debug('Engine viewport is fullscreen');\r\n            _this.displayMode = DisplayMode.FullScreen;\r\n        }\r\n        if (options.backgroundColor) {\r\n            _this.backgroundColor = options.backgroundColor.clone();\r\n        }\r\n        _this._loader = new Loader();\r\n        _this._initialize(options);\r\n        _this.rootScene = _this.currentScene = new Scene(_this);\r\n        _this.addScene('root', _this.rootScene);\r\n        _this.goToScene('root');\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Engine.prototype, \"canvasWidth\", {\r\n        /**\r\n         * The width of the game canvas in pixels (physical width component of the\r\n         * resolution of the canvas element)\r\n         */\r\n        get: function () {\r\n            return this.canvas.width;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfCanvasWidth\", {\r\n        /**\r\n         * Returns half width of the game canvas in pixels (half physical width component)\r\n         */\r\n        get: function () {\r\n            return this.canvas.width / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"canvasHeight\", {\r\n        /**\r\n         * The height of the game canvas in pixels, (physical height component of\r\n         * the resolution of the canvas element)\r\n         */\r\n        get: function () {\r\n            return this.canvas.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfCanvasHeight\", {\r\n        /**\r\n         * Returns half height of the game canvas in pixels (half physical height component)\r\n         */\r\n        get: function () {\r\n            return this.canvas.height / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"drawWidth\", {\r\n        /**\r\n         * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            if (this.currentScene && this.currentScene.camera) {\r\n                return this.canvasWidth / this.currentScene.camera.getZoom() / this.pixelRatio;\r\n            }\r\n            return this.canvasWidth / this.pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfDrawWidth\", {\r\n        /**\r\n         * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            return this.drawWidth / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"drawHeight\", {\r\n        /**\r\n         * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            if (this.currentScene && this.currentScene.camera) {\r\n                return this.canvasHeight / this.currentScene.camera.getZoom() / this.pixelRatio;\r\n            }\r\n            return this.canvasHeight / this.pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"halfDrawHeight\", {\r\n        /**\r\n         * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n         */\r\n        get: function () {\r\n            return this.drawHeight / 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"isHiDpi\", {\r\n        /**\r\n         * Returns whether excalibur detects the current screen to be HiDPI\r\n         */\r\n        get: function () {\r\n            return this.pixelRatio !== 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"stats\", {\r\n        /**\r\n         * Access [[stats]] that holds frame statistics.\r\n         */\r\n        get: function () {\r\n            return this.debug.stats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine.prototype, \"pixelRatio\", {\r\n        /**\r\n         * Returns the calculated pixel ration for use in rendering\r\n         */\r\n        get: function () {\r\n            if (this._suppressHiDPIScaling) {\r\n                return 1;\r\n            }\r\n            if (window.devicePixelRatio < 1) {\r\n                return 1;\r\n            }\r\n            var devicePixelRatio = window.devicePixelRatio || 1;\r\n            var pixelRatio = devicePixelRatio;\r\n            return pixelRatio;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Engine.prototype.on = function (eventName, handler) {\r\n        _super.prototype.on.call(this, eventName, handler);\r\n    };\r\n    Engine.prototype.once = function (eventName, handler) {\r\n        _super.prototype.once.call(this, eventName, handler);\r\n    };\r\n    Engine.prototype.off = function (eventName, handler) {\r\n        _super.prototype.off.call(this, eventName, handler);\r\n    };\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     */\r\n    Engine.prototype.getWorldBounds = function () {\r\n        var left = this.screenToWorldCoordinates(Vector.Zero).x;\r\n        var top = this.screenToWorldCoordinates(Vector.Zero).y;\r\n        var right = left + this.drawWidth;\r\n        var bottom = top + this.drawHeight;\r\n        return new BoundingBox(left, top, right, bottom);\r\n    };\r\n    Object.defineProperty(Engine.prototype, \"timescale\", {\r\n        /**\r\n         * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\r\n         */\r\n        get: function () {\r\n            return this._timescale;\r\n        },\r\n        /**\r\n         * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\r\n         * when using time-based movement.\r\n         */\r\n        set: function (value) {\r\n            if (value <= 0) {\r\n                Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\r\n                return;\r\n            }\r\n            this._timescale = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Plays a sprite animation on the screen at the specified `x` and `y`\r\n     * (in game coordinates, not screen pixels). These animations play\r\n     * independent of actors, and will be cleaned up internally as soon\r\n     * as they are complete. Note animations that loop will never be\r\n     * cleaned up.\r\n     *\r\n     * @param animation  Animation to play\r\n     * @param x          x game coordinate to play the animation\r\n     * @param y          y game coordinate to play the animation\r\n     */\r\n    Engine.prototype.playAnimation = function (animation, x, y) {\r\n        this._animations.push(new AnimationNode(animation, x, y));\r\n    };\r\n    /**\r\n     * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\r\n     * will be drawn and updated.\r\n     */\r\n    Engine.prototype.addTileMap = function (tileMap) {\r\n        this.currentScene.addTileMap(tileMap);\r\n    };\r\n    /**\r\n     * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\r\n     */\r\n    Engine.prototype.removeTileMap = function (tileMap) {\r\n        this.currentScene.removeTileMap(tileMap);\r\n    };\r\n    /**\r\n     * Adds a [[Timer]] to the [[currentScene]].\r\n     * @param timer  The timer to add to the [[currentScene]].\r\n     */\r\n    Engine.prototype.addTimer = function (timer) {\r\n        return this.currentScene.addTimer(timer);\r\n    };\r\n    /**\r\n     * Removes a [[Timer]] from the [[currentScene]].\r\n     * @param timer  The timer to remove to the [[currentScene]].\r\n     */\r\n    Engine.prototype.removeTimer = function (timer) {\r\n        return this.currentScene.removeTimer(timer);\r\n    };\r\n    /**\r\n     * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n     * would levels or menus.\r\n     *\r\n     * @param key  The name of the scene, must be unique\r\n     * @param scene The scene to add to the engine\r\n     */\r\n    Engine.prototype.addScene = function (key, scene) {\r\n        if (this.scenes[key]) {\r\n            this._logger.warn('Scene', key, 'already exists overwriting');\r\n        }\r\n        this.scenes[key] = scene;\r\n        scene.engine = this;\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype.removeScene = function (entity) {\r\n        if (entity instanceof Scene) {\r\n            // remove scene\r\n            for (var key in this.scenes) {\r\n                if (this.scenes.hasOwnProperty(key)) {\r\n                    if (this.scenes[key] === entity) {\r\n                        delete this.scenes[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (typeof entity === 'string') {\r\n            // remove scene\r\n            delete this.scenes[entity];\r\n        }\r\n    };\r\n    Engine.prototype.add = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.currentScene.addUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._addChild(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.addTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.addTileMap(entity);\r\n        }\r\n        if (arguments.length === 2) {\r\n            this.addScene(arguments[0], arguments[1]);\r\n        }\r\n    };\r\n    Engine.prototype.remove = function (entity) {\r\n        if (entity instanceof UIActor) {\r\n            this.currentScene.removeUIActor(entity);\r\n            return;\r\n        }\r\n        if (entity instanceof Actor) {\r\n            this._removeChild(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n        if (entity instanceof TileMap) {\r\n            this.removeTileMap(entity);\r\n        }\r\n        if (entity instanceof Scene) {\r\n            this.removeScene(entity);\r\n        }\r\n        if (typeof entity === 'string') {\r\n            this.removeScene(entity);\r\n        }\r\n    };\r\n    /**\r\n     * Adds an actor to the [[currentScene]] of the game. This is synonymous\r\n     * to calling `engine.currentScene.add(actor)`.\r\n     *\r\n     * Actors can only be drawn if they are a member of a scene, and only\r\n     * the [[currentScene]] may be drawn or updated.\r\n     *\r\n     * @param actor  The actor to add to the [[currentScene]]\r\n     */\r\n    Engine.prototype._addChild = function (actor) {\r\n        this.currentScene.add(actor);\r\n    };\r\n    /**\r\n     * Removes an actor from the [[currentScene]] of the game. This is synonymous\r\n     * to calling `engine.currentScene.remove(actor)`.\r\n     * Actors that are removed from a scene will no longer be drawn or updated.\r\n     *\r\n     * @param actor  The actor to remove from the [[currentScene]].\r\n     */\r\n    Engine.prototype._removeChild = function (actor) {\r\n        this.currentScene.remove(actor);\r\n    };\r\n    /**\r\n     * Changes the currently updating and drawing scene to a different,\r\n     * named scene. Calls the [[Scene]] lifecycle events.\r\n     * @param key  The key of the scene to transition to.\r\n     */\r\n    Engine.prototype.goToScene = function (key) {\r\n        if (this.scenes[key]) {\r\n            var oldScene = this.currentScene;\r\n            var newScene = this.scenes[key];\r\n            this._logger.debug('Going to scene:', key);\r\n            // only deactivate when initialized\r\n            if (this.currentScene.isInitialized) {\r\n                this.currentScene._deactivate.call(this.currentScene, [oldScene, newScene]);\r\n                this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\r\n            }\r\n            // set current scene to new one\r\n            this.currentScene = newScene;\r\n            // initialize the current scene if has not been already\r\n            this.currentScene._initialize(this);\r\n            this.currentScene._activate.call(this.currentScene, [oldScene, newScene]);\r\n            this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\r\n        }\r\n        else {\r\n            this._logger.error('Scene', key, 'does not exist!');\r\n        }\r\n    };\r\n    /**\r\n     * Transforms the current x, y from screen coordinates to world coordinates\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    Engine.prototype.screenToWorldCoordinates = function (point) {\r\n        var newX = point.x;\r\n        var newY = point.y;\r\n        // transform back to world space\r\n        newX = (newX / this.canvas.clientWidth) * this.drawWidth;\r\n        newY = (newY / this.canvas.clientHeight) * this.drawHeight;\r\n        // transform based on zoom\r\n        newX = newX - this.halfDrawWidth;\r\n        newY = newY - this.halfDrawHeight;\r\n        // shift by focus\r\n        if (this.currentScene && this.currentScene.camera) {\r\n            var focus = this.currentScene.camera.getFocus();\r\n            newX += focus.x;\r\n            newY += focus.y;\r\n        }\r\n        return new Vector(Math.floor(newX), Math.floor(newY));\r\n    };\r\n    /**\r\n     * Transforms a world coordinate, to a screen coordinate\r\n     * @param point  World coordinate to convert\r\n     */\r\n    Engine.prototype.worldToScreenCoordinates = function (point) {\r\n        var screenX = point.x;\r\n        var screenY = point.y;\r\n        // shift by focus\r\n        if (this.currentScene && this.currentScene.camera) {\r\n            var focus = this.currentScene.camera.getFocus();\r\n            screenX -= focus.x;\r\n            screenY -= focus.y;\r\n        }\r\n        // transform back on zoom\r\n        screenX = screenX + this.halfDrawWidth;\r\n        screenY = screenY + this.halfDrawHeight;\r\n        // transform back to screen space\r\n        screenX = (screenX * this.canvas.clientWidth) / this.drawWidth;\r\n        screenY = (screenY * this.canvas.clientHeight) / this.drawHeight;\r\n        return new Vector(Math.floor(screenX), Math.floor(screenY));\r\n    };\r\n    /**\r\n     * Sets the internal canvas height based on the selected display mode.\r\n     */\r\n    Engine.prototype._setHeightByDisplayMode = function (parent) {\r\n        if (this.displayMode === DisplayMode.Container) {\r\n            this.canvas.width = parent.clientWidth;\r\n            this.canvas.height = parent.clientHeight;\r\n        }\r\n        if (this.displayMode === DisplayMode.FullScreen) {\r\n            document.body.style.margin = '0px';\r\n            document.body.style.overflow = 'hidden';\r\n            this.canvas.width = parent.innerWidth;\r\n            this.canvas.height = parent.innerHeight;\r\n        }\r\n    };\r\n    /**\r\n     * Initializes the internal canvas, rendering context, displaymode, and native event listeners\r\n     */\r\n    Engine.prototype._initialize = function (options) {\r\n        var _this = this;\r\n        if (options.displayMode) {\r\n            this.displayMode = options.displayMode;\r\n        }\r\n        if (this.displayMode === DisplayMode.FullScreen || this.displayMode === DisplayMode.Container) {\r\n            var parent = (this.displayMode === DisplayMode.Container ? (this.canvas.parentElement || document.body) : window);\r\n            this._setHeightByDisplayMode(parent);\r\n            window.addEventListener('resize', function () {\r\n                _this._logger.debug('View port resized');\r\n                _this._setHeightByDisplayMode(parent);\r\n                _this._logger.info('parent.clientHeight ' + parent.clientHeight);\r\n                _this.setAntialiasing(_this._isSmoothingEnabled);\r\n            });\r\n        }\r\n        else if (this.displayMode === DisplayMode.Position) {\r\n            this._intializeDisplayModePosition(options);\r\n        }\r\n        // initialize inputs\r\n        this.input = {\r\n            keyboard: new Input.Keyboard(),\r\n            pointers: new Input.Pointers(this),\r\n            gamepads: new Input.Gamepads()\r\n        };\r\n        this.input.keyboard.init();\r\n        this.input.pointers.init(options && options.pointerScope === Input.PointerScope.Document ? document : this.canvas);\r\n        this.input.gamepads.init();\r\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\r\n        // Issue #385 make use of the visibility api\r\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n        var hidden, visibilityChange;\r\n        if (typeof document.hidden !== 'undefined') {\r\n            // Opera 12.10 and Firefox 18 and later support\r\n            hidden = 'hidden';\r\n            visibilityChange = 'visibilitychange';\r\n        }\r\n        else if ('msHidden' in document) {\r\n            hidden = 'msHidden';\r\n            visibilityChange = 'msvisibilitychange';\r\n        }\r\n        else if ('webkitHidden' in document) {\r\n            hidden = 'webkitHidden';\r\n            visibilityChange = 'webkitvisibilitychange';\r\n        }\r\n        document.addEventListener(visibilityChange, function () {\r\n            if (document[hidden]) {\r\n                _this.eventDispatcher.emit('hidden', new HiddenEvent(_this));\r\n                _this._logger.debug('Window hidden');\r\n            }\r\n            else {\r\n                _this.eventDispatcher.emit('visible', new VisibleEvent(_this));\r\n                _this._logger.debug('Window visible');\r\n            }\r\n        });\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this._suppressHiDPIScaling = !!options.suppressHiDPIScaling;\r\n        if (!options.suppressHiDPIScaling) {\r\n            this._initializeHiDpi();\r\n        }\r\n        if (!this.canvasElementId) {\r\n            document.body.appendChild(this.canvas);\r\n        }\r\n    };\r\n    Engine.prototype.onInitialize = function (_engine) {\r\n        // Override me\r\n    };\r\n    Engine.prototype._intializeDisplayModePosition = function (options) {\r\n        if (!options.position) {\r\n            throw new Error('DisplayMode of Position was selected but no position option was given');\r\n        }\r\n        else {\r\n            this.canvas.style.display = 'block';\r\n            this.canvas.style.position = 'absolute';\r\n            if (typeof options.position === 'string') {\r\n                var specifiedPosition = options.position.split(' ');\r\n                switch (specifiedPosition[0]) {\r\n                    case 'top':\r\n                        this.canvas.style.top = '0px';\r\n                        break;\r\n                    case 'bottom':\r\n                        this.canvas.style.bottom = '0px';\r\n                        break;\r\n                    case 'middle':\r\n                        this.canvas.style.top = '50%';\r\n                        var offsetY = -this.halfDrawHeight;\r\n                        this.canvas.style.marginTop = offsetY.toString();\r\n                        break;\r\n                    default:\r\n                        throw new Error('Invalid Position Given');\r\n                }\r\n                if (specifiedPosition[1]) {\r\n                    switch (specifiedPosition[1]) {\r\n                        case 'left':\r\n                            this.canvas.style.left = '0px';\r\n                            break;\r\n                        case 'right':\r\n                            this.canvas.style.right = '0px';\r\n                            break;\r\n                        case 'center':\r\n                            this.canvas.style.left = '50%';\r\n                            var offsetX = -this.halfDrawWidth;\r\n                            this.canvas.style.marginLeft = offsetX.toString();\r\n                            break;\r\n                        default:\r\n                            throw new Error('Invalid Position Given');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (options.position.top) {\r\n                    typeof options.position.top === 'number'\r\n                        ? (this.canvas.style.top = options.position.top.toString() + 'px')\r\n                        : (this.canvas.style.top = options.position.top);\r\n                }\r\n                if (options.position.right) {\r\n                    typeof options.position.right === 'number'\r\n                        ? (this.canvas.style.right = options.position.right.toString() + 'px')\r\n                        : (this.canvas.style.right = options.position.right);\r\n                }\r\n                if (options.position.bottom) {\r\n                    typeof options.position.bottom === 'number'\r\n                        ? (this.canvas.style.bottom = options.position.bottom.toString() + 'px')\r\n                        : (this.canvas.style.bottom = options.position.bottom);\r\n                }\r\n                if (options.position.left) {\r\n                    typeof options.position.left === 'number'\r\n                        ? (this.canvas.style.left = options.position.left.toString() + 'px')\r\n                        : (this.canvas.style.left = options.position.left);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Engine.prototype._initializeHiDpi = function () {\r\n        // Scale the canvas if needed\r\n        if (this.isHiDpi) {\r\n            var oldWidth = this.canvas.width;\r\n            var oldHeight = this.canvas.height;\r\n            this.canvas.width = oldWidth * this.pixelRatio;\r\n            this.canvas.height = oldHeight * this.pixelRatio;\r\n            this.canvas.style.width = oldWidth + 'px';\r\n            this.canvas.style.height = oldHeight + 'px';\r\n            this._logger.warn(\"Hi DPI screen detected, resetting canvas resolution from \\n                           \" + oldWidth + \"x\" + oldHeight + \" to \" + this.canvas.width + \"x\" + this.canvas.height + \" \\n                           css size will remain \" + oldWidth + \"x\" + oldHeight);\r\n            this.ctx.scale(this.pixelRatio, this.pixelRatio);\r\n            this._logger.warn(\"Canvas drawing context was scaled by \" + this.pixelRatio);\r\n        }\r\n    };\r\n    /**\r\n     * If supported by the browser, this will set the antialiasing flag on the\r\n     * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\r\n     * image resources.\r\n     * @param isSmooth  Set smoothing to true or false\r\n     */\r\n    Engine.prototype.setAntialiasing = function (isSmooth) {\r\n        this._isSmoothingEnabled = isSmooth;\r\n        var ctx = this.ctx;\r\n        ctx.imageSmoothingEnabled = isSmooth;\r\n        for (var _i = 0, _a = ['webkitImageSmoothingEnabled', 'mozImageSmoothingEnabled', 'msImageSmoothingEnabled']; _i < _a.length; _i++) {\r\n            var smoothing = _a[_i];\r\n            if (smoothing in ctx) {\r\n                ctx[smoothing] = isSmooth;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Return the current smoothing status of the canvas\r\n     */\r\n    Engine.prototype.getAntialiasing = function () {\r\n        return (this.ctx.imageSmoothingEnabled ||\r\n            this.ctx.webkitImageSmoothingEnabled ||\r\n            this.ctx.mozImageSmoothingEnabled ||\r\n            this.ctx.msImageSmoothingEnabled);\r\n    };\r\n    Object.defineProperty(Engine.prototype, \"isInitialized\", {\r\n        /**\r\n         * Gets whether the actor is Initialized\r\n         */\r\n        get: function () {\r\n            return this._isInitialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Engine.prototype._overrideInitialize = function (engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            _super.prototype.emit.call(this, 'initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    };\r\n    /**\r\n     * Updates the entire state of the game\r\n     * @param delta  Number of milliseconds elapsed since the last update.\r\n     */\r\n    Engine.prototype._update = function (delta) {\r\n        if (this._isLoading) {\r\n            // suspend updates untill loading is finished\r\n            this._loader.update(this, delta);\r\n            // Update input listeners\r\n            this.input.keyboard.update();\r\n            this.input.pointers.update();\r\n            this.input.gamepads.update();\r\n            return;\r\n        }\r\n        this._overrideInitialize(this);\r\n        // Publish preupdate events\r\n        this._preupdate(delta);\r\n        // process engine level events\r\n        this.currentScene.update(this, delta);\r\n        // update animations\r\n        this._animations = this._animations.filter(function (a) {\r\n            return !a.animation.isDone();\r\n        });\r\n        // Update input listeners\r\n        this.input.keyboard.update();\r\n        this.input.pointers.update();\r\n        this.input.gamepads.update();\r\n        // Publish update event\r\n        this._postupdate(delta);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._preupdate = function (delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(this, delta, this));\r\n        this.onPreUpdate(this, delta);\r\n    };\r\n    Engine.prototype.onPreUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._postupdate = function (delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(this, delta, this));\r\n        this.onPostUpdate(this, delta);\r\n    };\r\n    Engine.prototype.onPostUpdate = function (_engine, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Draws the entire game\r\n     * @param delta  Number of milliseconds elapsed since the last draw.\r\n     */\r\n    Engine.prototype._draw = function (delta) {\r\n        var ctx = this.ctx;\r\n        this._predraw(ctx, delta);\r\n        if (this._isLoading) {\r\n            this._loader.draw(ctx, delta);\r\n            // Drawing nothing else while loading\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n        ctx.fillStyle = this.backgroundColor.toString();\r\n        ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n        this.currentScene.draw(this.ctx, delta);\r\n        // todo needs to be a better way of doing this\r\n        var a = 0, len = this._animations.length;\r\n        for (a; a < len; a++) {\r\n            this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\r\n        }\r\n        // Draw debug information\r\n        if (this.isDebug) {\r\n            this.ctx.font = 'Consolas';\r\n            this.ctx.fillStyle = this.debugColor.toString();\r\n            var keys = this.input.keyboard.getKeys();\r\n            for (var j = 0; j < keys.length; j++) {\r\n                this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\r\n            }\r\n            this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\r\n        }\r\n        // Post processing\r\n        for (var i = 0; i < this.postProcessors.length; i++) {\r\n            this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._predraw = function (_ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\r\n        this.onPreDraw(_ctx, delta);\r\n    };\r\n    Engine.prototype.onPreDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * @internal\r\n     */\r\n    Engine.prototype._postdraw = function (_ctx, delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\r\n        this.onPostDraw(_ctx, delta);\r\n    };\r\n    Engine.prototype.onPostDraw = function (_ctx, _delta) {\r\n        // Override me\r\n    };\r\n    /**\r\n     * Starts the internal game loop for Excalibur after loading\r\n     * any provided assets.\r\n     * @param loader  Optional [[ILoader]] to use to load resources. The default loader is [[Loader]], override to provide your own\r\n     * custom loader.\r\n     */\r\n    Engine.prototype.start = function (loader) {\r\n        var _this = this;\r\n        if (!this._compatible) {\r\n            var promise = new Promise();\r\n            return promise.reject('Excalibur is incompatible with your browser');\r\n        }\r\n        var loadingComplete;\r\n        if (loader) {\r\n            this._loader = loader;\r\n            this._loader.wireEngine(this);\r\n            loadingComplete = this.load(this._loader);\r\n        }\r\n        else {\r\n            loadingComplete = Promise.resolve();\r\n        }\r\n        loadingComplete.then(function () {\r\n            _this.emit('start', new GameStartEvent(_this));\r\n        });\r\n        if (!this._hasStarted) {\r\n            this._hasStarted = true;\r\n            this._logger.debug('Starting game...');\r\n            Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\r\n            this._logger.debug('Game started');\r\n        }\r\n        else {\r\n            // Game already started;\r\n        }\r\n        return loadingComplete;\r\n    };\r\n    Engine.createMainLoop = function (game, raf, nowFn) {\r\n        var lastTime = nowFn();\r\n        return function mainloop() {\r\n            if (!game._hasStarted) {\r\n                return;\r\n            }\r\n            try {\r\n                game._requestId = raf(mainloop);\r\n                game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\r\n                // Get the time to calculate time-elapsed\r\n                var now = nowFn();\r\n                var elapsed = Math.floor(now - lastTime) || 1;\r\n                // Resolves issue #138 if the game has been paused, or blurred for\r\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\r\n                // and provides more expected behavior when the engine comes back\r\n                // into focus\r\n                if (elapsed > 200) {\r\n                    elapsed = 1;\r\n                }\r\n                var delta = elapsed * game.timescale;\r\n                // reset frame stats (reuse existing instances)\r\n                var frameId = game.stats.prevFrame.id + 1;\r\n                game.stats.prevFrame.reset(game.stats.currFrame);\r\n                game.stats.currFrame.reset();\r\n                game.stats.currFrame.id = frameId;\r\n                game.stats.currFrame.delta = delta;\r\n                game.stats.currFrame.fps = 1.0 / (delta / 1000);\r\n                var beforeUpdate = nowFn();\r\n                game._update(delta);\r\n                var afterUpdate = nowFn();\r\n                game._draw(delta);\r\n                var afterDraw = nowFn();\r\n                game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n                game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n                lastTime = now;\r\n                game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\r\n            }\r\n            catch (e) {\r\n                window.cancelAnimationFrame(game._requestId);\r\n                game.stop();\r\n                game.onFatalException(e);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Stops Excalibur's main loop, useful for pausing the game.\r\n     */\r\n    Engine.prototype.stop = function () {\r\n        if (this._hasStarted) {\r\n            this.emit('stop', new GameStopEvent(this));\r\n            this._hasStarted = false;\r\n            this._logger.debug('Game stopped');\r\n        }\r\n    };\r\n    /**\r\n     * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\r\n     */\r\n    Engine.prototype.isPaused = function () {\r\n        return !this._hasStarted;\r\n    };\r\n    /**\r\n     * Takes a screen shot of the current viewport and returns it as an\r\n     * HTML Image Element.\r\n     */\r\n    Engine.prototype.screenshot = function () {\r\n        var result = new Image();\r\n        var raw = this.canvas.toDataURL('image/png');\r\n        result.src = raw;\r\n        return result;\r\n    };\r\n    /**\r\n     * Another option available to you to load resources into the game.\r\n     * Immediately after calling this the game will pause and the loading screen\r\n     * will appear.\r\n     * @param loader  Some [[ILoadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\r\n     */\r\n    Engine.prototype.load = function (loader) {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        this._isLoading = true;\r\n        loader.load().then(function () {\r\n            setTimeout(function () {\r\n                _this._isLoading = false;\r\n                complete.resolve();\r\n            }, 500);\r\n        });\r\n        return complete;\r\n    };\r\n    /**\r\n     * Default [[IEngineOptions]]\r\n     */\r\n    Engine._DefaultEngineOptions = {\r\n        width: 0,\r\n        height: 0,\r\n        canvasElementId: '',\r\n        pointerScope: Input.PointerScope.Document,\r\n        suppressConsoleBootMessage: null,\r\n        suppressMinimumBrowserFeatureDetection: null,\r\n        suppressHiDPIScaling: null,\r\n        scrollPreventionMode: ScrollPreventionMode.Canvas,\r\n        backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\r\n    };\r\n    return Engine;\r\n}(Class));\r\nexport { Engine };\r\n/**\r\n * @internal\r\n */\r\nvar AnimationNode = /** @class */ (function () {\r\n    function AnimationNode(animation, x, y) {\r\n        this.animation = animation;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    return AnimationNode;\r\n}());\r\n//# sourceMappingURL=Engine.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Color } from './Drawing/Color';\r\nimport { Vector } from './Algebra';\r\nimport * as Util from './Util/Util';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\nimport * as Traits from './Traits/Index';\r\nimport { Configurable } from './Configurable';\r\nimport { Random } from './Math/Random';\r\n/**\r\n * An enum that represents the types of emitter nozzles\r\n */\r\nexport var EmitterType;\r\n(function (EmitterType) {\r\n    /**\r\n     * Constant for the circular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Circle\"] = 0] = \"Circle\";\r\n    /**\r\n     * Constant for the rectangular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Rectangle\"] = 1] = \"Rectangle\";\r\n})(EmitterType || (EmitterType = {}));\r\n/**\r\n * @hidden\r\n */\r\nvar ParticleImpl = /** @class */ (function () {\r\n    function ParticleImpl(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        this.position = new Vector(0, 0);\r\n        this.velocity = new Vector(0, 0);\r\n        this.acceleration = new Vector(0, 0);\r\n        this.particleRotationalVelocity = 0;\r\n        this.currentRotation = 0;\r\n        this.focus = null;\r\n        this.focusAccel = 0;\r\n        this.opacity = 1;\r\n        this.beginColor = Color.White.clone();\r\n        this.endColor = Color.White.clone();\r\n        // Life is counted in ms\r\n        this.life = 300;\r\n        this.fadeFlag = false;\r\n        // Color transitions\r\n        this._rRate = 1;\r\n        this._gRate = 1;\r\n        this._bRate = 1;\r\n        this._aRate = 0;\r\n        this._currentColor = Color.White.clone();\r\n        this.emitter = null;\r\n        this.particleSize = 5;\r\n        this.particleSprite = null;\r\n        this.sizeRate = 0;\r\n        this.elapsedMultiplier = 0;\r\n        var emitter = emitterOrConfig;\r\n        if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\r\n            var config = emitterOrConfig;\r\n            emitter = config.emitter;\r\n            life = config.life;\r\n            opacity = config.opacity;\r\n            endColor = config.endColor;\r\n            beginColor = config.beginColor;\r\n            position = config.position;\r\n            velocity = config.velocity;\r\n            acceleration = config.acceleration;\r\n            startSize = config.startSize;\r\n            endSize = config.endSize;\r\n        }\r\n        this.emitter = emitter;\r\n        this.life = life || this.life;\r\n        this.opacity = opacity || this.opacity;\r\n        this.endColor = endColor || this.endColor.clone();\r\n        this.beginColor = beginColor || this.beginColor.clone();\r\n        this._currentColor = this.beginColor.clone();\r\n        this.position = position || this.position;\r\n        this.velocity = velocity || this.velocity;\r\n        this.acceleration = acceleration || this.acceleration;\r\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\r\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\r\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\r\n        this._aRate = this.opacity / this.life;\r\n        this.startSize = startSize || 0;\r\n        this.endSize = endSize || 0;\r\n        if (this.endSize > 0 && this.startSize > 0) {\r\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\r\n            this.particleSize = this.startSize;\r\n        }\r\n    }\r\n    ParticleImpl.prototype.kill = function () {\r\n        this.emitter.removeParticle(this);\r\n    };\r\n    ParticleImpl.prototype.update = function (delta) {\r\n        this.life = this.life - delta;\r\n        this.elapsedMultiplier = this.elapsedMultiplier + delta;\r\n        if (this.life < 0) {\r\n            this.kill();\r\n        }\r\n        if (this.fadeFlag) {\r\n            this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\r\n        }\r\n        if (this.startSize > 0 && this.endSize > 0) {\r\n            this.particleSize = Util.clamp(this.sizeRate * delta + this.particleSize, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\r\n        }\r\n        this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\r\n        this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\r\n        this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\r\n        this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n        if (this.focus) {\r\n            var accel = this.focus\r\n                .sub(this.position)\r\n                .normalize()\r\n                .scale(this.focusAccel)\r\n                .scale(delta / 1000);\r\n            this.velocity = this.velocity.add(accel);\r\n        }\r\n        else {\r\n            this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\r\n        }\r\n        this.position = this.position.add(this.velocity.scale(delta / 1000));\r\n        if (this.particleRotationalVelocity) {\r\n            this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\r\n        }\r\n    };\r\n    ParticleImpl.prototype.draw = function (ctx) {\r\n        if (this.particleSprite) {\r\n            this.particleSprite.rotation = this.currentRotation;\r\n            this.particleSprite.scale.setTo(this.particleSize, this.particleSize);\r\n            this.particleSprite.draw(ctx, this.position.x, this.position.y);\r\n            return;\r\n        }\r\n        this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n        ctx.fillStyle = this._currentColor.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this.position.x, this.position.y, this.particleSize, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    };\r\n    return ParticleImpl;\r\n}());\r\nexport { ParticleImpl };\r\n/**\r\n * Particle is used in a [[ParticleEmitter]]\r\n */\r\nvar Particle = /** @class */ (function (_super) {\r\n    __extends(Particle, _super);\r\n    function Particle(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        return _super.call(this, emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) || this;\r\n    }\r\n    return Particle;\r\n}(Configurable(ParticleImpl)));\r\nexport { Particle };\r\n/**\r\n * @hidden\r\n */\r\nvar ParticleEmitterImpl = /** @class */ (function (_super) {\r\n    __extends(ParticleEmitterImpl, _super);\r\n    /**\r\n     * @param x       The x position of the emitter\r\n     * @param y       The y position of the emitter\r\n     * @param width   The width of the emitter\r\n     * @param height  The height of the emitter\r\n     */\r\n    function ParticleEmitterImpl(xOrConfig, y, width, height) {\r\n        var _this = _super.call(this, typeof xOrConfig === 'number' ? { x: xOrConfig, y: y, width: width, height: height } : xOrConfig) || this;\r\n        _this.numParticles = 0;\r\n        /**\r\n         * Gets or sets the isEmitting flag\r\n         */\r\n        _this.isEmitting = true;\r\n        /**\r\n         * Gets or sets the backing particle collection\r\n         */\r\n        _this.particles = null;\r\n        /**\r\n         * Gets or sets the backing deadParticle collection\r\n         */\r\n        _this.deadParticles = null;\r\n        /**\r\n         * Gets or sets the minimum particle velocity\r\n         */\r\n        _this.minVel = 0;\r\n        /**\r\n         * Gets or sets the maximum particle velocity\r\n         */\r\n        _this.maxVel = 0;\r\n        /**\r\n         * Gets or sets the acceleration vector for all particles\r\n         */\r\n        _this.acceleration = new Vector(0, 0);\r\n        /**\r\n         * Gets or sets the minimum angle in radians\r\n         */\r\n        _this.minAngle = 0;\r\n        /**\r\n         * Gets or sets the maximum angle in radians\r\n         */\r\n        _this.maxAngle = 0;\r\n        /**\r\n         * Gets or sets the emission rate for particles (particles/sec)\r\n         */\r\n        _this.emitRate = 1; //particles/sec\r\n        /**\r\n         * Gets or sets the life of each particle in milliseconds\r\n         */\r\n        _this.particleLife = 2000;\r\n        /**\r\n         * Gets or sets the opacity of each particle from 0 to 1.0\r\n         */\r\n        _this.opacity = 1;\r\n        /**\r\n         * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\r\n         */\r\n        _this.fadeFlag = false;\r\n        /**\r\n         * Gets or sets the optional focus where all particles should accelerate towards\r\n         */\r\n        _this.focus = null;\r\n        /**\r\n         * Gets or sets the acceleration for focusing particles if a focus has been specified\r\n         */\r\n        _this.focusAccel = 1;\r\n        /*\r\n          * Gets or sets the optional starting size for the particles\r\n          */\r\n        _this.startSize = null;\r\n        /*\r\n          * Gets or sets the optional ending size for the particles\r\n          */\r\n        _this.endSize = null;\r\n        /**\r\n         * Gets or sets the minimum size of all particles\r\n         */\r\n        _this.minSize = 5;\r\n        /**\r\n         * Gets or sets the maximum size of all particles\r\n         */\r\n        _this.maxSize = 5;\r\n        /**\r\n         * Gets or sets the beginning color of all particles\r\n         */\r\n        _this.beginColor = Color.White.clone();\r\n        /**\r\n         * Gets or sets the ending color of all particles\r\n         */\r\n        _this.endColor = Color.White.clone();\r\n        /**\r\n         * Gets or sets the sprite that a particle should use\r\n         * @warning Performance intensive\r\n         */\r\n        _this.particleSprite = null;\r\n        /**\r\n         * Gets or sets the emitter type for the particle emitter\r\n         */\r\n        _this.emitterType = EmitterType.Rectangle;\r\n        /**\r\n         * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\r\n         */\r\n        _this.radius = 0;\r\n        /**\r\n         * Gets or sets the particle rotational speed velocity\r\n         */\r\n        _this.particleRotationalVelocity = 0;\r\n        /**\r\n         * Indicates whether particles should start with a random rotation\r\n         */\r\n        _this.randomRotation = false;\r\n        _this._particlesToEmit = 0;\r\n        _this.collisionType = CollisionType.PreventCollision;\r\n        _this.particles = new Util.Collection();\r\n        _this.deadParticles = new Util.Collection();\r\n        _this.random = new Random();\r\n        // Remove offscreen culling from particle emitters\r\n        for (var i = 0; i < _this.traits.length; i++) {\r\n            if (_this.traits[i] instanceof Traits.OffscreenCulling) {\r\n                _this.traits.splice(i, 1);\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    ParticleEmitterImpl.prototype.removeParticle = function (particle) {\r\n        this.deadParticles.push(particle);\r\n    };\r\n    /**\r\n     * Causes the emitter to emit particles\r\n     * @param particleCount  Number of particles to emit right now\r\n     */\r\n    ParticleEmitterImpl.prototype.emitParticles = function (particleCount) {\r\n        for (var i = 0; i < particleCount; i++) {\r\n            this.particles.push(this._createParticle());\r\n        }\r\n    };\r\n    ParticleEmitterImpl.prototype.clearParticles = function () {\r\n        this.particles.clear();\r\n    };\r\n    // Creates a new particle given the constraints of the emitter\r\n    ParticleEmitterImpl.prototype._createParticle = function () {\r\n        // todo implement emitter constraints;\r\n        var ranX = 0;\r\n        var ranY = 0;\r\n        var angle = Util.randomInRange(this.minAngle, this.maxAngle, this.random);\r\n        var vel = Util.randomInRange(this.minVel, this.maxVel, this.random);\r\n        var size = this.startSize || Util.randomInRange(this.minSize, this.maxSize, this.random);\r\n        var dx = vel * Math.cos(angle);\r\n        var dy = vel * Math.sin(angle);\r\n        if (this.emitterType === EmitterType.Rectangle) {\r\n            ranX = Util.randomInRange(this.pos.x, this.pos.x + this.getWidth(), this.random);\r\n            ranY = Util.randomInRange(this.pos.y, this.pos.y + this.getHeight(), this.random);\r\n        }\r\n        else if (this.emitterType === EmitterType.Circle) {\r\n            var radius = Util.randomInRange(0, this.radius, this.random);\r\n            ranX = radius * Math.cos(angle) + this.pos.x;\r\n            ranY = radius * Math.sin(angle) + this.pos.y;\r\n        }\r\n        var p = new Particle(this, this.particleLife, this.opacity, this.beginColor, this.endColor, new Vector(ranX, ranY), new Vector(dx, dy), this.acceleration, this.startSize, this.endSize);\r\n        p.fadeFlag = this.fadeFlag;\r\n        p.particleSize = size;\r\n        if (this.particleSprite) {\r\n            p.particleSprite = this.particleSprite;\r\n        }\r\n        p.particleRotationalVelocity = this.particleRotationalVelocity;\r\n        if (this.randomRotation) {\r\n            p.currentRotation = Util.randomInRange(0, Math.PI * 2, this.random);\r\n        }\r\n        if (this.focus) {\r\n            p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\r\n            p.focusAccel = this.focusAccel;\r\n        }\r\n        return p;\r\n    };\r\n    ParticleEmitterImpl.prototype.update = function (engine, delta) {\r\n        var _this = this;\r\n        _super.prototype.update.call(this, engine, delta);\r\n        if (this.isEmitting) {\r\n            this._particlesToEmit += this.emitRate * (delta / 1000);\r\n            //var numParticles = Math.ceil(this.emitRate * delta / 1000);\r\n            if (this._particlesToEmit > 1.0) {\r\n                this.emitParticles(Math.floor(this._particlesToEmit));\r\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\r\n            }\r\n        }\r\n        this.particles.forEach(function (p) { return p.update(delta); });\r\n        this.deadParticles.forEach(function (p) { return _this.particles.removeElement(p); });\r\n        this.deadParticles.clear();\r\n    };\r\n    ParticleEmitterImpl.prototype.draw = function (ctx) {\r\n        // todo is there a more efficient to draw\r\n        // possibly use a webgl offscreen canvas and shaders to do particles?\r\n        this.particles.forEach(function (p) { return p.draw(ctx); });\r\n    };\r\n    ParticleEmitterImpl.prototype.debugDraw = function (ctx) {\r\n        _super.prototype.debugDraw.call(this, ctx);\r\n        ctx.fillStyle = Color.Black.toString();\r\n        ctx.fillText('Particles: ' + this.particles.count(), this.pos.x, this.pos.y + 20);\r\n        if (this.focus) {\r\n            ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\r\n            DrawUtil.line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, _super.prototype.getCenter.call(this).x, _super.prototype.getCenter.call(this).y);\r\n            ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\r\n        }\r\n    };\r\n    return ParticleEmitterImpl;\r\n}(Actor));\r\nexport { ParticleEmitterImpl };\r\n/**\r\n * Using a particle emitter is a great way to create interesting effects\r\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\r\n * extend [[Actor]] allowing you to use all of the features that come with.\r\n *\r\n * [[include:Particles.md]]\r\n */\r\nvar ParticleEmitter = /** @class */ (function (_super) {\r\n    __extends(ParticleEmitter, _super);\r\n    function ParticleEmitter(xOrConfig, y, width, height) {\r\n        return _super.call(this, xOrConfig, y, width, height) || this;\r\n    }\r\n    return ParticleEmitter;\r\n}(Configurable(ParticleEmitterImpl)));\r\nexport { ParticleEmitter };\r\n//# sourceMappingURL=Particles.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { GameEvent } from '../Events';\r\nvar MediaEvent = /** @class */ (function (_super) {\r\n    __extends(MediaEvent, _super);\r\n    function MediaEvent(target, _name) {\r\n        if (_name === void 0) { _name = 'MediaEvent'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.target = target;\r\n        _this._name = _name;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MediaEvent.prototype, \"bubbles\", {\r\n        /**\r\n         * Media event cannot bubble\r\n         */\r\n        get: function () {\r\n            return false;\r\n        },\r\n        /**\r\n         * Media event cannot bubble\r\n         */\r\n        set: function (_value) {\r\n            // stubbed\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MediaEvent.prototype, \"_path\", {\r\n        /**\r\n         * Media event cannot bubble, so they have no path\r\n         */\r\n        get: function () {\r\n            return null;\r\n        },\r\n        /**\r\n         * Media event cannot bubble, so they have no path\r\n         */\r\n        set: function (_val) {\r\n            // stubbed\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    MediaEvent.prototype.stopPropagation = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    MediaEvent.prototype.action = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    MediaEvent.prototype.propagate = function () {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    MediaEvent.prototype.layPath = function (_actor) {\r\n        /**\r\n         * Stub\r\n         */\r\n    };\r\n    return MediaEvent;\r\n}(GameEvent));\r\nexport { MediaEvent };\r\nvar NativeSoundEvent = /** @class */ (function (_super) {\r\n    __extends(NativeSoundEvent, _super);\r\n    function NativeSoundEvent(target, track) {\r\n        var _this = _super.call(this, target, 'NativeSoundEvent') || this;\r\n        _this.track = track;\r\n        return _this;\r\n    }\r\n    return NativeSoundEvent;\r\n}(MediaEvent));\r\nexport { NativeSoundEvent };\r\n//# sourceMappingURL=MediaEvents.js.map","import { Physics } from './../Physics';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { Pair } from './Pair';\r\nimport { CollisionType } from './../Actor';\r\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\r\nvar NaiveCollisionBroadphase = /** @class */ (function () {\r\n    function NaiveCollisionBroadphase() {\r\n        this._lastFramePairs = [];\r\n        this._lastFramePairsHash = {};\r\n    }\r\n    NaiveCollisionBroadphase.prototype.track = function () {\r\n        // pass\r\n    };\r\n    NaiveCollisionBroadphase.prototype.untrack = function () {\r\n        // pass\r\n    };\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n     */\r\n    NaiveCollisionBroadphase.prototype.broadphase = function (targets) {\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        var potentialColliders = targets.filter(function (other) {\r\n            return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        var actor1;\r\n        var actor2;\r\n        var collisionPairs = [];\r\n        for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n            actor1 = potentialColliders[j];\r\n            for (var i = j + 1; i < l; i++) {\r\n                actor2 = potentialColliders[i];\r\n                var minimumTranslationVector;\r\n                if ((minimumTranslationVector = actor1.collides(actor2))) {\r\n                    var pair = new Pair(actor1.body, actor2.body);\r\n                    pair.collision = new CollisionContact(actor1.collisionArea, actor2.collisionArea, minimumTranslationVector, actor1.pos, minimumTranslationVector);\r\n                    if (!collisionPairs.some(function (cp) {\r\n                        return cp.id === pair.id;\r\n                    })) {\r\n                        collisionPairs.push(pair);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return collisionPairs;\r\n    };\r\n    /**\r\n     * Identify actual collisions from those pairs, and calculate collision impulse\r\n     */\r\n    NaiveCollisionBroadphase.prototype.narrowphase = function (pairs) {\r\n        return pairs;\r\n    };\r\n    NaiveCollisionBroadphase.prototype.runCollisionStartEnd = function (pairs) {\r\n        var currentFrameHash = {};\r\n        for (var _i = 0, pairs_1 = pairs; _i < pairs_1.length; _i++) {\r\n            var p = pairs_1[_i];\r\n            // load currentFrameHash\r\n            currentFrameHash[p.id] = p;\r\n            // find all new collisions\r\n            if (!this._lastFramePairsHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\r\n                actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\r\n            }\r\n        }\r\n        // find all old collisions\r\n        for (var _a = 0, _b = this._lastFramePairs; _a < _b.length; _a++) {\r\n            var p = _b[_a];\r\n            if (!currentFrameHash[p.id]) {\r\n                var actor1 = p.bodyA.actor;\r\n                var actor2 = p.bodyB.actor;\r\n                actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\r\n                actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\r\n            }\r\n        }\r\n        // reset the last frame cache\r\n        this._lastFramePairs = pairs;\r\n        this._lastFramePairsHash = currentFrameHash;\r\n    };\r\n    /**\r\n     * Resolve the position and velocity of the physics bodies\r\n     */\r\n    NaiveCollisionBroadphase.prototype.resolve = function (pairs) {\r\n        for (var _i = 0, pairs_2 = pairs; _i < pairs_2.length; _i++) {\r\n            var pair = pairs_2[_i];\r\n            pair.resolve(Physics.collisionResolutionStrategy);\r\n        }\r\n        return pairs.filter(function (p) { return p.canCollide; });\r\n    };\r\n    NaiveCollisionBroadphase.prototype.update = function () {\r\n        return 0;\r\n    };\r\n    NaiveCollisionBroadphase.prototype.debugDraw = function () {\r\n        return;\r\n    };\r\n    return NaiveCollisionBroadphase;\r\n}());\r\nexport { NaiveCollisionBroadphase };\r\n//# sourceMappingURL=NaiveCollisionBroadphase.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as Effects from './SpriteEffects';\r\nimport { Vector } from '../Algebra';\r\nimport { Engine } from '../Engine';\r\nimport * as Util from '../Util/Util';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar AnimationImpl = /** @class */ (function () {\r\n    /**\r\n     * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\r\n     *\r\n     * @param engine  Reference to the current game engine\r\n     * @param images  An array of sprites to create the frames for the animation\r\n     * @param speed   The number in milliseconds to display each frame in the animation\r\n     * @param loop    Indicates whether the animation should loop after it is completed\r\n     */\r\n    function AnimationImpl(engineOrConfig, sprites, speed, loop) {\r\n        /**\r\n         * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\r\n         * generate an [[Animation]].\r\n         */\r\n        this.sprites = [];\r\n        /**\r\n         * Current frame index being shown\r\n         */\r\n        this.currentFrame = 0;\r\n        this._oldTime = Date.now();\r\n        this.anchor = new Vector(0.0, 0.0);\r\n        this.rotation = 0.0;\r\n        this.scale = new Vector(1, 1);\r\n        /**\r\n         * Indicates whether the animation should loop after it is completed\r\n         */\r\n        this.loop = true;\r\n        /**\r\n         * Indicates the frame index the animation should freeze on for a non-looping\r\n         * animation. By default it is the last frame.\r\n         */\r\n        this.freezeFrame = -1;\r\n        /**\r\n         * Flip each frame vertically. Sets [[Sprite.flipVertical]].\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.drawWidth = 0;\r\n        this.drawHeight = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        var engine = engineOrConfig;\r\n        if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\r\n            var config = engineOrConfig;\r\n            engine = config.engine;\r\n            sprites = config.sprites;\r\n            speed = config.speed;\r\n            loop = config.loop;\r\n        }\r\n        this.sprites = sprites;\r\n        this.speed = speed;\r\n        this._engine = engine;\r\n        if (loop != null) {\r\n            this.loop = loop;\r\n        }\r\n        if (sprites && sprites[0]) {\r\n            this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\r\n            this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\r\n            this.width = sprites[0] ? sprites[0].width : 0;\r\n            this.height = sprites[0] ? sprites[0].height : 0;\r\n            this.freezeFrame = sprites.length - 1;\r\n        }\r\n    }\r\n    /**\r\n     * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    AnimationImpl.prototype.opacity = function (value) {\r\n        this.addEffect(new Effects.Opacity(value));\r\n    };\r\n    /**\r\n     * Applies the grayscale effect to a sprite, removing color information.\r\n     */\r\n    AnimationImpl.prototype.grayscale = function () {\r\n        this.addEffect(new Effects.Grayscale());\r\n    };\r\n    /**\r\n     * Applies the invert effect to a sprite, inverting the pixel colors.\r\n     */\r\n    AnimationImpl.prototype.invert = function () {\r\n        this.addEffect(new Effects.Invert());\r\n    };\r\n    /**\r\n     * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    AnimationImpl.prototype.fill = function (color) {\r\n        this.addEffect(new Effects.Fill(color));\r\n    };\r\n    /**\r\n     * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\r\n     * provided color.\r\n     */\r\n    AnimationImpl.prototype.colorize = function (color) {\r\n        this.addEffect(new Effects.Colorize(color));\r\n    };\r\n    /**\r\n     * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.lighten = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Lighten(factor));\r\n    };\r\n    /**\r\n     * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.darken = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Darken(factor));\r\n    };\r\n    /**\r\n     * Applies the saturate effect to a sprite, saturates the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.saturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Saturate(factor));\r\n    };\r\n    /**\r\n     * Applies the desaturate effect to a sprite, desaturates the color according to hsl\r\n     */\r\n    AnimationImpl.prototype.desaturate = function (factor) {\r\n        if (factor === void 0) { factor = 0.1; }\r\n        this.addEffect(new Effects.Desaturate(factor));\r\n    };\r\n    /**\r\n     * Add a [[ISpriteEffect]] manually\r\n     */\r\n    AnimationImpl.prototype.addEffect = function (effect) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].addEffect(effect);\r\n        }\r\n    };\r\n    AnimationImpl.prototype.removeEffect = function (param) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].removeEffect(param);\r\n        }\r\n    };\r\n    /**\r\n     * Clear all sprite effects\r\n     */\r\n    AnimationImpl.prototype.clearEffects = function () {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].clearEffects();\r\n        }\r\n    };\r\n    AnimationImpl.prototype._setAnchor = function (point) {\r\n        //if (!this.anchor.equals(point)) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].anchor.setTo(point.x, point.y);\r\n        }\r\n        //}\r\n    };\r\n    AnimationImpl.prototype._setRotation = function (radians) {\r\n        //if (this.rotation !== radians) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].rotation = radians;\r\n        }\r\n        //}\r\n    };\r\n    AnimationImpl.prototype._setScale = function (scale) {\r\n        //if (!this.scale.equals(scale)) {\r\n        for (var i in this.sprites) {\r\n            this.sprites[i].scale = scale;\r\n        }\r\n        //}\r\n    };\r\n    /**\r\n     * Resets the animation to first frame.\r\n     */\r\n    AnimationImpl.prototype.reset = function () {\r\n        this.currentFrame = 0;\r\n    };\r\n    /**\r\n     * Indicates whether the animation is complete, animations that loop are never complete.\r\n     */\r\n    AnimationImpl.prototype.isDone = function () {\r\n        return !this.loop && this.currentFrame >= this.sprites.length;\r\n    };\r\n    /**\r\n     * Not meant to be called by game developers. Ticks the animation forward internally and\r\n     * calculates whether to change to the frame.\r\n     * @internal\r\n     */\r\n    AnimationImpl.prototype.tick = function () {\r\n        var time = Date.now();\r\n        if (time - this._oldTime > this.speed) {\r\n            this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\r\n            this._oldTime = time;\r\n        }\r\n    };\r\n    AnimationImpl.prototype._updateValues = function () {\r\n        this._setAnchor(this.anchor);\r\n        this._setRotation(this.rotation);\r\n        this._setScale(this.scale);\r\n    };\r\n    /**\r\n     * Skips ahead a specified number of frames in the animation\r\n     * @param frames  Frames to skip ahead\r\n     */\r\n    AnimationImpl.prototype.skip = function (frames) {\r\n        this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\r\n    };\r\n    AnimationImpl.prototype.draw = function (ctx, x, y) {\r\n        this.tick();\r\n        this._updateValues();\r\n        var currSprite;\r\n        if (this.currentFrame < this.sprites.length) {\r\n            currSprite = this.sprites[this.currentFrame];\r\n            if (this.flipVertical) {\r\n                currSprite.flipVertical = this.flipVertical;\r\n            }\r\n            if (this.flipHorizontal) {\r\n                currSprite.flipHorizontal = this.flipHorizontal;\r\n            }\r\n            currSprite.draw(ctx, x, y);\r\n        }\r\n        if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\r\n            currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\r\n            currSprite.draw(ctx, x, y);\r\n        }\r\n        // add the calculated width\r\n        if (currSprite) {\r\n            this.drawWidth = currSprite.drawWidth;\r\n            this.drawHeight = currSprite.drawHeight;\r\n        }\r\n    };\r\n    /**\r\n     * Plays an animation at an arbitrary location in the game.\r\n     * @param x  The x position in the game to play\r\n     * @param y  The y position in the game to play\r\n     */\r\n    AnimationImpl.prototype.play = function (x, y) {\r\n        this.reset();\r\n        this._engine.playAnimation(this, x, y);\r\n    };\r\n    return AnimationImpl;\r\n}());\r\nexport { AnimationImpl };\r\n/**\r\n * Animations allow you to display a series of images one after another,\r\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\r\n *\r\n * [[include:Animations.md]]\r\n */\r\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation(engineOrConfig, images, speed, loop) {\r\n        return _super.call(this, engineOrConfig, images, speed, loop) || this;\r\n    }\r\n    return Animation;\r\n}(Configurable(AnimationImpl)));\r\nexport { Animation };\r\n//# sourceMappingURL=Animation.js.map","import { Vector } from '../Algebra';\r\n/**\r\n * Creates a closed polygon drawing given a list of [[Vector]]s.\r\n *\r\n * @warning Use sparingly as Polygons are performance intensive\r\n */\r\nvar Polygon = /** @class */ (function () {\r\n    /**\r\n     * @param points  The vectors to use to build the polygon in order\r\n     */\r\n    function Polygon(points) {\r\n        /**\r\n         * The width of the lines of the polygon\r\n         */\r\n        this.lineWidth = 5;\r\n        /**\r\n         * Indicates whether the polygon is filled or not.\r\n         */\r\n        this.filled = false;\r\n        this._points = [];\r\n        this.anchor = new Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.scale = new Vector(1, 1);\r\n        this._points = points;\r\n        var minX = this._points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.x);\r\n        }, 0);\r\n        var maxX = this._points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.x);\r\n        }, 0);\r\n        this.drawWidth = maxX - minX;\r\n        var minY = this._points.reduce(function (prev, curr) {\r\n            return Math.min(prev, curr.y);\r\n        }, 0);\r\n        var maxY = this._points.reduce(function (prev, curr) {\r\n            return Math.max(prev, curr.y);\r\n        }, 0);\r\n        this.drawHeight = maxY - minY;\r\n        this.height = this.drawHeight;\r\n        this.width = this.drawWidth;\r\n    }\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.addEffect = function () {\r\n        // not supported on polygons\r\n    };\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.removeEffect = function () {\r\n        // not supported on polygons\r\n    };\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    Polygon.prototype.clearEffects = function () {\r\n        // not supported on polygons\r\n    };\r\n    Polygon.prototype.reset = function () {\r\n        //pass\r\n    };\r\n    Polygon.prototype.draw = function (ctx, x, y) {\r\n        ctx.save();\r\n        ctx.translate(x + this.anchor.x, y + this.anchor.y);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        ctx.rotate(this.rotation);\r\n        ctx.beginPath();\r\n        ctx.lineWidth = this.lineWidth;\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        var firstPoint = this._points[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        var i = 0, len = this._points.length;\r\n        for (i; i < len; i++) {\r\n            ctx.lineTo(this._points[i].x, this._points[i].y);\r\n        }\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        if (this.filled) {\r\n            ctx.fillStyle = this.fillColor.toString();\r\n            ctx.fill();\r\n        }\r\n        ctx.strokeStyle = this.lineColor.toString();\r\n        if (this.flipHorizontal) {\r\n            ctx.translate(this.drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ctx.translate(0, this.drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    };\r\n    return Polygon;\r\n}());\r\nexport { Polygon };\r\n//# sourceMappingURL=Polygon.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Sprite } from './Sprite';\r\nimport { Animation } from './Animation';\r\nimport { Color } from './Color';\r\nimport * as Effects from './SpriteEffects';\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Logger } from '../Util/Log';\r\nimport { TextAlign, BaseAlign } from '../Label';\r\nimport { Configurable } from '../Configurable';\r\n/**\r\n * @hidden\r\n */\r\nvar SpriteSheetImpl = /** @class */ (function () {\r\n    /**\r\n     * @param image     The backing image texture to build the SpriteSheet\r\n     * @param columns   The number of columns in the image texture\r\n     * @param rows      The number of rows in the image texture\r\n     * @param spWidth   The width of each individual sprite in pixels\r\n     * @param spHeight  The height of each individual sprite in pixels\r\n     */\r\n    function SpriteSheetImpl(imageOrConfigOrSprites, columns, rows, spWidth, spHeight) {\r\n        this.sprites = [];\r\n        this.image = null;\r\n        this.columns = 0;\r\n        this.rows = 0;\r\n        this.spWidth = 0;\r\n        this.spHeight = 0;\r\n        var loadFromImage = false;\r\n        if (imageOrConfigOrSprites instanceof Array) {\r\n            this.sprites = imageOrConfigOrSprites;\r\n        }\r\n        else {\r\n            if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\r\n                this.columns = imageOrConfigOrSprites.columns;\r\n                this.rows = imageOrConfigOrSprites.rows;\r\n                this.spWidth = imageOrConfigOrSprites.spWidth;\r\n                this.spHeight = imageOrConfigOrSprites.spHeight;\r\n                this.image = imageOrConfigOrSprites.image;\r\n            }\r\n            else {\r\n                this.image = imageOrConfigOrSprites;\r\n                this.columns = columns;\r\n                this.rows = rows;\r\n                this.spWidth = spWidth;\r\n                this.spHeight = spHeight;\r\n            }\r\n            this.sprites = new Array(this.columns * this.rows);\r\n            loadFromImage = true;\r\n        }\r\n        // TODO: Inspect actual image dimensions with preloading\r\n        /*if(spWidth * columns > this.internalImage.naturalWidth){\r\n             throw new Error(\"SpriteSheet specified is wider than image width\");\r\n          }\r\n    \r\n          if(spHeight * rows > this.internalImage.naturalHeight){\r\n             throw new Error(\"SpriteSheet specified is higher than image height\");\r\n          }*/\r\n        if (loadFromImage) {\r\n            var i = 0;\r\n            var j = 0;\r\n            for (i = 0; i < this.rows; i++) {\r\n                for (j = 0; j < this.columns; j++) {\r\n                    this.sprites[j + i * this.columns] = new Sprite(this.image, j * this.spWidth, i * this.spHeight, this.spWidth, this.spHeight);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Create an animation from the this SpriteSheet by listing out the\r\n     * sprite indices. Sprites are organized in row major order in the SpriteSheet.\r\n     * @param engine   Reference to the current game [[Engine]]\r\n     * @param indices  An array of sprite indices to use in the animation\r\n     * @param speed    The number in milliseconds to display each frame in the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationByIndices = function (engine, indices, speed) {\r\n        var _this = this;\r\n        var images = indices.map(function (index) {\r\n            return _this.sprites[index];\r\n        });\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, images, speed);\r\n    };\r\n    /**\r\n     * Create an animation from the this SpriteSheet by specifing the range of\r\n     * images with the beginning (inclusive) and ending (exclusive) index\r\n     * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\r\n     * @param engine      Reference to the current game Engine\r\n     * @param beginIndex  The index to start taking frames (inclusive)\r\n     * @param endIndex    The index to stop taking frames (exclusive)\r\n     * @param speed       The number in milliseconds to display each frame in the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationBetween = function (engine, beginIndex, endIndex, speed) {\r\n        var images = this.sprites.slice(beginIndex, endIndex);\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, images, speed);\r\n    };\r\n    /**\r\n     * Treat the entire SpriteSheet as one animation, organizing the frames in\r\n     * row major order.\r\n     * @param engine  Reference to the current game [[Engine]]\r\n     * @param speed   The number in milliseconds to display each frame the animation\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationForAll = function (engine, speed) {\r\n        var sprites = this.sprites.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation(engine, sprites, speed);\r\n    };\r\n    /**\r\n     * Retreive a specific sprite from the SpriteSheet by its index. Sprites are organized\r\n     * in row major order in the SpriteSheet.\r\n     * @param index  The index of the sprite\r\n     */\r\n    SpriteSheetImpl.prototype.getSprite = function (index) {\r\n        if (index >= 0 && index < this.sprites.length) {\r\n            return this.sprites[index];\r\n        }\r\n        else {\r\n            throw new Error('Invalid index: ' + index);\r\n        }\r\n    };\r\n    /**\r\n     * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\r\n     * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\r\n     * largest dimension (width, height) from among the sprite coordinates\r\n     * @param engine\r\n     * @param spriteCoordinates\r\n     * @param speed\r\n     */\r\n    SpriteSheetImpl.prototype.getAnimationByCoords = function (engine, spriteCoordinates, speed) {\r\n        var maxWidth = 0;\r\n        var maxHeight = 0;\r\n        var sprites = new Array(spriteCoordinates.length);\r\n        for (var i = 0; i < spriteCoordinates.length; i++) {\r\n            var coord = spriteCoordinates[i];\r\n            // no need to pass image again if using a spritesheet\r\n            coord.image = coord.image || this.image;\r\n            maxWidth = Math.max(maxWidth, coord.drawWidth);\r\n            maxHeight = Math.max(maxHeight, coord.drawHeight);\r\n            sprites[i] = new Sprite(coord);\r\n        }\r\n        var anim = new Animation(engine, sprites, speed);\r\n        anim.drawWidth = maxWidth;\r\n        anim.drawHeight = maxHeight;\r\n        return anim;\r\n    };\r\n    return SpriteSheetImpl;\r\n}());\r\nexport { SpriteSheetImpl };\r\n/**\r\n * Sprite sheets are a useful mechanism for slicing up image resources into\r\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\r\n * in row major order in the [[SpriteSheet]].\r\n *\r\n * [[include:SpriteSheets.md]]\r\n */\r\nvar SpriteSheet = /** @class */ (function (_super) {\r\n    __extends(SpriteSheet, _super);\r\n    function SpriteSheet(imageOrConfigOrSprites, columns, rows, spWidth, spHeight) {\r\n        return _super.call(this, imageOrConfigOrSprites, columns, rows, spWidth, spHeight) || this;\r\n    }\r\n    return SpriteSheet;\r\n}(Configurable(SpriteSheetImpl)));\r\nexport { SpriteSheet };\r\nvar SpriteFontImpl = /** @class */ (function (_super) {\r\n    __extends(SpriteFontImpl, _super);\r\n    /**\r\n     * @param image           The backing image texture to build the SpriteFont\r\n     * @param alphabet        A string representing all the characters in the image, in row major order.\r\n     * @param caseInsensitive  Indicate whether this font takes case into account\r\n     * @param columns         The number of columns of characters in the image\r\n     * @param rows            The number of rows of characters in the image\r\n     * @param spWidth         The width of each character in pixels\r\n     * @param spHeight        The height of each character in pixels\r\n     */\r\n    function SpriteFontImpl(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) {\r\n        var _this = _super.call(this, imageOrConfig instanceof Texture\r\n            ? {\r\n                image: imageOrConfig,\r\n                spWidth: spWidth,\r\n                spHeight: spHeight,\r\n                rows: rows,\r\n                columns: columns\r\n            }\r\n            : imageOrConfig) || this;\r\n        _this._currentColor = Color.Black.clone();\r\n        _this._currentOpacity = 1.0;\r\n        _this._sprites = {};\r\n        // text shadow\r\n        _this._textShadowOn = false;\r\n        _this._textShadowDirty = true;\r\n        _this._textShadowColor = Color.Black.clone();\r\n        _this._textShadowSprites = {};\r\n        _this._shadowOffsetX = 5;\r\n        _this._shadowOffsetY = 5;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            alphabet = imageOrConfig.alphabet;\r\n            caseInsensitive = imageOrConfig.caseInsensitive;\r\n        }\r\n        _this._alphabet = alphabet;\r\n        _this._caseInsensitive = caseInsensitive;\r\n        _this._sprites = _this.getTextSprites();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\r\n     */\r\n    SpriteFontImpl.prototype.getTextSprites = function () {\r\n        var lookup = {};\r\n        for (var i = 0; i < this._alphabet.length; i++) {\r\n            var char = this._alphabet[i];\r\n            if (this._caseInsensitive) {\r\n                char = char.toLowerCase();\r\n            }\r\n            lookup[char] = this.sprites[i].clone();\r\n        }\r\n        return lookup;\r\n    };\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     */\r\n    SpriteFontImpl.prototype.setTextShadow = function (offsetX, offsetY, shadowColor) {\r\n        this._textShadowOn = true;\r\n        this._shadowOffsetX = offsetX;\r\n        this._shadowOffsetY = offsetY;\r\n        this._textShadowColor = shadowColor.clone();\r\n        this._textShadowDirty = true;\r\n        for (var character in this._sprites) {\r\n            this._textShadowSprites[character] = this._sprites[character].clone();\r\n        }\r\n    };\r\n    /**\r\n     * Toggles text shadows on or off\r\n     */\r\n    SpriteFontImpl.prototype.useTextShadow = function (on) {\r\n        this._textShadowOn = on;\r\n        if (on) {\r\n            this.setTextShadow(5, 5, this._textShadowColor);\r\n        }\r\n    };\r\n    /**\r\n     * Draws the current sprite font\r\n     */\r\n    SpriteFontImpl.prototype.draw = function (ctx, text, x, y, options) {\r\n        options = this._parseOptions(options);\r\n        if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\r\n            this._currentOpacity = options.opacity;\r\n            this._currentColor = options.color;\r\n            for (var char in this._sprites) {\r\n                this._sprites[char].clearEffects();\r\n                this._sprites[char].fill(options.color);\r\n                this._sprites[char].opacity(options.opacity);\r\n            }\r\n        }\r\n        if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\r\n            for (var characterShadow in this._textShadowSprites) {\r\n                this._textShadowSprites[characterShadow].clearEffects();\r\n                this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\r\n            }\r\n            this._textShadowDirty = false;\r\n        }\r\n        // find the current length of text in pixels\r\n        var sprite = this.sprites[0];\r\n        // find the current height fo the text in pixels\r\n        var height = sprite.drawHeight;\r\n        // calculate appropriate scale for font size\r\n        var scale = options.fontSize / height;\r\n        var length = text.length * sprite.drawWidth * scale + text.length * options.letterSpacing;\r\n        var currX = x;\r\n        if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\r\n            currX = x;\r\n        }\r\n        else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\r\n            currX = x - length;\r\n        }\r\n        else if (options.textAlign === TextAlign.Center) {\r\n            currX = x - length / 2;\r\n        }\r\n        var currY = y - height * scale;\r\n        if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\r\n            currY = y;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Ideographic ||\r\n            options.baseAlign === BaseAlign.Bottom ||\r\n            options.baseAlign === BaseAlign.Alphabetic) {\r\n            currY = y - height * scale;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Middle) {\r\n            currY = y - (height * scale) / 2;\r\n        }\r\n        for (var i = 0; i < text.length; i++) {\r\n            var character = text[i];\r\n            if (this._caseInsensitive) {\r\n                character = character.toLowerCase();\r\n            }\r\n            try {\r\n                // if text shadow\r\n                if (this._textShadowOn) {\r\n                    this._textShadowSprites[character].scale.x = scale;\r\n                    this._textShadowSprites[character].scale.y = scale;\r\n                    this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\r\n                }\r\n                var charSprite = this._sprites[character];\r\n                charSprite.scale.x = scale;\r\n                charSprite.scale.y = scale;\r\n                charSprite.draw(ctx, currX, currY);\r\n                currX += charSprite.drawWidth + options.letterSpacing;\r\n            }\r\n            catch (e) {\r\n                Logger.getInstance().error(\"SpriteFont Error drawing char \" + character);\r\n            }\r\n        }\r\n    };\r\n    SpriteFontImpl.prototype._parseOptions = function (options) {\r\n        return {\r\n            fontSize: options.fontSize || 10,\r\n            letterSpacing: options.letterSpacing || 0,\r\n            color: options.color || Color.Black.clone(),\r\n            textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\r\n            baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\r\n            maxWidth: options.maxWidth || -1,\r\n            opacity: options.opacity || 0\r\n        };\r\n    };\r\n    return SpriteFontImpl;\r\n}(SpriteSheet));\r\nexport { SpriteFontImpl };\r\n/**\r\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\r\n * a particular bitmap as a font. Note that some font features are not\r\n * supported by Sprite fonts.\r\n *\r\n * [[include:SpriteFonts.md]]\r\n */\r\nvar SpriteFont = /** @class */ (function (_super) {\r\n    __extends(SpriteFont, _super);\r\n    function SpriteFont(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) {\r\n        return _super.call(this, imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight) || this;\r\n    }\r\n    return SpriteFont;\r\n}(Configurable(SpriteFontImpl)));\r\nexport { SpriteFont };\r\n//# sourceMappingURL=SpriteSheet.js.map","var ExResponse = /** @class */ (function () {\r\n    function ExResponse() {\r\n    }\r\n    ExResponse.type = {\r\n        any: '',\r\n        blob: 'blob',\r\n        json: 'json',\r\n        text: 'text',\r\n        document: 'document',\r\n        arraybuffer: 'arraybuffer'\r\n    };\r\n    return ExResponse;\r\n}());\r\nexport { ExResponse };\r\n//# sourceMappingURL=IAudioImplementation.js.map","import { Random } from './Random';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as Util from '../Util/Util';\r\nfunction _lerp(time, a, b) {\r\n    return a + time * (b - a);\r\n}\r\nfunction _fade(t) {\r\n    return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\n/**\r\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/\r\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html\r\n */\r\nvar PerlinGenerator = /** @class */ (function () {\r\n    function PerlinGenerator(options) {\r\n        this._perm = [\r\n            151,\r\n            160,\r\n            137,\r\n            91,\r\n            90,\r\n            15,\r\n            131,\r\n            13,\r\n            201,\r\n            95,\r\n            96,\r\n            53,\r\n            194,\r\n            233,\r\n            7,\r\n            225,\r\n            140,\r\n            36,\r\n            103,\r\n            30,\r\n            69,\r\n            142,\r\n            8,\r\n            99,\r\n            37,\r\n            240,\r\n            21,\r\n            10,\r\n            23,\r\n            190,\r\n            6,\r\n            148,\r\n            247,\r\n            120,\r\n            234,\r\n            75,\r\n            0,\r\n            26,\r\n            197,\r\n            62,\r\n            94,\r\n            252,\r\n            219,\r\n            203,\r\n            117,\r\n            35,\r\n            11,\r\n            32,\r\n            57,\r\n            177,\r\n            33,\r\n            88,\r\n            237,\r\n            149,\r\n            56,\r\n            87,\r\n            174,\r\n            20,\r\n            125,\r\n            136,\r\n            171,\r\n            168,\r\n            68,\r\n            175,\r\n            74,\r\n            165,\r\n            71,\r\n            134,\r\n            139,\r\n            48,\r\n            27,\r\n            166,\r\n            77,\r\n            146,\r\n            158,\r\n            231,\r\n            83,\r\n            111,\r\n            229,\r\n            122,\r\n            60,\r\n            211,\r\n            133,\r\n            230,\r\n            220,\r\n            105,\r\n            92,\r\n            41,\r\n            55,\r\n            46,\r\n            245,\r\n            40,\r\n            244,\r\n            102,\r\n            143,\r\n            54,\r\n            65,\r\n            25,\r\n            63,\r\n            161,\r\n            1,\r\n            216,\r\n            80,\r\n            73,\r\n            209,\r\n            76,\r\n            132,\r\n            187,\r\n            208,\r\n            89,\r\n            18,\r\n            169,\r\n            200,\r\n            196,\r\n            135,\r\n            130,\r\n            116,\r\n            188,\r\n            159,\r\n            86,\r\n            164,\r\n            100,\r\n            109,\r\n            198,\r\n            173,\r\n            186,\r\n            3,\r\n            64,\r\n            52,\r\n            217,\r\n            226,\r\n            250,\r\n            124,\r\n            123,\r\n            5,\r\n            202,\r\n            38,\r\n            147,\r\n            118,\r\n            126,\r\n            255,\r\n            82,\r\n            85,\r\n            212,\r\n            207,\r\n            206,\r\n            59,\r\n            227,\r\n            47,\r\n            16,\r\n            58,\r\n            17,\r\n            182,\r\n            189,\r\n            28,\r\n            42,\r\n            223,\r\n            183,\r\n            170,\r\n            213,\r\n            119,\r\n            248,\r\n            152,\r\n            2,\r\n            44,\r\n            154,\r\n            163,\r\n            70,\r\n            221,\r\n            153,\r\n            101,\r\n            155,\r\n            167,\r\n            43,\r\n            172,\r\n            9,\r\n            129,\r\n            22,\r\n            39,\r\n            253,\r\n            19,\r\n            98,\r\n            108,\r\n            110,\r\n            79,\r\n            113,\r\n            224,\r\n            232,\r\n            178,\r\n            185,\r\n            112,\r\n            104,\r\n            218,\r\n            246,\r\n            97,\r\n            228,\r\n            251,\r\n            34,\r\n            242,\r\n            193,\r\n            238,\r\n            210,\r\n            144,\r\n            12,\r\n            191,\r\n            179,\r\n            162,\r\n            241,\r\n            81,\r\n            51,\r\n            145,\r\n            235,\r\n            249,\r\n            14,\r\n            239,\r\n            107,\r\n            49,\r\n            192,\r\n            214,\r\n            31,\r\n            181,\r\n            199,\r\n            106,\r\n            157,\r\n            184,\r\n            84,\r\n            204,\r\n            176,\r\n            115,\r\n            121,\r\n            50,\r\n            45,\r\n            127,\r\n            4,\r\n            150,\r\n            254,\r\n            138,\r\n            236,\r\n            205,\r\n            93,\r\n            222,\r\n            114,\r\n            67,\r\n            29,\r\n            24,\r\n            72,\r\n            243,\r\n            141,\r\n            128,\r\n            195,\r\n            78,\r\n            66,\r\n            215,\r\n            61,\r\n            156,\r\n            180\r\n        ];\r\n        this._p = new Uint8Array(512);\r\n        this._defaultPerlinOptions = {\r\n            octaves: 1,\r\n            frequency: 1,\r\n            amplitude: 1,\r\n            persistance: 0.5\r\n        };\r\n        options = Util.extend({}, this._defaultPerlinOptions, options);\r\n        this.persistance = options.persistance;\r\n        this.amplitude = options.amplitude;\r\n        this.frequency = options.frequency;\r\n        this.octaves = options.octaves;\r\n        if (options.seed) {\r\n            this._random = new Random(options.seed);\r\n        }\r\n        else {\r\n            this._random = new Random();\r\n        }\r\n        this._perm = this._random.shuffle(this._perm);\r\n        for (var i = 0; i < 512; i++) {\r\n            this._p[i] = this._perm[i % 256] & 0xff;\r\n        }\r\n    }\r\n    PerlinGenerator.prototype.noise = function () {\r\n        var amp = this.amplitude;\r\n        var freq = this.frequency;\r\n        var total = 0;\r\n        var maxValue = 0;\r\n        for (var i = 0; i < this.octaves; i++) {\r\n            switch (arguments.length) {\r\n                case 1:\r\n                    total += this._noise1d(arguments[0] * freq) * amp;\r\n                    break;\r\n                case 2:\r\n                    total += this._noise2d(arguments[0] * freq, arguments[1] * freq) * amp;\r\n                    break;\r\n                case 3:\r\n                    total += this._noise3d(arguments[0] * freq, arguments[1] * freq, arguments[2] * freq) * amp;\r\n                    break;\r\n                /* istanbul ignore next */\r\n                default:\r\n                    throw new Error('Invalid arguments for perlin noise');\r\n            }\r\n            maxValue += amp;\r\n            amp *= this.persistance;\r\n            freq *= 2;\r\n        }\r\n        return total / maxValue;\r\n    };\r\n    /**\r\n     * Generates a list starting at 0 and ending at 1 of contious perlin noise, by default the step is 1/length;\r\n     *\r\n     */\r\n    PerlinGenerator.prototype.sequence = function (length, step) {\r\n        if (!step) {\r\n            step = 1 / length;\r\n        }\r\n        var array = new Array(length);\r\n        for (var i = 0; i < length; i++) {\r\n            array[i] = this.noise(i * step);\r\n        }\r\n        return array;\r\n    };\r\n    /**\r\n     * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width),\r\n     * by default the step will 1/(min(dimension))\r\n     */\r\n    PerlinGenerator.prototype.grid = function (width, height, step) {\r\n        if (!step) {\r\n            step = 1 / Math.min(width, height);\r\n        }\r\n        var array = new Array(width * height);\r\n        for (var y = 0; y < height; y++) {\r\n            for (var x = 0; x < width; x++) {\r\n                array[x + y * width] = this.noise(x * step, y * step);\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n    PerlinGenerator.prototype._gradient3d = function (hash, x, y, z) {\r\n        var h = hash & 0xf;\r\n        var u = h < 8 ? x : y;\r\n        var v = h < 4 ? y : h === 12 || h === 14 ? x : z;\r\n        return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\r\n    };\r\n    PerlinGenerator.prototype._gradient2d = function (hash, x, y) {\r\n        var value = (hash & 1) === 0 ? x : y;\r\n        return (hash & 2) === 0 ? -value : value;\r\n    };\r\n    PerlinGenerator.prototype._gradient1d = function (hash, x) {\r\n        return (hash & 1) === 0 ? -x : x;\r\n    };\r\n    PerlinGenerator.prototype._noise1d = function (x) {\r\n        var intX = Math.floor(x) & 0xff; // force 0-255 integers to lookup in permutation\r\n        x -= Math.floor(x);\r\n        var fadeX = _fade(x);\r\n        return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\r\n    };\r\n    PerlinGenerator.prototype._noise2d = function (x, y) {\r\n        var intX = Math.floor(x) & 0xff;\r\n        var intY = Math.floor(y) & 0xff;\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        var fadeX = _fade(x);\r\n        var fadeY = _fade(y);\r\n        var a = this._p[intX] + intY;\r\n        var b = this._p[intX + 1] + intY;\r\n        return ((_lerp(fadeY, _lerp(fadeX, this._gradient2d(this._p[a], x, y), this._gradient2d(this._p[b], x - 1, y)), _lerp(fadeX, this._gradient2d(this._p[a + 1], x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))) +\r\n            1) /\r\n            2);\r\n    };\r\n    PerlinGenerator.prototype._noise3d = function (x, y, z) {\r\n        var intX = Math.floor(x) & 0xff;\r\n        var intY = Math.floor(y) & 0xff;\r\n        var intZ = Math.floor(z) & 0xff;\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        z -= Math.floor(z);\r\n        var fadeX = _fade(x);\r\n        var fadeY = _fade(y);\r\n        var fadeZ = _fade(z);\r\n        var a = this._p[intX] + intY;\r\n        var b = this._p[intX + 1] + intY;\r\n        var aa = this._p[a] + intZ;\r\n        var ba = this._p[b] + intZ;\r\n        var ab = this._p[a + 1] + intZ;\r\n        var bb = this._p[b + 1] + intZ;\r\n        return ((_lerp(fadeZ, _lerp(fadeY, _lerp(fadeX, this._gradient3d(this._p[aa], x, y, z), this._gradient3d(this._p[ba], x - 1, y, z)), _lerp(fadeX, this._gradient3d(this._p[ab], x, y - 1, z), this._gradient3d(this._p[bb], x - 1, y - 1, z))), _lerp(fadeY, _lerp(fadeX, this._gradient3d(this._p[aa + 1], x, y, z - 1), this._gradient3d(this._p[ba + 1], x - 1, y, z - 1)), _lerp(fadeX, this._gradient3d(this._p[ab + 1], x, y - 1, z - 1), this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1)))) +\r\n            1) /\r\n            2);\r\n    };\r\n    return PerlinGenerator;\r\n}());\r\nexport { PerlinGenerator };\r\n/**\r\n * A helper to draw 2D perlin maps given a perlin generator and a function\r\n */\r\nvar PerlinDrawer2D = /** @class */ (function () {\r\n    /**\r\n     * @param generator - An existing perlin generator\r\n     * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\r\n     */\r\n    function PerlinDrawer2D(generator, colorFcn) {\r\n        this.generator = generator;\r\n        this.colorFcn = colorFcn;\r\n        if (!colorFcn) {\r\n            this.colorFcn = function (val) {\r\n                return val < 125 ? Color.Black : Color.White;\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Returns an image of 2D perlin noise\r\n     */\r\n    PerlinDrawer2D.prototype.image = function (width, height) {\r\n        var image = document.createElement('img');\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext('2d');\r\n        this.draw(ctx, 0, 0, width, height);\r\n        image.src = canvas.toDataURL();\r\n        return image;\r\n    };\r\n    /**\r\n     * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\r\n     */\r\n    PerlinDrawer2D.prototype.draw = function (ctx, x, y, width, height) {\r\n        var grid = this.generator.grid(width, height);\r\n        var imageData = ctx.getImageData(x, y, width, height);\r\n        for (var j = 0; j < height; j++) {\r\n            for (var i = 0; i < width; i++) {\r\n                var val = grid[i + width * j];\r\n                var c = Math.floor(val * 255) & 0xff;\r\n                var pixel = (i + j * imageData.width) * 4;\r\n                var color = this.colorFcn(c);\r\n                imageData.data[pixel] = color.r;\r\n                imageData.data[pixel + 1] = color.g;\r\n                imageData.data[pixel + 2] = color.b;\r\n                imageData.data[pixel + 3] = Math.floor(color.a * 255);\r\n            }\r\n        }\r\n        ctx.putImageData(imageData, x, y);\r\n    };\r\n    return PerlinDrawer2D;\r\n}());\r\nexport { PerlinDrawer2D };\r\n//# sourceMappingURL=PerlinNoise.js.map","import { Logger } from './../Util/Log';\r\nexport var ColorBlindness;\r\n(function (ColorBlindness) {\r\n    ColorBlindness[ColorBlindness[\"Protanope\"] = 0] = \"Protanope\";\r\n    ColorBlindness[ColorBlindness[\"Deuteranope\"] = 1] = \"Deuteranope\";\r\n    ColorBlindness[ColorBlindness[\"Tritanope\"] = 2] = \"Tritanope\";\r\n})(ColorBlindness || (ColorBlindness = {}));\r\n/**\r\n * This post processor can correct colors and simulate color blindness.\r\n * It is possible to use this on every game, but the game's performance\r\n * will suffer measurably. It's better to use it as a helpful tool while developing your game.\r\n * Remember, the best practice is to design with color blindness in mind.\r\n *\r\n * [[include:ColorBlind.md]]\r\n */\r\nvar ColorBlindCorrector = /** @class */ (function () {\r\n    function ColorBlindCorrector(engine, simulate, colorMode) {\r\n        if (simulate === void 0) { simulate = false; }\r\n        if (colorMode === void 0) { colorMode = ColorBlindness.Protanope; }\r\n        this.engine = engine;\r\n        this.simulate = simulate;\r\n        this.colorMode = colorMode;\r\n        this._vertexShader = 'attribute vec2 a_position;' +\r\n            'attribute vec2 a_texCoord;' +\r\n            'uniform vec2 u_resolution;' +\r\n            'varying vec2 v_texCoord;' +\r\n            'void main() {' +\r\n            // convert the rectangle from pixels to 0.0 to 1.0\r\n            'vec2 zeroToOne = a_position / u_resolution;' +\r\n            // convert from 0->1 to 0->2\r\n            'vec2 zeroToTwo = zeroToOne * 2.0;' +\r\n            // convert from 0->2 to -1->+1 (clipspace)\r\n            'vec2 clipSpace = zeroToTwo - 1.0;' +\r\n            'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\r\n            // pass the texCoord to the fragment shader\r\n            // The GPU will interpolate this value between points.\r\n            'v_texCoord = a_texCoord;' +\r\n            '}';\r\n        this._fragmentShader = 'precision mediump float;' +\r\n            // our texture\r\n            'uniform sampler2D u_image;' +\r\n            // the texCoords passed in from the vertex shader.\r\n            'varying vec2 v_texCoord;' +\r\n            // Color blind conversions\r\n            /*'mat3 m[9] =' +\r\n           '{' +\r\n              'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\r\n              'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\r\n              'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\r\n              'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\r\n              'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\r\n              'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\r\n              'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\r\n              'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\r\n              'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\r\n           '};' +*/\r\n            'void main() {' +\r\n            'vec4 o =  texture2D(u_image, v_texCoord);' +\r\n            // RGB to LMS matrix conversion\r\n            'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\r\n            'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\r\n            'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\r\n            // Simulate color blindness\r\n            '//MODE CODE//' +\r\n            /* Deuteranope for testing\r\n              'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\r\n            // LMS to RGB matrix conversion\r\n            'vec4 error;' +\r\n            'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\r\n            'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\r\n            'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\r\n            'error.a = 1.0;' +\r\n            'vec4 diff = o - error;' +\r\n            'vec4 correction;' +\r\n            'correction.r = 0.0;' +\r\n            'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\r\n            'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\r\n            'correction = o + correction;' +\r\n            'correction.a = o.a;' +\r\n            '//SIMULATE//' +\r\n            '}';\r\n        this._internalCanvas = document.createElement('canvas');\r\n        this._internalCanvas.width = engine.drawWidth;\r\n        this._internalCanvas.height = engine.drawHeight;\r\n        this._gl = this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\r\n        this._program = this._gl.createProgram();\r\n        var fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\r\n        var vertextShader = this._getShader('Vertex', this._vertexShader);\r\n        this._gl.attachShader(this._program, vertextShader);\r\n        this._gl.attachShader(this._program, fragmentShader);\r\n        this._gl.linkProgram(this._program);\r\n        if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\r\n            Logger.getInstance().error('Unable to link shader program!');\r\n        }\r\n        this._gl.useProgram(this._program);\r\n    }\r\n    ColorBlindCorrector.prototype._getFragmentShaderByMode = function (colorMode) {\r\n        var code = '';\r\n        if (colorMode === ColorBlindness.Protanope) {\r\n            code =\r\n                'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\r\n                    'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n        }\r\n        else if (colorMode === ColorBlindness.Deuteranope) {\r\n            code =\r\n                'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n                    'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n        }\r\n        else if (colorMode === ColorBlindness.Tritanope) {\r\n            code =\r\n                'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n                    'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n                    'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\r\n        }\r\n        if (this.simulate) {\r\n            this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\r\n        }\r\n        else {\r\n            this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\r\n        }\r\n        return this._fragmentShader.replace('//MODE CODE//', code);\r\n    };\r\n    ColorBlindCorrector.prototype._setRectangle = function (x, y, width, height) {\r\n        var x1 = x;\r\n        var x2 = x + width;\r\n        var y1 = y;\r\n        var y2 = y + height;\r\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]), this._gl.STATIC_DRAW);\r\n    };\r\n    ColorBlindCorrector.prototype._getShader = function (type, program) {\r\n        var shader;\r\n        if (type === 'Fragment') {\r\n            shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\r\n        }\r\n        else if (type === 'Vertex') {\r\n            shader = this._gl.createShader(this._gl.VERTEX_SHADER);\r\n        }\r\n        else {\r\n            Logger.getInstance().error('Error unknown shader type', type);\r\n        }\r\n        this._gl.shaderSource(shader, program);\r\n        this._gl.compileShader(shader);\r\n        if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\r\n            Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\r\n            return null;\r\n        }\r\n        return shader;\r\n    };\r\n    ColorBlindCorrector.prototype.process = function (image, out) {\r\n        // look up where the vertex data needs to go.\r\n        var positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\r\n        var texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\r\n        var texCoordBuffer = this._gl.createBuffer();\r\n        this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\r\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), this._gl.STATIC_DRAW);\r\n        this._gl.enableVertexAttribArray(texCoordLocation);\r\n        this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n        // Create a texture.\r\n        var texture = this._gl.createTexture();\r\n        this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\r\n        // Set the parameters so we can render any size image.\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\r\n        this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\r\n        // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\r\n        this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n        // Upload the image into the texture.\r\n        this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\r\n        // lookup uniforms\r\n        var resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\r\n        // set the resolution\r\n        this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\r\n        // Create a buffer for the position of the rectangle corners.\r\n        var positionBuffer = this._gl.createBuffer();\r\n        this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\r\n        this._gl.enableVertexAttribArray(positionLocation);\r\n        this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n        // Set a rectangle the same size as the image.\r\n        this._setRectangle(0, 0, image.width, image.height);\r\n        // Draw the rectangle.\r\n        this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\r\n        // Grab tranformed image from internal canvas\r\n        var pixelData = new Uint8Array(image.width * image.height * 4);\r\n        this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\r\n        image.data.set(pixelData);\r\n        out.putImageData(image, 0, 0);\r\n    };\r\n    return ColorBlindCorrector;\r\n}());\r\nexport { ColorBlindCorrector };\r\n//# sourceMappingURL=ColorBlindCorrector.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Promise } from '../../Promises';\r\nimport * as Util from '../../Util/Util';\r\nimport { AudioContextFactory } from './AudioContext';\r\n/**\r\n * Internal class for producing of AudioInstances\r\n */\r\n/* istanbul ignore next */\r\nvar AudioInstanceFactory = /** @class */ (function () {\r\n    function AudioInstanceFactory() {\r\n    }\r\n    AudioInstanceFactory.create = function (src) {\r\n        if (typeof src === 'string') {\r\n            return new AudioTagInstance(src);\r\n        }\r\n        if (src instanceof AudioBuffer) {\r\n            return new WebAudioInstance(src);\r\n        }\r\n        return new AudioInstance(src);\r\n    };\r\n    return AudioInstanceFactory;\r\n}());\r\nexport { AudioInstanceFactory };\r\n/**\r\n * Internal class representing base AudioInstance implementation\r\n */\r\n/* istanbul ignore next */\r\nvar AudioInstance = /** @class */ (function () {\r\n    function AudioInstance(_src) {\r\n        this._src = _src;\r\n        this._volume = 1;\r\n        this._loop = false;\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n    }\r\n    Object.defineProperty(AudioInstance.prototype, \"loop\", {\r\n        get: function () {\r\n            return this._loop;\r\n        },\r\n        set: function (value) {\r\n            this._loop = value;\r\n            if (this._instance) {\r\n                this._instance.loop = value;\r\n                this._wireUpOnEnded();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AudioInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            this._volume = Util.clamp(value, 0, 1.0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AudioInstance.prototype.isPlaying = function () {\r\n        return this._isPlaying;\r\n    };\r\n    AudioInstance.prototype.pause = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPaused = true;\r\n        this._isPlaying = false;\r\n    };\r\n    AudioInstance.prototype.stop = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n    };\r\n    AudioInstance.prototype.play = function () {\r\n        if (this._isPaused) {\r\n            this._resumePlayBack();\r\n        }\r\n        if (!this._isPlaying) {\r\n            this._startPlayBack();\r\n        }\r\n        return this._playingPromise;\r\n    };\r\n    AudioInstance.prototype._startPlayBack = function () {\r\n        this._isPlaying = true;\r\n        this._isPaused = false;\r\n        this._playingPromise = new Promise();\r\n    };\r\n    AudioInstance.prototype._resumePlayBack = function () {\r\n        if (!this._isPaused) {\r\n            return;\r\n        }\r\n        this._isPaused = false;\r\n        this._isPlaying = true;\r\n    };\r\n    AudioInstance.prototype._wireUpOnEnded = function () {\r\n        var _this = this;\r\n        if (!this.loop) {\r\n            this._instance.onended = function () { return _this._handleOnEnded(); };\r\n        }\r\n    };\r\n    AudioInstance.prototype._handleOnEnded = function () {\r\n        /**\r\n         * Override me\r\n         */\r\n    };\r\n    return AudioInstance;\r\n}());\r\nexport { AudioInstance };\r\n/**\r\n * Internal class representing a HTML5 audio instance\r\n */\r\n/* istanbul ignore next */\r\nvar AudioTagInstance = /** @class */ (function (_super) {\r\n    __extends(AudioTagInstance, _super);\r\n    function AudioTagInstance(src) {\r\n        var _this = _super.call(this, src) || this;\r\n        _this._instance = new Audio(src);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AudioTagInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            value = Util.clamp(value, 0, 1.0);\r\n            this._volume = value;\r\n            this._instance.volume = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AudioTagInstance.prototype.pause = function () {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._instance.pause();\r\n        this._isPaused = true;\r\n        this._isPlaying = false;\r\n    };\r\n    AudioTagInstance.prototype.stop = function () {\r\n        _super.prototype.stop.call(this);\r\n        this._instance.pause();\r\n        this._instance.currentTime = 0;\r\n        this._handleOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._startPlayBack = function () {\r\n        _super.prototype._startPlayBack.call(this);\r\n        this._instance.load();\r\n        this._instance.loop = this.loop;\r\n        this._instance.play();\r\n        this._wireUpOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._resumePlayBack = function () {\r\n        _super.prototype._resumePlayBack.call(this);\r\n        this._instance.play();\r\n        this._wireUpOnEnded();\r\n    };\r\n    AudioTagInstance.prototype._handleOnEnded = function () {\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        this._playingPromise.resolve(true);\r\n    };\r\n    return AudioTagInstance;\r\n}(AudioInstance));\r\nexport { AudioTagInstance };\r\n/**\r\n * Internal class representing a Web Audio AudioBufferSourceNode instance\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\r\n */\r\n/* istanbul ignore next */\r\nvar WebAudioInstance = /** @class */ (function (_super) {\r\n    __extends(WebAudioInstance, _super);\r\n    function WebAudioInstance(_src) {\r\n        var _this = _super.call(this, _src) || this;\r\n        _this._audioContext = AudioContextFactory.create();\r\n        _this._volumeNode = _this._audioContext.createGain();\r\n        /**\r\n         * Current playback offset (in seconds)\r\n         */\r\n        _this._currentOffset = 0;\r\n        _this._createNewBufferSource();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(WebAudioInstance.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            value = Util.clamp(value, 0, 1.0);\r\n            this._volume = value;\r\n            if (this._volumeNode.gain.setTargetAtTime) {\r\n                this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0);\r\n            }\r\n            else {\r\n                this._volumeNode.gain.value = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(WebAudioInstance.prototype, \"_playbackRate\", {\r\n        get: function () {\r\n            return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WebAudioInstance.prototype.pause = function () {\r\n        _super.prototype.pause.call(this);\r\n        this._instance.stop(0);\r\n        // Playback rate will be a scale factor of how fast/slow the audio is being played\r\n        // default is 1.0\r\n        // we need to invert it to get the time scale\r\n        this._setPauseOffset();\r\n    };\r\n    WebAudioInstance.prototype.stop = function () {\r\n        _super.prototype.stop.call(this);\r\n        this._currentOffset = 0;\r\n        this._instance.stop(0);\r\n        // handler will not be wired up if we were looping\r\n        if (!this._instance.onended) {\r\n            this._handleOnEnded();\r\n        }\r\n    };\r\n    WebAudioInstance.prototype._startPlayBack = function () {\r\n        _super.prototype._startPlayBack.call(this);\r\n        if (!this._instance) {\r\n            this._createNewBufferSource();\r\n        }\r\n        this._rememberStartTime();\r\n        this._volumeNode.connect(this._audioContext.destination);\r\n        this._instance.start(0, 0);\r\n        this._currentOffset = 0;\r\n        this._playingPromise = new Promise();\r\n        this._wireUpOnEnded();\r\n    };\r\n    WebAudioInstance.prototype._resumePlayBack = function () {\r\n        _super.prototype._resumePlayBack.call(this);\r\n        // a buffer source can only be started once\r\n        // so we need to dispose of the previous instance before\r\n        // \"resuming\" the next one\r\n        this._instance.onended = null; // dispose of any previous event handler\r\n        this._createNewBufferSource();\r\n        var duration = this._playbackRate * this._src.duration;\r\n        var restartTime = this._currentOffset % duration;\r\n        this._rememberStartTime(restartTime * -1000);\r\n        this._instance.start(0, restartTime);\r\n        this._wireUpOnEnded();\r\n    };\r\n    WebAudioInstance.prototype._handleOnEnded = function () {\r\n        // pausing calls stop(0) which triggers onended event\r\n        // so we don't \"resolve\" yet (when we resume we'll try again)\r\n        if (!this._isPaused) {\r\n            this._isPlaying = false;\r\n            this._playingPromise.resolve(true);\r\n        }\r\n    };\r\n    WebAudioInstance.prototype._rememberStartTime = function (amend) {\r\n        this._startTime = new Date().getTime() + (amend | 0);\r\n    };\r\n    WebAudioInstance.prototype._setPauseOffset = function () {\r\n        this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\r\n    };\r\n    WebAudioInstance.prototype._createNewBufferSource = function () {\r\n        this._instance = this._audioContext.createBufferSource();\r\n        this._instance.buffer = this._src;\r\n        this._instance.loop = this.loop;\r\n        this._instance.playbackRate.setValueAtTime(1.0, 0);\r\n        this._instance.connect(this._volumeNode);\r\n    };\r\n    return WebAudioInstance;\r\n}(AudioInstance));\r\nexport { WebAudioInstance };\r\n//# sourceMappingURL=AudioInstance.js.map","import { Logger } from './Log';\r\n/**\r\n * Whether or not the browser can play this file as HTML5 Audio\r\n */\r\nexport function canPlayFile(file) {\r\n    try {\r\n        var a = new Audio();\r\n        var filetype = /.*\\.([A-Za-z0-9]+)$/;\r\n        var type = file.match(filetype)[1];\r\n        if (a.canPlayType('audio/' + type)) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e) {\r\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\r\n        return false;\r\n    }\r\n}\r\n//# sourceMappingURL=Sound.js.map","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { ExResponse } from '../../Interfaces/IAudioImplementation';\r\nimport { Resource } from '../Resource';\r\nimport { AudioInstanceFactory } from './AudioInstance';\r\nimport { AudioContextFactory } from './AudioContext';\r\nimport { NativeSoundEvent } from '../../Events/MediaEvents';\r\nimport { Promise } from '../../Promises';\r\nimport { canPlayFile } from '../../Util/Sound';\r\n/**\r\n * The [[Sound]] object allows games built in Excalibur to load audio\r\n * components, from soundtracks to sound effects. [[Sound]] is an [[ILoadable]]\r\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\r\n *\r\n * [[include:Sounds.md]]\r\n */\r\nvar Sound = /** @class */ (function (_super) {\r\n    __extends(Sound, _super);\r\n    /**\r\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\r\n     */\r\n    function Sound() {\r\n        var paths = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            paths[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this, '', '') || this;\r\n        _this._loop = false;\r\n        _this._volume = 1;\r\n        _this._isPaused = false;\r\n        _this._tracks = [];\r\n        _this._wasPlayingOnHidden = false;\r\n        _this._processedData = new Promise();\r\n        _this._audioContext = AudioContextFactory.create();\r\n        _this._detectResponseType();\r\n        /* Chrome : MP3, WAV, Ogg\r\n             * Firefox : WAV, Ogg,\r\n             * IE : MP3, WAV coming soon\r\n             * Safari MP3, WAV, Ogg\r\n             */\r\n        for (var _a = 0, paths_1 = paths; _a < paths_1.length; _a++) {\r\n            var path = paths_1[_a];\r\n            if (canPlayFile(path)) {\r\n                _this.path = path;\r\n                break;\r\n            }\r\n        }\r\n        if (!_this.path) {\r\n            _this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\r\n            _this.logger.warn('Attempting to use', paths[0]);\r\n            _this.path = paths[0]; // select the first specified\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Sound.prototype, \"loop\", {\r\n        get: function () {\r\n            return this._loop;\r\n        },\r\n        /**\r\n         * Indicates whether the clip should loop when complete\r\n         * @param value  Set the looping flag\r\n         */\r\n        set: function (value) {\r\n            this._loop = value;\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                track.loop = this._loop;\r\n            }\r\n            this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sound.prototype, \"volume\", {\r\n        get: function () {\r\n            return this._volume;\r\n        },\r\n        set: function (value) {\r\n            this._volume = value;\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                track.volume = this._volume;\r\n            }\r\n            this.emit('volumechange', new NativeSoundEvent(this));\r\n            this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sound.prototype, \"instances\", {\r\n        /**\r\n         * Return array of Current AudioInstances playing or being paused\r\n         */\r\n        get: function () {\r\n            return this._tracks;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Sound.prototype.wireEngine = function (engine) {\r\n        var _this = this;\r\n        if (engine) {\r\n            this._engine = engine;\r\n            this._engine.on('hidden', function () {\r\n                if (engine.pauseAudioWhenHidden && _this.isPlaying()) {\r\n                    _this._wasPlayingOnHidden = true;\r\n                    _this.pause();\r\n                }\r\n            });\r\n            this._engine.on('visible', function () {\r\n                if (engine.pauseAudioWhenHidden && _this._wasPlayingOnHidden) {\r\n                    _this.play();\r\n                    _this._wasPlayingOnHidden = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns how many instances of the sound are currently playing\r\n     */\r\n    Sound.prototype.instanceCount = function () {\r\n        return this._tracks.length;\r\n    };\r\n    /**\r\n     * Whether or not the sound is playing right now\r\n     */\r\n    Sound.prototype.isPlaying = function () {\r\n        return this._tracks.some(function (t) { return t.isPlaying(); });\r\n    };\r\n    /**\r\n     * Play the sound, returns a promise that resolves when the sound is done playing\r\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\r\n     */\r\n    Sound.prototype.play = function (volume) {\r\n        if (!this.isLoaded()) {\r\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\r\n            return Promise.resolve(true);\r\n        }\r\n        this.volume = volume || this.volume;\r\n        if (this._isPaused) {\r\n            return this._resumePlayback();\r\n        }\r\n        else {\r\n            return this._startPlayback();\r\n        }\r\n    };\r\n    /**\r\n     * Stop the sound, and do not rewind\r\n     */\r\n    Sound.prototype.pause = function () {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n            var track = _a[_i];\r\n            track.pause();\r\n        }\r\n        this._isPaused = true;\r\n        this.emit('pause', new NativeSoundEvent(this));\r\n        this.logger.debug('Paused all instances of sound', this.path);\r\n    };\r\n    /**\r\n     * Stop the sound and rewind\r\n     */\r\n    Sound.prototype.stop = function () {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n            var track = _a[_i];\r\n            track.stop();\r\n        }\r\n        this.emit('stop', new NativeSoundEvent(this));\r\n        this._isPaused = false;\r\n        this._tracks.length = 0;\r\n        this.logger.debug('Stopped all instances of sound', this.path);\r\n    };\r\n    Sound.prototype.setData = function (data) {\r\n        this.emit('emptied', new NativeSoundEvent(this));\r\n        this.data = data;\r\n        this._processedData = new Promise();\r\n    };\r\n    Sound.prototype.processData = function (data) {\r\n        var _this = this;\r\n        /**\r\n         * Processes raw arraybuffer data and decodes into WebAudio buffer (async).\r\n         */\r\n        var processPromise = data instanceof ArrayBuffer ? this._processArrayBufferData(data) : this._processBlobData(data);\r\n        return processPromise.then(function (processedData) { return _this._setProcessedData(processedData); });\r\n    };\r\n    /**\r\n     * Get Id of provided AudioInstance in current trackList\r\n     * @param track [[AudioInstance]] which Id is to be given\r\n     */\r\n    Sound.prototype.getTrackId = function (track) {\r\n        return this._tracks.indexOf(track);\r\n    };\r\n    Sound.prototype._resumePlayback = function () {\r\n        if (this._isPaused) {\r\n            var resumed = [];\r\n            // ensure we resume *current* tracks (if paused)\r\n            for (var _i = 0, _a = this._tracks; _i < _a.length; _i++) {\r\n                var track = _a[_i];\r\n                resumed.push(track.play());\r\n            }\r\n            this._isPaused = false;\r\n            this.emit('resume', new NativeSoundEvent(this));\r\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\r\n            // resolve when resumed tracks are done\r\n            return Promise.join(resumed);\r\n        }\r\n        else {\r\n            return Promise.resolve(true);\r\n        }\r\n    };\r\n    Sound.prototype._startPlayback = function () {\r\n        var _this = this;\r\n        var newTrack = this._createNewTrack();\r\n        var playPromise = new Promise();\r\n        newTrack.then(function (track) {\r\n            track.play().then(function (resolved) {\r\n                // when done, remove track\r\n                _this.emit('playbackend', new NativeSoundEvent(_this, track));\r\n                _this._tracks.splice(_this.getTrackId(track), 1);\r\n                playPromise.resolve(resolved);\r\n                return resolved;\r\n            });\r\n            _this.emit('playbackstart', new NativeSoundEvent(_this, track));\r\n            _this.logger.debug('Playing new instance for sound', _this.path);\r\n        });\r\n        return playPromise;\r\n    };\r\n    Sound.prototype._processArrayBufferData = function (data) {\r\n        var _this = this;\r\n        var complete = new Promise();\r\n        this._audioContext.decodeAudioData(data, function (buffer) {\r\n            complete.resolve(buffer);\r\n        }, function () {\r\n            _this.logger.error('Unable to decode ' +\r\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\r\n                'if this is an mp3 try removing id3 tags and album art from the file.');\r\n            complete.resolve(undefined);\r\n        });\r\n        return complete;\r\n    };\r\n    Sound.prototype._processBlobData = function (data) {\r\n        return new Promise().resolve(_super.prototype.processData.call(this, data));\r\n    };\r\n    Sound.prototype._setProcessedData = function (processedData) {\r\n        this._processedData.resolve(processedData);\r\n    };\r\n    Sound.prototype._createNewTrack = function () {\r\n        var _this = this;\r\n        var aiPromise = new Promise();\r\n        if (this._processedData.state() !== 0) {\r\n            this.processData(this.data);\r\n        }\r\n        this._processedData.then(function (processedData) {\r\n            aiPromise.resolve(_this._getTrackInstance(processedData));\r\n            return processedData;\r\n        }, function (error) {\r\n            _this.logger.error(error, 'Cannot create AudioInstance due to wrong processed data.');\r\n        });\r\n        return aiPromise;\r\n    };\r\n    Sound.prototype._getTrackInstance = function (data) {\r\n        var newTrack = AudioInstanceFactory.create(data);\r\n        newTrack.loop = this.loop;\r\n        newTrack.volume = this.volume;\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    };\r\n    Sound.prototype._detectResponseType = function () {\r\n        if (window.AudioContext) {\r\n            this.responseType = ExResponse.type.arraybuffer;\r\n        }\r\n        else {\r\n            this.responseType = ExResponse.type.blob;\r\n        }\r\n    };\r\n    return Sound;\r\n}(Resource));\r\nexport { Sound };\r\n//# sourceMappingURL=Sound.js.map","import { Logger } from './Log';\r\nimport * as Util from './Util';\r\n/**\r\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\r\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\r\n */\r\nexport function obsolete(options) {\r\n    options = Util.extend({}, { message: 'This method will be removed in future versions of Excalibur.', alternateMethod: null }, options);\r\n    return function (target, property, descriptor) {\r\n        if (!(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\r\n            throw new SyntaxError('Only functions/getters/setters can be marked as obsolete');\r\n        }\r\n        var methodSignature = \"\" + (target.name || '') + (target.name ? '.' : '') + property;\r\n        var message = methodSignature + \" is marked obsolete: \" + options.message +\r\n            (options.alternateMethod ? \" Use \" + options.alternateMethod + \" instead\" : '');\r\n        var method = Util.extend({}, descriptor);\r\n        if (descriptor.value) {\r\n            method.value = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.value.apply(this, arguments);\r\n            };\r\n            return method;\r\n        }\r\n        if (descriptor.get) {\r\n            method.get = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.get.apply(this, arguments);\r\n            };\r\n        }\r\n        if (descriptor.set) {\r\n            method.set = function () {\r\n                Logger.getInstance().warn(message);\r\n                return descriptor.set.apply(this, arguments);\r\n            };\r\n        }\r\n        return method;\r\n    };\r\n}\r\n//# sourceMappingURL=Decorators.js.map","/**\r\n * The current Excalibur version string\r\n * @description `\"0.18.0\"` gets replaced by Webpack on build\r\n */\r\nexport var EX_VERSION = \"0.18.0\";\r\n// This file is used as the bundle entrypoint and exports everything\r\n// that will be exposed as the `ex` global variable.\r\nexport * from './Engine';\r\nexport { Actor, CollisionType } from './Actor';\r\nexport * from './Algebra';\r\nexport * from './Camera';\r\nexport * from './Class';\r\nexport * from './Configurable';\r\nexport * from './Debug';\r\nexport * from './EventDispatcher';\r\nexport * from './Events/MediaEvents';\r\nexport * from './Events';\r\nexport * from './Group';\r\nexport { Label, FontStyle, FontUnit, TextAlign, BaseAlign } from './Label';\r\nexport * from './Loader';\r\nexport { Particle, ParticleEmitter, EmitterType } from './Particles';\r\nexport * from './Physics';\r\nexport * from './Promises';\r\nexport * from './Scene';\r\nexport { TileMap, Cell, TileSprite } from './TileMap';\r\nexport * from './Timer';\r\nexport * from './Trigger';\r\nexport * from './UIActor';\r\nexport * from './Actions/Index';\r\nexport * from './Collision/Index';\r\nexport * from './Drawing/Index';\r\nexport * from './Interfaces/Index';\r\nexport * from './Math/Index';\r\nexport * from './PostProcessing/Index';\r\nexport * from './Resources/Index';\r\n// ex.Events namespace\r\nimport * as events from './Events';\r\nexport { events as Events };\r\n// ex.Input namespace\r\nimport * as input from './Input/Index';\r\nexport { input as Input };\r\n// ex.Traits namespace\r\nimport * as traits from './Traits/Index';\r\nexport { traits as Traits };\r\n// ex.Util namespaces\r\nimport * as util from './Util/Index';\r\nexport { util as Util };\r\nexport * from './Util/Decorators';\r\nexport * from './Util/Detector';\r\nexport * from './Util/CullingBox';\r\nexport * from './Util/EasingFunctions';\r\nexport * from './Util/Log';\r\nexport * from './Util/SortedList';\r\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}